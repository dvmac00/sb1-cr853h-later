/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[Object.keys(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};

// node_modules/axios/lib/helpers/bind.js
var require_bind = __commonJS({
  "node_modules/axios/lib/helpers/bind.js"(exports, module2) {
    "use strict";
    module2.exports = function bind(fn, thisArg) {
      return function wrap2() {
        var args = new Array(arguments.length);
        for (var i = 0; i < args.length; i++) {
          args[i] = arguments[i];
        }
        return fn.apply(thisArg, args);
      };
    };
  }
});

// node_modules/axios/lib/utils.js
var require_utils = __commonJS({
  "node_modules/axios/lib/utils.js"(exports, module2) {
    "use strict";
    var bind = require_bind();
    var toString = Object.prototype.toString;
    function isArray(val) {
      return toString.call(val) === "[object Array]";
    }
    function isUndefined(val) {
      return typeof val === "undefined";
    }
    function isBuffer(val) {
      return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor) && typeof val.constructor.isBuffer === "function" && val.constructor.isBuffer(val);
    }
    function isArrayBuffer(val) {
      return toString.call(val) === "[object ArrayBuffer]";
    }
    function isFormData(val) {
      return typeof FormData !== "undefined" && val instanceof FormData;
    }
    function isArrayBufferView(val) {
      var result;
      if (typeof ArrayBuffer !== "undefined" && ArrayBuffer.isView) {
        result = ArrayBuffer.isView(val);
      } else {
        result = val && val.buffer && val.buffer instanceof ArrayBuffer;
      }
      return result;
    }
    function isString(val) {
      return typeof val === "string";
    }
    function isNumber(val) {
      return typeof val === "number";
    }
    function isObject(val) {
      return val !== null && typeof val === "object";
    }
    function isPlainObject(val) {
      if (toString.call(val) !== "[object Object]") {
        return false;
      }
      var prototype = Object.getPrototypeOf(val);
      return prototype === null || prototype === Object.prototype;
    }
    function isDate(val) {
      return toString.call(val) === "[object Date]";
    }
    function isFile(val) {
      return toString.call(val) === "[object File]";
    }
    function isBlob(val) {
      return toString.call(val) === "[object Blob]";
    }
    function isFunction(val) {
      return toString.call(val) === "[object Function]";
    }
    function isStream(val) {
      return isObject(val) && isFunction(val.pipe);
    }
    function isURLSearchParams(val) {
      return typeof URLSearchParams !== "undefined" && val instanceof URLSearchParams;
    }
    function trim(str) {
      return str.trim ? str.trim() : str.replace(/^\s+|\s+$/g, "");
    }
    function isStandardBrowserEnv() {
      if (typeof navigator !== "undefined" && (navigator.product === "ReactNative" || navigator.product === "NativeScript" || navigator.product === "NS")) {
        return false;
      }
      return typeof window !== "undefined" && typeof document !== "undefined";
    }
    function forEach(obj, fn) {
      if (obj === null || typeof obj === "undefined") {
        return;
      }
      if (typeof obj !== "object") {
        obj = [obj];
      }
      if (isArray(obj)) {
        for (var i = 0, l = obj.length; i < l; i++) {
          fn.call(null, obj[i], i, obj);
        }
      } else {
        for (var key in obj) {
          if (Object.prototype.hasOwnProperty.call(obj, key)) {
            fn.call(null, obj[key], key, obj);
          }
        }
      }
    }
    function merge() {
      var result = {};
      function assignValue(val, key) {
        if (isPlainObject(result[key]) && isPlainObject(val)) {
          result[key] = merge(result[key], val);
        } else if (isPlainObject(val)) {
          result[key] = merge({}, val);
        } else if (isArray(val)) {
          result[key] = val.slice();
        } else {
          result[key] = val;
        }
      }
      for (var i = 0, l = arguments.length; i < l; i++) {
        forEach(arguments[i], assignValue);
      }
      return result;
    }
    function extend(a, b, thisArg) {
      forEach(b, function assignValue(val, key) {
        if (thisArg && typeof val === "function") {
          a[key] = bind(val, thisArg);
        } else {
          a[key] = val;
        }
      });
      return a;
    }
    function stripBOM(content) {
      if (content.charCodeAt(0) === 65279) {
        content = content.slice(1);
      }
      return content;
    }
    module2.exports = {
      isArray,
      isArrayBuffer,
      isBuffer,
      isFormData,
      isArrayBufferView,
      isString,
      isNumber,
      isObject,
      isPlainObject,
      isUndefined,
      isDate,
      isFile,
      isBlob,
      isFunction,
      isStream,
      isURLSearchParams,
      isStandardBrowserEnv,
      forEach,
      merge,
      extend,
      trim,
      stripBOM
    };
  }
});

// node_modules/axios/lib/helpers/buildURL.js
var require_buildURL = __commonJS({
  "node_modules/axios/lib/helpers/buildURL.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    function encode(val) {
      return encodeURIComponent(val).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
    }
    module2.exports = function buildURL(url, params, paramsSerializer) {
      if (!params) {
        return url;
      }
      var serializedParams;
      if (paramsSerializer) {
        serializedParams = paramsSerializer(params);
      } else if (utils.isURLSearchParams(params)) {
        serializedParams = params.toString();
      } else {
        var parts = [];
        utils.forEach(params, function serialize(val, key) {
          if (val === null || typeof val === "undefined") {
            return;
          }
          if (utils.isArray(val)) {
            key = key + "[]";
          } else {
            val = [val];
          }
          utils.forEach(val, function parseValue(v) {
            if (utils.isDate(v)) {
              v = v.toISOString();
            } else if (utils.isObject(v)) {
              v = JSON.stringify(v);
            }
            parts.push(encode(key) + "=" + encode(v));
          });
        });
        serializedParams = parts.join("&");
      }
      if (serializedParams) {
        var hashmarkIndex = url.indexOf("#");
        if (hashmarkIndex !== -1) {
          url = url.slice(0, hashmarkIndex);
        }
        url += (url.indexOf("?") === -1 ? "?" : "&") + serializedParams;
      }
      return url;
    };
  }
});

// node_modules/axios/lib/core/InterceptorManager.js
var require_InterceptorManager = __commonJS({
  "node_modules/axios/lib/core/InterceptorManager.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    function InterceptorManager() {
      this.handlers = [];
    }
    InterceptorManager.prototype.use = function use(fulfilled, rejected, options) {
      this.handlers.push({
        fulfilled,
        rejected,
        synchronous: options ? options.synchronous : false,
        runWhen: options ? options.runWhen : null
      });
      return this.handlers.length - 1;
    };
    InterceptorManager.prototype.eject = function eject(id) {
      if (this.handlers[id]) {
        this.handlers[id] = null;
      }
    };
    InterceptorManager.prototype.forEach = function forEach(fn) {
      utils.forEach(this.handlers, function forEachHandler(h) {
        if (h !== null) {
          fn(h);
        }
      });
    };
    module2.exports = InterceptorManager;
  }
});

// node_modules/axios/lib/helpers/normalizeHeaderName.js
var require_normalizeHeaderName = __commonJS({
  "node_modules/axios/lib/helpers/normalizeHeaderName.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    module2.exports = function normalizeHeaderName(headers, normalizedName) {
      utils.forEach(headers, function processHeader(value, name) {
        if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {
          headers[normalizedName] = value;
          delete headers[name];
        }
      });
    };
  }
});

// node_modules/axios/lib/core/enhanceError.js
var require_enhanceError = __commonJS({
  "node_modules/axios/lib/core/enhanceError.js"(exports, module2) {
    "use strict";
    module2.exports = function enhanceError(error, config, code, request, response) {
      error.config = config;
      if (code) {
        error.code = code;
      }
      error.request = request;
      error.response = response;
      error.isAxiosError = true;
      error.toJSON = function toJSON() {
        return {
          message: this.message,
          name: this.name,
          description: this.description,
          number: this.number,
          fileName: this.fileName,
          lineNumber: this.lineNumber,
          columnNumber: this.columnNumber,
          stack: this.stack,
          config: this.config,
          code: this.code,
          status: this.response && this.response.status ? this.response.status : null
        };
      };
      return error;
    };
  }
});

// node_modules/axios/lib/core/createError.js
var require_createError = __commonJS({
  "node_modules/axios/lib/core/createError.js"(exports, module2) {
    "use strict";
    var enhanceError = require_enhanceError();
    module2.exports = function createError(message, config, code, request, response) {
      var error = new Error(message);
      return enhanceError(error, config, code, request, response);
    };
  }
});

// node_modules/axios/lib/core/settle.js
var require_settle = __commonJS({
  "node_modules/axios/lib/core/settle.js"(exports, module2) {
    "use strict";
    var createError = require_createError();
    module2.exports = function settle(resolve, reject, response) {
      var validateStatus = response.config.validateStatus;
      if (!response.status || !validateStatus || validateStatus(response.status)) {
        resolve(response);
      } else {
        reject(createError("Request failed with status code " + response.status, response.config, null, response.request, response));
      }
    };
  }
});

// node_modules/axios/lib/helpers/cookies.js
var require_cookies = __commonJS({
  "node_modules/axios/lib/helpers/cookies.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    module2.exports = utils.isStandardBrowserEnv() ? function standardBrowserEnv() {
      return {
        write: function write(name, value, expires, path, domain, secure) {
          var cookie = [];
          cookie.push(name + "=" + encodeURIComponent(value));
          if (utils.isNumber(expires)) {
            cookie.push("expires=" + new Date(expires).toGMTString());
          }
          if (utils.isString(path)) {
            cookie.push("path=" + path);
          }
          if (utils.isString(domain)) {
            cookie.push("domain=" + domain);
          }
          if (secure === true) {
            cookie.push("secure");
          }
          document.cookie = cookie.join("; ");
        },
        read: function read(name) {
          var match = document.cookie.match(new RegExp("(^|;\\s*)(" + name + ")=([^;]*)"));
          return match ? decodeURIComponent(match[3]) : null;
        },
        remove: function remove(name) {
          this.write(name, "", Date.now() - 864e5);
        }
      };
    }() : function nonStandardBrowserEnv() {
      return {
        write: function write() {
        },
        read: function read() {
          return null;
        },
        remove: function remove() {
        }
      };
    }();
  }
});

// node_modules/axios/lib/helpers/isAbsoluteURL.js
var require_isAbsoluteURL = __commonJS({
  "node_modules/axios/lib/helpers/isAbsoluteURL.js"(exports, module2) {
    "use strict";
    module2.exports = function isAbsoluteURL(url) {
      return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(url);
    };
  }
});

// node_modules/axios/lib/helpers/combineURLs.js
var require_combineURLs = __commonJS({
  "node_modules/axios/lib/helpers/combineURLs.js"(exports, module2) {
    "use strict";
    module2.exports = function combineURLs(baseURL, relativeURL) {
      return relativeURL ? baseURL.replace(/\/+$/, "") + "/" + relativeURL.replace(/^\/+/, "") : baseURL;
    };
  }
});

// node_modules/axios/lib/core/buildFullPath.js
var require_buildFullPath = __commonJS({
  "node_modules/axios/lib/core/buildFullPath.js"(exports, module2) {
    "use strict";
    var isAbsoluteURL = require_isAbsoluteURL();
    var combineURLs = require_combineURLs();
    module2.exports = function buildFullPath(baseURL, requestedURL) {
      if (baseURL && !isAbsoluteURL(requestedURL)) {
        return combineURLs(baseURL, requestedURL);
      }
      return requestedURL;
    };
  }
});

// node_modules/axios/lib/helpers/parseHeaders.js
var require_parseHeaders = __commonJS({
  "node_modules/axios/lib/helpers/parseHeaders.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    var ignoreDuplicateOf = [
      "age",
      "authorization",
      "content-length",
      "content-type",
      "etag",
      "expires",
      "from",
      "host",
      "if-modified-since",
      "if-unmodified-since",
      "last-modified",
      "location",
      "max-forwards",
      "proxy-authorization",
      "referer",
      "retry-after",
      "user-agent"
    ];
    module2.exports = function parseHeaders(headers) {
      var parsed = {};
      var key;
      var val;
      var i;
      if (!headers) {
        return parsed;
      }
      utils.forEach(headers.split("\n"), function parser(line) {
        i = line.indexOf(":");
        key = utils.trim(line.substr(0, i)).toLowerCase();
        val = utils.trim(line.substr(i + 1));
        if (key) {
          if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {
            return;
          }
          if (key === "set-cookie") {
            parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);
          } else {
            parsed[key] = parsed[key] ? parsed[key] + ", " + val : val;
          }
        }
      });
      return parsed;
    };
  }
});

// node_modules/axios/lib/helpers/isURLSameOrigin.js
var require_isURLSameOrigin = __commonJS({
  "node_modules/axios/lib/helpers/isURLSameOrigin.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    module2.exports = utils.isStandardBrowserEnv() ? function standardBrowserEnv() {
      var msie = /(msie|trident)/i.test(navigator.userAgent);
      var urlParsingNode = document.createElement("a");
      var originURL;
      function resolveURL(url) {
        var href = url;
        if (msie) {
          urlParsingNode.setAttribute("href", href);
          href = urlParsingNode.href;
        }
        urlParsingNode.setAttribute("href", href);
        return {
          href: urlParsingNode.href,
          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, "") : "",
          host: urlParsingNode.host,
          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\?/, "") : "",
          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, "") : "",
          hostname: urlParsingNode.hostname,
          port: urlParsingNode.port,
          pathname: urlParsingNode.pathname.charAt(0) === "/" ? urlParsingNode.pathname : "/" + urlParsingNode.pathname
        };
      }
      originURL = resolveURL(window.location.href);
      return function isURLSameOrigin(requestURL) {
        var parsed = utils.isString(requestURL) ? resolveURL(requestURL) : requestURL;
        return parsed.protocol === originURL.protocol && parsed.host === originURL.host;
      };
    }() : function nonStandardBrowserEnv() {
      return function isURLSameOrigin() {
        return true;
      };
    }();
  }
});

// node_modules/axios/lib/cancel/Cancel.js
var require_Cancel = __commonJS({
  "node_modules/axios/lib/cancel/Cancel.js"(exports, module2) {
    "use strict";
    function Cancel(message) {
      this.message = message;
    }
    Cancel.prototype.toString = function toString() {
      return "Cancel" + (this.message ? ": " + this.message : "");
    };
    Cancel.prototype.__CANCEL__ = true;
    module2.exports = Cancel;
  }
});

// node_modules/axios/lib/adapters/xhr.js
var require_xhr = __commonJS({
  "node_modules/axios/lib/adapters/xhr.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    var settle = require_settle();
    var cookies = require_cookies();
    var buildURL = require_buildURL();
    var buildFullPath = require_buildFullPath();
    var parseHeaders = require_parseHeaders();
    var isURLSameOrigin = require_isURLSameOrigin();
    var createError = require_createError();
    var defaults = require_defaults();
    var Cancel = require_Cancel();
    module2.exports = function xhrAdapter(config) {
      return new Promise(function dispatchXhrRequest(resolve, reject) {
        var requestData = config.data;
        var requestHeaders = config.headers;
        var responseType = config.responseType;
        var onCanceled;
        function done() {
          if (config.cancelToken) {
            config.cancelToken.unsubscribe(onCanceled);
          }
          if (config.signal) {
            config.signal.removeEventListener("abort", onCanceled);
          }
        }
        if (utils.isFormData(requestData)) {
          delete requestHeaders["Content-Type"];
        }
        var request = new XMLHttpRequest();
        if (config.auth) {
          var username = config.auth.username || "";
          var password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : "";
          requestHeaders.Authorization = "Basic " + btoa(username + ":" + password);
        }
        var fullPath = buildFullPath(config.baseURL, config.url);
        request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);
        request.timeout = config.timeout;
        function onloadend() {
          if (!request) {
            return;
          }
          var responseHeaders = "getAllResponseHeaders" in request ? parseHeaders(request.getAllResponseHeaders()) : null;
          var responseData = !responseType || responseType === "text" || responseType === "json" ? request.responseText : request.response;
          var response = {
            data: responseData,
            status: request.status,
            statusText: request.statusText,
            headers: responseHeaders,
            config,
            request
          };
          settle(function _resolve(value) {
            resolve(value);
            done();
          }, function _reject(err) {
            reject(err);
            done();
          }, response);
          request = null;
        }
        if ("onloadend" in request) {
          request.onloadend = onloadend;
        } else {
          request.onreadystatechange = function handleLoad() {
            if (!request || request.readyState !== 4) {
              return;
            }
            if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf("file:") === 0)) {
              return;
            }
            setTimeout(onloadend);
          };
        }
        request.onabort = function handleAbort() {
          if (!request) {
            return;
          }
          reject(createError("Request aborted", config, "ECONNABORTED", request));
          request = null;
        };
        request.onerror = function handleError() {
          reject(createError("Network Error", config, null, request));
          request = null;
        };
        request.ontimeout = function handleTimeout() {
          var timeoutErrorMessage = config.timeout ? "timeout of " + config.timeout + "ms exceeded" : "timeout exceeded";
          var transitional = config.transitional || defaults.transitional;
          if (config.timeoutErrorMessage) {
            timeoutErrorMessage = config.timeoutErrorMessage;
          }
          reject(createError(timeoutErrorMessage, config, transitional.clarifyTimeoutError ? "ETIMEDOUT" : "ECONNABORTED", request));
          request = null;
        };
        if (utils.isStandardBrowserEnv()) {
          var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ? cookies.read(config.xsrfCookieName) : void 0;
          if (xsrfValue) {
            requestHeaders[config.xsrfHeaderName] = xsrfValue;
          }
        }
        if ("setRequestHeader" in request) {
          utils.forEach(requestHeaders, function setRequestHeader(val, key) {
            if (typeof requestData === "undefined" && key.toLowerCase() === "content-type") {
              delete requestHeaders[key];
            } else {
              request.setRequestHeader(key, val);
            }
          });
        }
        if (!utils.isUndefined(config.withCredentials)) {
          request.withCredentials = !!config.withCredentials;
        }
        if (responseType && responseType !== "json") {
          request.responseType = config.responseType;
        }
        if (typeof config.onDownloadProgress === "function") {
          request.addEventListener("progress", config.onDownloadProgress);
        }
        if (typeof config.onUploadProgress === "function" && request.upload) {
          request.upload.addEventListener("progress", config.onUploadProgress);
        }
        if (config.cancelToken || config.signal) {
          onCanceled = function(cancel) {
            if (!request) {
              return;
            }
            reject(!cancel || cancel && cancel.type ? new Cancel("canceled") : cancel);
            request.abort();
            request = null;
          };
          config.cancelToken && config.cancelToken.subscribe(onCanceled);
          if (config.signal) {
            config.signal.aborted ? onCanceled() : config.signal.addEventListener("abort", onCanceled);
          }
        }
        if (!requestData) {
          requestData = null;
        }
        request.send(requestData);
      });
    };
  }
});

// node_modules/axios/lib/defaults.js
var require_defaults = __commonJS({
  "node_modules/axios/lib/defaults.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    var normalizeHeaderName = require_normalizeHeaderName();
    var enhanceError = require_enhanceError();
    var DEFAULT_CONTENT_TYPE = {
      "Content-Type": "application/x-www-form-urlencoded"
    };
    function setContentTypeIfUnset(headers, value) {
      if (!utils.isUndefined(headers) && utils.isUndefined(headers["Content-Type"])) {
        headers["Content-Type"] = value;
      }
    }
    function getDefaultAdapter() {
      var adapter;
      if (typeof XMLHttpRequest !== "undefined") {
        adapter = require_xhr();
      } else if (typeof process !== "undefined" && Object.prototype.toString.call(process) === "[object process]") {
        adapter = require_xhr();
      }
      return adapter;
    }
    function stringifySafely(rawValue, parser, encoder) {
      if (utils.isString(rawValue)) {
        try {
          (parser || JSON.parse)(rawValue);
          return utils.trim(rawValue);
        } catch (e) {
          if (e.name !== "SyntaxError") {
            throw e;
          }
        }
      }
      return (encoder || JSON.stringify)(rawValue);
    }
    var defaults = {
      transitional: {
        silentJSONParsing: true,
        forcedJSONParsing: true,
        clarifyTimeoutError: false
      },
      adapter: getDefaultAdapter(),
      transformRequest: [function transformRequest(data, headers) {
        normalizeHeaderName(headers, "Accept");
        normalizeHeaderName(headers, "Content-Type");
        if (utils.isFormData(data) || utils.isArrayBuffer(data) || utils.isBuffer(data) || utils.isStream(data) || utils.isFile(data) || utils.isBlob(data)) {
          return data;
        }
        if (utils.isArrayBufferView(data)) {
          return data.buffer;
        }
        if (utils.isURLSearchParams(data)) {
          setContentTypeIfUnset(headers, "application/x-www-form-urlencoded;charset=utf-8");
          return data.toString();
        }
        if (utils.isObject(data) || headers && headers["Content-Type"] === "application/json") {
          setContentTypeIfUnset(headers, "application/json");
          return stringifySafely(data);
        }
        return data;
      }],
      transformResponse: [function transformResponse(data) {
        var transitional = this.transitional || defaults.transitional;
        var silentJSONParsing = transitional && transitional.silentJSONParsing;
        var forcedJSONParsing = transitional && transitional.forcedJSONParsing;
        var strictJSONParsing = !silentJSONParsing && this.responseType === "json";
        if (strictJSONParsing || forcedJSONParsing && utils.isString(data) && data.length) {
          try {
            return JSON.parse(data);
          } catch (e) {
            if (strictJSONParsing) {
              if (e.name === "SyntaxError") {
                throw enhanceError(e, this, "E_JSON_PARSE");
              }
              throw e;
            }
          }
        }
        return data;
      }],
      timeout: 0,
      xsrfCookieName: "XSRF-TOKEN",
      xsrfHeaderName: "X-XSRF-TOKEN",
      maxContentLength: -1,
      maxBodyLength: -1,
      validateStatus: function validateStatus(status) {
        return status >= 200 && status < 300;
      },
      headers: {
        common: {
          "Accept": "application/json, text/plain, */*"
        }
      }
    };
    utils.forEach(["delete", "get", "head"], function forEachMethodNoData(method) {
      defaults.headers[method] = {};
    });
    utils.forEach(["post", "put", "patch"], function forEachMethodWithData(method) {
      defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);
    });
    module2.exports = defaults;
  }
});

// node_modules/axios/lib/core/transformData.js
var require_transformData = __commonJS({
  "node_modules/axios/lib/core/transformData.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    var defaults = require_defaults();
    module2.exports = function transformData(data, headers, fns) {
      var context = this || defaults;
      utils.forEach(fns, function transform(fn) {
        data = fn.call(context, data, headers);
      });
      return data;
    };
  }
});

// node_modules/axios/lib/cancel/isCancel.js
var require_isCancel = __commonJS({
  "node_modules/axios/lib/cancel/isCancel.js"(exports, module2) {
    "use strict";
    module2.exports = function isCancel(value) {
      return !!(value && value.__CANCEL__);
    };
  }
});

// node_modules/axios/lib/core/dispatchRequest.js
var require_dispatchRequest = __commonJS({
  "node_modules/axios/lib/core/dispatchRequest.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    var transformData = require_transformData();
    var isCancel = require_isCancel();
    var defaults = require_defaults();
    var Cancel = require_Cancel();
    function throwIfCancellationRequested(config) {
      if (config.cancelToken) {
        config.cancelToken.throwIfRequested();
      }
      if (config.signal && config.signal.aborted) {
        throw new Cancel("canceled");
      }
    }
    module2.exports = function dispatchRequest(config) {
      throwIfCancellationRequested(config);
      config.headers = config.headers || {};
      config.data = transformData.call(config, config.data, config.headers, config.transformRequest);
      config.headers = utils.merge(config.headers.common || {}, config.headers[config.method] || {}, config.headers);
      utils.forEach(["delete", "get", "head", "post", "put", "patch", "common"], function cleanHeaderConfig(method) {
        delete config.headers[method];
      });
      var adapter = config.adapter || defaults.adapter;
      return adapter(config).then(function onAdapterResolution(response) {
        throwIfCancellationRequested(config);
        response.data = transformData.call(config, response.data, response.headers, config.transformResponse);
        return response;
      }, function onAdapterRejection(reason) {
        if (!isCancel(reason)) {
          throwIfCancellationRequested(config);
          if (reason && reason.response) {
            reason.response.data = transformData.call(config, reason.response.data, reason.response.headers, config.transformResponse);
          }
        }
        return Promise.reject(reason);
      });
    };
  }
});

// node_modules/axios/lib/core/mergeConfig.js
var require_mergeConfig = __commonJS({
  "node_modules/axios/lib/core/mergeConfig.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    module2.exports = function mergeConfig(config1, config2) {
      config2 = config2 || {};
      var config = {};
      function getMergedValue(target, source) {
        if (utils.isPlainObject(target) && utils.isPlainObject(source)) {
          return utils.merge(target, source);
        } else if (utils.isPlainObject(source)) {
          return utils.merge({}, source);
        } else if (utils.isArray(source)) {
          return source.slice();
        }
        return source;
      }
      function mergeDeepProperties(prop) {
        if (!utils.isUndefined(config2[prop])) {
          return getMergedValue(config1[prop], config2[prop]);
        } else if (!utils.isUndefined(config1[prop])) {
          return getMergedValue(void 0, config1[prop]);
        }
      }
      function valueFromConfig2(prop) {
        if (!utils.isUndefined(config2[prop])) {
          return getMergedValue(void 0, config2[prop]);
        }
      }
      function defaultToConfig2(prop) {
        if (!utils.isUndefined(config2[prop])) {
          return getMergedValue(void 0, config2[prop]);
        } else if (!utils.isUndefined(config1[prop])) {
          return getMergedValue(void 0, config1[prop]);
        }
      }
      function mergeDirectKeys(prop) {
        if (prop in config2) {
          return getMergedValue(config1[prop], config2[prop]);
        } else if (prop in config1) {
          return getMergedValue(void 0, config1[prop]);
        }
      }
      var mergeMap = {
        "url": valueFromConfig2,
        "method": valueFromConfig2,
        "data": valueFromConfig2,
        "baseURL": defaultToConfig2,
        "transformRequest": defaultToConfig2,
        "transformResponse": defaultToConfig2,
        "paramsSerializer": defaultToConfig2,
        "timeout": defaultToConfig2,
        "timeoutMessage": defaultToConfig2,
        "withCredentials": defaultToConfig2,
        "adapter": defaultToConfig2,
        "responseType": defaultToConfig2,
        "xsrfCookieName": defaultToConfig2,
        "xsrfHeaderName": defaultToConfig2,
        "onUploadProgress": defaultToConfig2,
        "onDownloadProgress": defaultToConfig2,
        "decompress": defaultToConfig2,
        "maxContentLength": defaultToConfig2,
        "maxBodyLength": defaultToConfig2,
        "transport": defaultToConfig2,
        "httpAgent": defaultToConfig2,
        "httpsAgent": defaultToConfig2,
        "cancelToken": defaultToConfig2,
        "socketPath": defaultToConfig2,
        "responseEncoding": defaultToConfig2,
        "validateStatus": mergeDirectKeys
      };
      utils.forEach(Object.keys(config1).concat(Object.keys(config2)), function computeConfigValue(prop) {
        var merge = mergeMap[prop] || mergeDeepProperties;
        var configValue = merge(prop);
        utils.isUndefined(configValue) && merge !== mergeDirectKeys || (config[prop] = configValue);
      });
      return config;
    };
  }
});

// node_modules/axios/lib/env/data.js
var require_data = __commonJS({
  "node_modules/axios/lib/env/data.js"(exports, module2) {
    module2.exports = {
      "version": "0.24.0"
    };
  }
});

// node_modules/axios/lib/helpers/validator.js
var require_validator = __commonJS({
  "node_modules/axios/lib/helpers/validator.js"(exports, module2) {
    "use strict";
    var VERSION = require_data().version;
    var validators = {};
    ["object", "boolean", "number", "function", "string", "symbol"].forEach(function(type, i) {
      validators[type] = function validator(thing) {
        return typeof thing === type || "a" + (i < 1 ? "n " : " ") + type;
      };
    });
    var deprecatedWarnings = {};
    validators.transitional = function transitional(validator, version, message) {
      function formatMessage(opt, desc) {
        return "[Axios v" + VERSION + "] Transitional option '" + opt + "'" + desc + (message ? ". " + message : "");
      }
      return function(value, opt, opts) {
        if (validator === false) {
          throw new Error(formatMessage(opt, " has been removed" + (version ? " in " + version : "")));
        }
        if (version && !deprecatedWarnings[opt]) {
          deprecatedWarnings[opt] = true;
          console.warn(formatMessage(opt, " has been deprecated since v" + version + " and will be removed in the near future"));
        }
        return validator ? validator(value, opt, opts) : true;
      };
    };
    function assertOptions(options, schema, allowUnknown) {
      if (typeof options !== "object") {
        throw new TypeError("options must be an object");
      }
      var keys = Object.keys(options);
      var i = keys.length;
      while (i-- > 0) {
        var opt = keys[i];
        var validator = schema[opt];
        if (validator) {
          var value = options[opt];
          var result = value === void 0 || validator(value, opt, options);
          if (result !== true) {
            throw new TypeError("option " + opt + " must be " + result);
          }
          continue;
        }
        if (allowUnknown !== true) {
          throw Error("Unknown option " + opt);
        }
      }
    }
    module2.exports = {
      assertOptions,
      validators
    };
  }
});

// node_modules/axios/lib/core/Axios.js
var require_Axios = __commonJS({
  "node_modules/axios/lib/core/Axios.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    var buildURL = require_buildURL();
    var InterceptorManager = require_InterceptorManager();
    var dispatchRequest = require_dispatchRequest();
    var mergeConfig = require_mergeConfig();
    var validator = require_validator();
    var validators = validator.validators;
    function Axios(instanceConfig) {
      this.defaults = instanceConfig;
      this.interceptors = {
        request: new InterceptorManager(),
        response: new InterceptorManager()
      };
    }
    Axios.prototype.request = function request(config) {
      if (typeof config === "string") {
        config = arguments[1] || {};
        config.url = arguments[0];
      } else {
        config = config || {};
      }
      config = mergeConfig(this.defaults, config);
      if (config.method) {
        config.method = config.method.toLowerCase();
      } else if (this.defaults.method) {
        config.method = this.defaults.method.toLowerCase();
      } else {
        config.method = "get";
      }
      var transitional = config.transitional;
      if (transitional !== void 0) {
        validator.assertOptions(transitional, {
          silentJSONParsing: validators.transitional(validators.boolean),
          forcedJSONParsing: validators.transitional(validators.boolean),
          clarifyTimeoutError: validators.transitional(validators.boolean)
        }, false);
      }
      var requestInterceptorChain = [];
      var synchronousRequestInterceptors = true;
      this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {
        if (typeof interceptor.runWhen === "function" && interceptor.runWhen(config) === false) {
          return;
        }
        synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;
        requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);
      });
      var responseInterceptorChain = [];
      this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {
        responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);
      });
      var promise;
      if (!synchronousRequestInterceptors) {
        var chain = [dispatchRequest, void 0];
        Array.prototype.unshift.apply(chain, requestInterceptorChain);
        chain = chain.concat(responseInterceptorChain);
        promise = Promise.resolve(config);
        while (chain.length) {
          promise = promise.then(chain.shift(), chain.shift());
        }
        return promise;
      }
      var newConfig = config;
      while (requestInterceptorChain.length) {
        var onFulfilled = requestInterceptorChain.shift();
        var onRejected = requestInterceptorChain.shift();
        try {
          newConfig = onFulfilled(newConfig);
        } catch (error) {
          onRejected(error);
          break;
        }
      }
      try {
        promise = dispatchRequest(newConfig);
      } catch (error) {
        return Promise.reject(error);
      }
      while (responseInterceptorChain.length) {
        promise = promise.then(responseInterceptorChain.shift(), responseInterceptorChain.shift());
      }
      return promise;
    };
    Axios.prototype.getUri = function getUri(config) {
      config = mergeConfig(this.defaults, config);
      return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\?/, "");
    };
    utils.forEach(["delete", "get", "head", "options"], function forEachMethodNoData(method) {
      Axios.prototype[method] = function(url, config) {
        return this.request(mergeConfig(config || {}, {
          method,
          url,
          data: (config || {}).data
        }));
      };
    });
    utils.forEach(["post", "put", "patch"], function forEachMethodWithData(method) {
      Axios.prototype[method] = function(url, data, config) {
        return this.request(mergeConfig(config || {}, {
          method,
          url,
          data
        }));
      };
    });
    module2.exports = Axios;
  }
});

// node_modules/axios/lib/cancel/CancelToken.js
var require_CancelToken = __commonJS({
  "node_modules/axios/lib/cancel/CancelToken.js"(exports, module2) {
    "use strict";
    var Cancel = require_Cancel();
    function CancelToken(executor) {
      if (typeof executor !== "function") {
        throw new TypeError("executor must be a function.");
      }
      var resolvePromise;
      this.promise = new Promise(function promiseExecutor(resolve) {
        resolvePromise = resolve;
      });
      var token = this;
      this.promise.then(function(cancel) {
        if (!token._listeners)
          return;
        var i;
        var l = token._listeners.length;
        for (i = 0; i < l; i++) {
          token._listeners[i](cancel);
        }
        token._listeners = null;
      });
      this.promise.then = function(onfulfilled) {
        var _resolve;
        var promise = new Promise(function(resolve) {
          token.subscribe(resolve);
          _resolve = resolve;
        }).then(onfulfilled);
        promise.cancel = function reject() {
          token.unsubscribe(_resolve);
        };
        return promise;
      };
      executor(function cancel(message) {
        if (token.reason) {
          return;
        }
        token.reason = new Cancel(message);
        resolvePromise(token.reason);
      });
    }
    CancelToken.prototype.throwIfRequested = function throwIfRequested() {
      if (this.reason) {
        throw this.reason;
      }
    };
    CancelToken.prototype.subscribe = function subscribe(listener) {
      if (this.reason) {
        listener(this.reason);
        return;
      }
      if (this._listeners) {
        this._listeners.push(listener);
      } else {
        this._listeners = [listener];
      }
    };
    CancelToken.prototype.unsubscribe = function unsubscribe(listener) {
      if (!this._listeners) {
        return;
      }
      var index = this._listeners.indexOf(listener);
      if (index !== -1) {
        this._listeners.splice(index, 1);
      }
    };
    CancelToken.source = function source() {
      var cancel;
      var token = new CancelToken(function executor(c) {
        cancel = c;
      });
      return {
        token,
        cancel
      };
    };
    module2.exports = CancelToken;
  }
});

// node_modules/axios/lib/helpers/spread.js
var require_spread = __commonJS({
  "node_modules/axios/lib/helpers/spread.js"(exports, module2) {
    "use strict";
    module2.exports = function spread(callback) {
      return function wrap2(arr) {
        return callback.apply(null, arr);
      };
    };
  }
});

// node_modules/axios/lib/helpers/isAxiosError.js
var require_isAxiosError = __commonJS({
  "node_modules/axios/lib/helpers/isAxiosError.js"(exports, module2) {
    "use strict";
    module2.exports = function isAxiosError(payload) {
      return typeof payload === "object" && payload.isAxiosError === true;
    };
  }
});

// node_modules/axios/lib/axios.js
var require_axios = __commonJS({
  "node_modules/axios/lib/axios.js"(exports, module2) {
    "use strict";
    var utils = require_utils();
    var bind = require_bind();
    var Axios = require_Axios();
    var mergeConfig = require_mergeConfig();
    var defaults = require_defaults();
    function createInstance(defaultConfig) {
      var context = new Axios(defaultConfig);
      var instance = bind(Axios.prototype.request, context);
      utils.extend(instance, Axios.prototype, context);
      utils.extend(instance, context);
      instance.create = function create(instanceConfig) {
        return createInstance(mergeConfig(defaultConfig, instanceConfig));
      };
      return instance;
    }
    var axios2 = createInstance(defaults);
    axios2.Axios = Axios;
    axios2.Cancel = require_Cancel();
    axios2.CancelToken = require_CancelToken();
    axios2.isCancel = require_isCancel();
    axios2.VERSION = require_data().version;
    axios2.all = function all(promises) {
      return Promise.all(promises);
    };
    axios2.spread = require_spread();
    axios2.isAxiosError = require_isAxiosError();
    module2.exports = axios2;
    module2.exports.default = axios2;
  }
});

// node_modules/axios/index.js
var require_axios2 = __commonJS({
  "node_modules/axios/index.js"(exports, module2) {
    module2.exports = require_axios();
  }
});

// main.ts
__export(exports, {
  default: () => AIPlugin
});
var import_obsidian2 = __toModule(require("obsidian"));

// src/embeddings.ts
var EmbeddingManager = class {
  constructor(vault, modelManager, databaseManager, cacheExpiration) {
    this.vault = vault;
    this.modelManager = modelManager;
    this.databaseManager = databaseManager;
    this.cacheExpiration = cacheExpiration;
  }
  async generateEmbedding(text) {
    return this.modelManager.generateEmbedding(text);
  }
  async generateEmbeddingsForFile(file) {
    const content = await this.vault.read(file);
    const chunks = this.chunkContent(content);
    const embeddings = [];
    for (let i = 0; i < chunks.length; i++) {
      const vector = await this.generateEmbedding(chunks[i]);
      embeddings.push({
        id: `${file.path}-${i}`,
        vector,
        file: file.path,
        chunk: chunks[i],
        timestamp: Date.now()
      });
    }
    await this.databaseManager.storeEmbeddings(embeddings);
    return embeddings;
  }
  async getEmbeddingsForFile(file) {
    const storedEmbeddings = await this.databaseManager.getEmbeddingsForFile(file.path);
    if (storedEmbeddings.length > 0 && this.isEmbeddingValid(storedEmbeddings[0])) {
      return storedEmbeddings;
    }
    return this.generateEmbeddingsForFile(file);
  }
  chunkContent(content) {
    return content.split("\n\n").filter((chunk) => chunk.trim() !== "");
  }
  isEmbeddingValid(embedding) {
    return Date.now() - embedding.timestamp < this.cacheExpiration;
  }
};

// node_modules/idb/build/index.js
var instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);
var idbProxyableTypes;
var cursorAdvanceMethods;
function getIdbProxyableTypes() {
  return idbProxyableTypes || (idbProxyableTypes = [
    IDBDatabase,
    IDBObjectStore,
    IDBIndex,
    IDBCursor,
    IDBTransaction
  ]);
}
function getCursorAdvanceMethods() {
  return cursorAdvanceMethods || (cursorAdvanceMethods = [
    IDBCursor.prototype.advance,
    IDBCursor.prototype.continue,
    IDBCursor.prototype.continuePrimaryKey
  ]);
}
var transactionDoneMap = new WeakMap();
var transformCache = new WeakMap();
var reverseTransformCache = new WeakMap();
function promisifyRequest(request) {
  const promise = new Promise((resolve, reject) => {
    const unlisten = () => {
      request.removeEventListener("success", success);
      request.removeEventListener("error", error);
    };
    const success = () => {
      resolve(wrap(request.result));
      unlisten();
    };
    const error = () => {
      reject(request.error);
      unlisten();
    };
    request.addEventListener("success", success);
    request.addEventListener("error", error);
  });
  reverseTransformCache.set(promise, request);
  return promise;
}
function cacheDonePromiseForTransaction(tx) {
  if (transactionDoneMap.has(tx))
    return;
  const done = new Promise((resolve, reject) => {
    const unlisten = () => {
      tx.removeEventListener("complete", complete);
      tx.removeEventListener("error", error);
      tx.removeEventListener("abort", error);
    };
    const complete = () => {
      resolve();
      unlisten();
    };
    const error = () => {
      reject(tx.error || new DOMException("AbortError", "AbortError"));
      unlisten();
    };
    tx.addEventListener("complete", complete);
    tx.addEventListener("error", error);
    tx.addEventListener("abort", error);
  });
  transactionDoneMap.set(tx, done);
}
var idbProxyTraps = {
  get(target, prop, receiver) {
    if (target instanceof IDBTransaction) {
      if (prop === "done")
        return transactionDoneMap.get(target);
      if (prop === "store") {
        return receiver.objectStoreNames[1] ? void 0 : receiver.objectStore(receiver.objectStoreNames[0]);
      }
    }
    return wrap(target[prop]);
  },
  set(target, prop, value) {
    target[prop] = value;
    return true;
  },
  has(target, prop) {
    if (target instanceof IDBTransaction && (prop === "done" || prop === "store")) {
      return true;
    }
    return prop in target;
  }
};
function replaceTraps(callback) {
  idbProxyTraps = callback(idbProxyTraps);
}
function wrapFunction(func) {
  if (getCursorAdvanceMethods().includes(func)) {
    return function(...args) {
      func.apply(unwrap(this), args);
      return wrap(this.request);
    };
  }
  return function(...args) {
    return wrap(func.apply(unwrap(this), args));
  };
}
function transformCachableValue(value) {
  if (typeof value === "function")
    return wrapFunction(value);
  if (value instanceof IDBTransaction)
    cacheDonePromiseForTransaction(value);
  if (instanceOfAny(value, getIdbProxyableTypes()))
    return new Proxy(value, idbProxyTraps);
  return value;
}
function wrap(value) {
  if (value instanceof IDBRequest)
    return promisifyRequest(value);
  if (transformCache.has(value))
    return transformCache.get(value);
  const newValue = transformCachableValue(value);
  if (newValue !== value) {
    transformCache.set(value, newValue);
    reverseTransformCache.set(newValue, value);
  }
  return newValue;
}
var unwrap = (value) => reverseTransformCache.get(value);
function openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {
  const request = indexedDB.open(name, version);
  const openPromise = wrap(request);
  if (upgrade) {
    request.addEventListener("upgradeneeded", (event) => {
      upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);
    });
  }
  if (blocked) {
    request.addEventListener("blocked", (event) => blocked(event.oldVersion, event.newVersion, event));
  }
  openPromise.then((db) => {
    if (terminated)
      db.addEventListener("close", () => terminated());
    if (blocking) {
      db.addEventListener("versionchange", (event) => blocking(event.oldVersion, event.newVersion, event));
    }
  }).catch(() => {
  });
  return openPromise;
}
var readMethods = ["get", "getKey", "getAll", "getAllKeys", "count"];
var writeMethods = ["put", "add", "delete", "clear"];
var cachedMethods = new Map();
function getMethod(target, prop) {
  if (!(target instanceof IDBDatabase && !(prop in target) && typeof prop === "string")) {
    return;
  }
  if (cachedMethods.get(prop))
    return cachedMethods.get(prop);
  const targetFuncName = prop.replace(/FromIndex$/, "");
  const useIndex = prop !== targetFuncName;
  const isWrite = writeMethods.includes(targetFuncName);
  if (!(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) || !(isWrite || readMethods.includes(targetFuncName))) {
    return;
  }
  const method = async function(storeName, ...args) {
    const tx = this.transaction(storeName, isWrite ? "readwrite" : "readonly");
    let target2 = tx.store;
    if (useIndex)
      target2 = target2.index(args.shift());
    return (await Promise.all([
      target2[targetFuncName](...args),
      isWrite && tx.done
    ]))[0];
  };
  cachedMethods.set(prop, method);
  return method;
}
replaceTraps((oldTraps) => ({
  ...oldTraps,
  get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),
  has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop)
}));
var advanceMethodProps = ["continue", "continuePrimaryKey", "advance"];
var methodMap = {};
var advanceResults = new WeakMap();
var ittrProxiedCursorToOriginalProxy = new WeakMap();
var cursorIteratorTraps = {
  get(target, prop) {
    if (!advanceMethodProps.includes(prop))
      return target[prop];
    let cachedFunc = methodMap[prop];
    if (!cachedFunc) {
      cachedFunc = methodMap[prop] = function(...args) {
        advanceResults.set(this, ittrProxiedCursorToOriginalProxy.get(this)[prop](...args));
      };
    }
    return cachedFunc;
  }
};
async function* iterate(...args) {
  let cursor = this;
  if (!(cursor instanceof IDBCursor)) {
    cursor = await cursor.openCursor(...args);
  }
  if (!cursor)
    return;
  cursor = cursor;
  const proxiedCursor = new Proxy(cursor, cursorIteratorTraps);
  ittrProxiedCursorToOriginalProxy.set(proxiedCursor, cursor);
  reverseTransformCache.set(proxiedCursor, unwrap(cursor));
  while (cursor) {
    yield proxiedCursor;
    cursor = await (advanceResults.get(proxiedCursor) || cursor.continue());
    advanceResults.delete(proxiedCursor);
  }
}
function isIteratorProp(target, prop) {
  return prop === Symbol.asyncIterator && instanceOfAny(target, [IDBIndex, IDBObjectStore, IDBCursor]) || prop === "iterate" && instanceOfAny(target, [IDBIndex, IDBObjectStore]);
}
replaceTraps((oldTraps) => ({
  ...oldTraps,
  get(target, prop, receiver) {
    if (isIteratorProp(target, prop))
      return iterate;
    return oldTraps.get(target, prop, receiver);
  },
  has(target, prop) {
    return isIteratorProp(target, prop) || oldTraps.has(target, prop);
  }
}));

// src/db.ts
var DatabaseManager = class {
  async init() {
    this.db = await openDB("ai-plugin-db", 1, {
      upgrade(db) {
        const embeddingsStore = db.createObjectStore("embeddings", { keyPath: "id" });
        embeddingsStore.createIndex("by-file", "file");
        embeddingsStore.createIndex("by-chunk", ["file", "chunk"]);
      }
    });
  }
  async storeEmbeddings(embeddings) {
    const tx = this.db.transaction("embeddings", "readwrite");
    for (const embedding of embeddings) {
      await tx.store.put(embedding);
    }
    await tx.done;
  }
  async getEmbeddingsForFile(file) {
    return this.db.getAllFromIndex("embeddings", "by-file", file);
  }
  async getEmbeddingForChunk(file, chunk) {
    return this.db.getFromIndex("embeddings", "by-chunk", [file, chunk]);
  }
  async getAllEmbeddings() {
    return this.db.getAll("embeddings");
  }
  async deleteEmbeddingsForFile(file) {
    const tx = this.db.transaction("embeddings", "readwrite");
    const index = tx.store.index("by-file");
    let cursor = await index.openCursor(file);
    while (cursor) {
      await cursor.delete();
      cursor = await cursor.continue();
    }
    await tx.done;
  }
};

// src/atomizer.ts
var Atomizer = class {
  constructor(vault, modelManager) {
    this.vault = vault;
    this.modelManager = modelManager;
  }
  async atomizeNote(file) {
    const content = await this.vault.read(file);
    const concepts = await this.identifyKeyConcepts(content);
    const atomicNotes = [];
    for (const concept of concepts) {
      const atomicNote = await this.generateAtomicNote(concept, content);
      atomicNotes.push(atomicNote);
    }
    return atomicNotes;
  }
  async identifyKeyConcepts(content) {
    const prompt = `Identify key concepts in the following text. Return the concepts as a JSON array of strings:

${content}`;
    const response = await this.modelManager.generateText(prompt);
    return JSON.parse(response);
  }
  async generateAtomicNote(concept, sourceContent) {
    const prompt = `Generate an atomic note about "${concept}" based on the following source content. Return the result as a JSON object with "title" and "content" fields. The content should include a reference back to the original note:

${sourceContent}`;
    const response = await this.modelManager.generateText(prompt);
    return JSON.parse(response);
  }
};

// src/titleSuggester.ts
var TitleSuggester = class {
  constructor(app, modelManager, vaultQuerier) {
    this.app = app;
    this.modelManager = modelManager;
    this.vaultQuerier = vaultQuerier;
  }
  async suggestTitle(file) {
    const content = await this.app.vault.read(file);
    const similarNotes = await this.findSimilarNotes(file);
    const prompt = `Suggest a title for the following note content. Consider these similar note titles for context: ${similarNotes.join(", ")}. Return only the suggested title as plain text:

${content}`;
    return this.modelManager.generateText(prompt);
  }
  async findSimilarNotes(file) {
    const content = await this.app.vault.read(file);
    const similarNotes = await this.vaultQuerier.queryVault(content, 5);
    return similarNotes.map((result) => result.file.basename);
  }
};

// src/vaultQuerier.ts
var VaultQuerier = class {
  constructor(vault, embeddingManager, databaseManager) {
    this.vault = vault;
    this.embeddingManager = embeddingManager;
    this.databaseManager = databaseManager;
  }
  async queryVault(query, topK = 5) {
    const queryEmbedding = await this.embeddingManager.generateEmbedding(query);
    const allEmbeddings = await this.databaseManager.getAllEmbeddings();
    const results = allEmbeddings.map((embedding) => ({
      file: this.vault.getAbstractFileByPath(embedding.file),
      similarity: this.cosineSimilarity(queryEmbedding, embedding.vector)
    }));
    results.sort((a, b) => b.similarity - a.similarity);
    return results.slice(0, topK);
  }
  cosineSimilarity(vec1, vec2) {
    const dotProduct = vec1.reduce((sum, val, i) => sum + val * vec2[i], 0);
    const mag1 = Math.sqrt(vec1.reduce((sum, val) => sum + val * val, 0));
    const mag2 = Math.sqrt(vec2.reduce((sum, val) => sum + val * val, 0));
    return dotProduct / (mag1 * mag2);
  }
};

// src/nlpManager.ts
var NLPManager = class {
  constructor(modelManager) {
    this.modelManager = modelManager;
  }
  async performTask(task, text) {
    const prompt = `Perform the following NLP task: ${task}

Text: ${text}

Result:`;
    return this.modelManager.generateText(prompt);
  }
};

// src/modelManager.ts
var import_axios = __toModule(require_axios2());
var ModelProvider;
(function(ModelProvider2) {
  ModelProvider2["Ollama"] = "ollama";
  ModelProvider2["OpenAI"] = "openai";
})(ModelProvider || (ModelProvider = {}));
var ModelManager = class {
  constructor(provider, model, endpoint) {
    this.provider = provider;
    this.model = model;
    this.endpoint = endpoint;
  }
  setProvider(provider) {
    this.provider = provider;
  }
  setModel(model) {
    this.model = model;
  }
  setEndpoint(endpoint) {
    this.endpoint = endpoint;
  }
  getAvailableModels() {
    switch (this.provider) {
      case ModelProvider.Ollama:
        return ["llama2", "gpt4all", "bloom"];
      case ModelProvider.OpenAI:
        return ["gpt-3.5-turbo", "gpt-4"];
      default:
        return [];
    }
  }
  async generateEmbedding(text) {
    switch (this.provider) {
      case ModelProvider.Ollama:
        return this.generateOllamaEmbedding(text);
      case ModelProvider.OpenAI:
        return this.generateOpenAIEmbedding(text);
      default:
        throw new Error("Unsupported model provider");
    }
  }
  async generateText(prompt) {
    switch (this.provider) {
      case ModelProvider.Ollama:
        return this.generateOllamaText(prompt);
      case ModelProvider.OpenAI:
        return this.generateOpenAIText(prompt);
      default:
        throw new Error("Unsupported model provider");
    }
  }
  async generateOllamaEmbedding(text) {
    try {
      const response = await import_axios.default.post(`${this.endpoint}/api/embeddings`, {
        model: this.model,
        prompt: text
      });
      return response.data.embedding;
    } catch (error) {
      console.error("Failed to generate Ollama embedding:", error);
      throw error;
    }
  }
  async generateOpenAIEmbedding(text) {
    try {
      const response = await import_axios.default.post("https://api.openai.com/v1/embeddings", {
        model: "text-embedding-ada-002",
        input: text
      }, {
        headers: {
          "Authorization": `Bearer ${this.endpoint}`,
          "Content-Type": "application/json"
        }
      });
      return response.data.data[0].embedding;
    } catch (error) {
      console.error("Failed to generate OpenAI embedding:", error);
      throw error;
    }
  }
  async generateOllamaText(prompt) {
    try {
      const response = await import_axios.default.post(`${this.endpoint}/api/generate`, {
        model: this.model,
        prompt
      });
      return response.data.response.trim();
    } catch (error) {
      console.error("Failed to generate Ollama text:", error);
      throw error;
    }
  }
  async generateOpenAIText(prompt) {
    try {
      const response = await import_axios.default.post("https://api.openai.com/v1/chat/completions", {
        model: this.model,
        messages: [{ role: "user", content: prompt }]
      }, {
        headers: {
          "Authorization": `Bearer ${this.endpoint}`,
          "Content-Type": "application/json"
        }
      });
      return response.data.choices[0].message.content.trim();
    } catch (error) {
      console.error("Failed to generate OpenAI text:", error);
      throw error;
    }
  }
};

// src/textCleaner.ts
var TextCleaner = class {
  constructor(modelManager) {
    this.modelManager = modelManager;
  }
  async cleanText(text) {
    const prompt = `Please clean and improve the following text. Fix any grammatical errors, improve clarity and conciseness, and ensure proper formatting. Return only the cleaned text without any additional comments:

${text}`;
    try {
      const cleanedText = await this.modelManager.generateText(prompt);
      return cleanedText;
    } catch (error) {
      console.error("Error cleaning text:", error);
      throw new Error("Failed to clean text");
    }
  }
};

// src/tagSuggester.ts
var TagSuggester = class {
  constructor(modelManager) {
    this.modelManager = modelManager;
  }
  async suggestTags(file, content) {
    const prompt = `Suggest relevant tags for the following note content. Return the tags as a JSON array of strings, without any symbols:

${content}`;
    try {
      const response = await this.modelManager.generateText(prompt);
      const suggestedTags = JSON.parse(response);
      return Array.isArray(suggestedTags) ? suggestedTags : [];
    } catch (error) {
      console.error("Error suggesting tags:", error);
      throw new Error("Failed to suggest tags");
    }
  }
};

// src/notePathManager.ts
var NotePathManager = class {
  constructor(vault, rules) {
    this.vault = vault;
    this.rules = rules;
  }
  async getSuggestedPath(file) {
    const content = await this.vault.read(file);
    for (const rule of this.rules) {
      if (this.matchesCriteria(content, rule.criteria)) {
        return rule.targetPath;
      }
    }
    return null;
  }
  async checkAndMoveNote(file) {
    const suggestedPath = await this.getSuggestedPath(file);
    if (suggestedPath && file.path !== suggestedPath) {
      await this.moveNote(file, suggestedPath);
    }
  }
  async moveNote(file, newPath) {
    try {
      await this.vault.rename(file, newPath);
    } catch (error) {
      console.error("Failed to move note:", error);
      throw new Error("Failed to move note");
    }
  }
  matchesCriteria(content, criteria) {
    return content.includes(criteria);
  }
};

// src/aiChat.ts
var import_obsidian = __toModule(require("obsidian"));
var AIChat = class {
  constructor(app, modelManager) {
    this.app = app;
    this.modelManager = modelManager;
  }
  openChatWindow() {
    const modal = new AIChatModal(this.app, this.modelManager);
    modal.open();
  }
};
var AIChatModal = class extends import_obsidian.Modal {
  constructor(app, modelManager) {
    super(app);
    this.messages = [];
    this.modelManager = modelManager;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("ai-plugin-modal");
    contentEl.createEl("h2", { text: "AI Chat" });
    this.chatEl = contentEl.createDiv("ai-plugin-chat");
    this.inputEl = contentEl.createEl("textarea", { cls: "ai-plugin-input" });
    new import_obsidian.Setting(contentEl).addButton((button) => button.setButtonText("Send").addClass("ai-plugin-button").onClick(() => this.sendMessage()));
  }
  async sendMessage() {
    const userMessage = this.inputEl.value.trim();
    if (!userMessage)
      return;
    this.addMessageToChat("user", userMessage);
    this.inputEl.value = "";
    this.messages.push({ role: "user", content: userMessage });
    try {
      const response = await this.modelManager.generateText(this.formatPrompt());
      this.addMessageToChat("assistant", response);
      this.messages.push({ role: "assistant", content: response });
    } catch (error) {
      console.error("Error generating response:", error);
      this.addMessageToChat("assistant", "Sorry, I encountered an error while processing your request.");
    }
  }
  addMessageToChat(role, content) {
    const messageEl = this.chatEl.createDiv("ai-plugin-chat-message");
    messageEl.addClass(role);
    const roleEl = messageEl.createDiv("chat-role");
    roleEl.textContent = role === "user" ? "You:" : "AI:";
    const contentEl = messageEl.createDiv("chat-content");
    contentEl.textContent = content;
    this.chatEl.scrollTop = this.chatEl.scrollHeight;
  }
  formatPrompt() {
    return this.messages.map((msg) => `${msg.role}: ${msg.content}`).join("\n");
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// main.ts
var DEFAULT_SETTINGS = {
  ollamaEndpoint: "http://localhost:11434",
  cacheExpiration: 24 * 60 * 60 * 1e3,
  selectedModel: "llama2",
  selectedProvider: ModelProvider.Ollama,
  notePathRules: []
};
var AIPlugin = class extends import_obsidian2.Plugin {
  async onload() {
    await this.loadSettings();
    this.modelManager = new ModelManager(this.settings.selectedProvider, this.settings.selectedModel, this.settings.ollamaEndpoint);
    this.databaseManager = new DatabaseManager();
    await this.databaseManager.init();
    this.embeddingManager = new EmbeddingManager(this.app.vault, this.modelManager, this.databaseManager, this.settings.cacheExpiration);
    this.atomizer = new Atomizer(this.app.vault, this.modelManager);
    this.vaultQuerier = new VaultQuerier(this.app.vault, this.embeddingManager, this.databaseManager);
    this.titleSuggester = new TitleSuggester(this.app, this.modelManager, this.vaultQuerier);
    this.nlpManager = new NLPManager(this.modelManager);
    this.textCleaner = new TextCleaner(this.modelManager);
    this.tagSuggester = new TagSuggester(this.modelManager);
    this.notePathManager = new NotePathManager(this.app.vault, this.settings.notePathRules);
    this.aiChat = new AIChat(this.app, this.modelManager);
    this.addSettingTab(new AIPluginSettingTab(this.app, this));
    this.addRibbonIcon("message-square", "AI Chat", () => {
      this.aiChat.openChatWindow();
    });
    this.addCommand({
      id: "suggest-and-move-note",
      name: "Suggest and Move Note",
      callback: () => this.suggestAndMoveNote()
    });
    this.addCommand({
      id: "atomize-note",
      name: "Atomize Current Note",
      callback: () => this.atomizeCurrentNote()
    });
    this.addCommand({
      id: "suggest-title",
      name: "Suggest Title for Current Note",
      callback: () => this.suggestTitleForCurrentNote()
    });
    this.addCommand({
      id: "clean-text",
      name: "Clean Text of Current Note",
      callback: () => this.cleanTextOfCurrentNote()
    });
    this.addCommand({
      id: "suggest-tags",
      name: "Suggest Tags for Current Note",
      callback: () => this.suggestTagsForCurrentNote()
    });
    this.addCommand({
      id: "open-ai-chat",
      name: "Open AI Chat",
      callback: () => this.aiChat.openChatWindow()
    });
    this.registerEvent(this.app.vault.on("modify", (file) => {
      this.updateEmbeddingsForFile(file);
      this.notePathManager.checkAndMoveNote(file);
    }));
  }
  async suggestAndMoveNote() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      new import_obsidian2.Notice("No active file");
      return;
    }
    const suggestedPath = await this.notePathManager.getSuggestedPath(activeFile);
    if (suggestedPath) {
      const modal = new SuggestMoveNoteModal(this.app, activeFile, suggestedPath, async () => {
        await this.notePathManager.moveNote(activeFile, suggestedPath);
        new import_obsidian2.Notice(`Moved note to ${suggestedPath}`);
      });
      modal.open();
    } else {
      new import_obsidian2.Notice("No suggested path for this note");
    }
  }
  async atomizeCurrentNote() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      new import_obsidian2.Notice("No active file");
      return;
    }
    try {
      const atomicNotes = await this.atomizer.atomizeNote(activeFile);
      for (const note of atomicNotes) {
        await this.app.vault.create(`${note.title}.md`, note.content);
      }
      new import_obsidian2.Notice(`Created ${atomicNotes.length} atomic notes`);
    } catch (error) {
      console.error("Error atomizing note:", error);
      new import_obsidian2.Notice("Failed to atomize note");
    }
  }
  async suggestTitleForCurrentNote() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      new import_obsidian2.Notice("No active file");
      return;
    }
    try {
      const suggestedTitle = await this.titleSuggester.suggestTitle(activeFile);
      const modal = new SuggestTitleModal(this.app, activeFile, suggestedTitle, async (newTitle) => {
        await this.app.fileManager.renameFile(activeFile, `${newTitle}.md`);
        new import_obsidian2.Notice(`Renamed note to "${newTitle}"`);
      });
      modal.open();
    } catch (error) {
      console.error("Error suggesting title:", error);
      new import_obsidian2.Notice("Failed to suggest title");
    }
  }
  async cleanTextOfCurrentNote() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      new import_obsidian2.Notice("No active file");
      return;
    }
    try {
      const content = await this.app.vault.read(activeFile);
      const cleanedText = await this.textCleaner.cleanText(content);
      await this.app.vault.modify(activeFile, cleanedText);
      new import_obsidian2.Notice("Text cleaned successfully");
    } catch (error) {
      console.error("Error cleaning text:", error);
      new import_obsidian2.Notice("Failed to clean text");
    }
  }
  async suggestTagsForCurrentNote() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      new import_obsidian2.Notice("No active file");
      return;
    }
    try {
      const content = await this.app.vault.read(activeFile);
      const suggestedTags = await this.tagSuggester.suggestTags(activeFile, content);
      const modal = new SuggestTagsModal(this.app, activeFile, suggestedTags, async (selectedTags) => {
        await this.addTagsToNote(activeFile, selectedTags);
        new import_obsidian2.Notice(`Added ${selectedTags.length} tags to the note`);
      });
      modal.open();
    } catch (error) {
      console.error("Error suggesting tags:", error);
      new import_obsidian2.Notice("Failed to suggest tags");
    }
  }
  async addTagsToNote(file, tags) {
    var _a;
    const content = await this.app.vault.read(file);
    const frontmatter = (_a = this.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    let newContent = content;
    if (frontmatter) {
      const existingTags = frontmatter.tags || [];
      const updatedTags = [...new Set([...existingTags, ...tags])];
      const updatedFrontmatter = { ...frontmatter, tags: updatedTags };
      newContent = content.replace(/^---\n[\s\S]*?\n---\n/, `---
${JSON.stringify(updatedFrontmatter, null, 2)}
---
`);
    } else {
      const newFrontmatter = { tags };
      newContent = `---
${JSON.stringify(newFrontmatter, null, 2)}
---
${content}`;
    }
    await this.app.vault.modify(file, newContent);
  }
  async updateEmbeddingsForFile(file) {
    try {
      await this.embeddingManager.generateEmbeddingsForFile(file);
    } catch (error) {
      console.error("Error updating embeddings:", error);
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var AIPluginSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.addClass("ai-plugin-settings");
    containerEl.createEl("h2", { text: "AI Plugin Settings" });
    new import_obsidian2.Setting(containerEl).setName("Ollama Endpoint").setDesc("The URL of your Ollama server").addText((text) => text.setPlaceholder("http://localhost:11434").setValue(this.plugin.settings.ollamaEndpoint).onChange(async (value) => {
      this.plugin.settings.ollamaEndpoint = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("Cache Expiration").setDesc("Time in milliseconds before embeddings are regenerated").addText((text) => text.setPlaceholder("86400000").setValue(String(this.plugin.settings.cacheExpiration)).onChange(async (value) => {
      const numValue = Number(value);
      if (!isNaN(numValue)) {
        this.plugin.settings.cacheExpiration = numValue;
        await this.plugin.saveSettings();
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("Model Provider").setDesc("Select the AI model provider").addDropdown((dropdown) => dropdown.addOption(ModelProvider.Ollama, "Ollama").addOption(ModelProvider.OpenAI, "OpenAI").setValue(this.plugin.settings.selectedProvider).onChange(async (value) => {
      this.plugin.settings.selectedProvider = value;
      await this.plugin.saveSettings();
      this.display();
    }));
    new import_obsidian2.Setting(containerEl).setName("Selected Model").setDesc("Choose the AI model to use").addDropdown((dropdown) => {
      const models = this.plugin.modelManager.getAvailableModels();
      models.forEach((model) => dropdown.addOption(model, model));
      dropdown.setValue(this.plugin.settings.selectedModel).onChange(async (value) => {
        this.plugin.settings.selectedModel = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian2.Setting(containerEl).setName("Note Path Rules").setDesc("Configure rules for automatically moving notes based on criteria").addButton((button) => button.setButtonText("Add Rule").onClick(() => {
      this.plugin.settings.notePathRules.push({ criteria: "", targetPath: "" });
      this.plugin.saveSettings();
      this.display();
    }));
    this.plugin.settings.notePathRules.forEach((rule, index) => {
      const ruleContainer = containerEl.createDiv();
      new import_obsidian2.Setting(ruleContainer).setName(`Rule ${index + 1}`).addText((text) => text.setPlaceholder("Criteria (e.g., #project)").setValue(rule.criteria).onChange(async (value) => {
        this.plugin.settings.notePathRules[index].criteria = value;
        await this.plugin.saveSettings();
      })).addText((text) => text.setPlaceholder("Target Path").setValue(rule.targetPath).onChange(async (value) => {
        this.plugin.settings.notePathRules[index].targetPath = value;
        await this.plugin.saveSettings();
      })).addButton((button) => button.setButtonText("Remove").onClick(async () => {
        this.plugin.settings.notePathRules.splice(index, 1);
        await this.plugin.saveSettings();
        this.display();
      }));
    });
  }
};
var SuggestMoveNoteModal = class extends import_obsidian2.Modal {
  constructor(app, file, suggestedPath, onMove) {
    super(app);
    this.file = file;
    this.suggestedPath = suggestedPath;
    this.onMove = onMove;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.addClass("ai-plugin-modal");
    contentEl.setText(`Move "${this.file.name}" to "${this.suggestedPath}"?`);
    new import_obsidian2.Setting(contentEl).addButton((button) => button.setButtonText("Move").addClass("ai-plugin-button").onClick(() => {
      this.onMove();
      this.close();
    })).addButton((button) => button.setButtonText("Cancel").addClass("ai-plugin-button").onClick(() => this.close()));
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var SuggestTitleModal = class extends import_obsidian2.Modal {
  constructor(app, file, suggestedTitle, onRename) {
    super(app);
    this.file = file;
    this.suggestedTitle = suggestedTitle;
    this.onRename = onRename;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.addClass("ai-plugin-modal");
    contentEl.createEl("h2", { text: "Suggest Title" });
    const titleInput = new import_obsidian2.TextComponent(contentEl).setValue(this.suggestedTitle).setPlaceholder("Enter title");
    new import_obsidian2.Setting(contentEl).addButton((button) => button.setButtonText("Rename").addClass("ai-plugin-button").onClick(() => {
      this.onRename(titleInput.getValue());
      this.close();
    })).addButton((button) => button.setButtonText("Cancel").addClass("ai-plugin-button").onClick(() => this.close()));
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var SuggestTagsModal = class extends import_obsidian2.Modal {
  constructor(app, file, suggestedTags, onApply) {
    super(app);
    this.file = file;
    this.suggestedTags = suggestedTags;
    this.onApply = onApply;
    this.selectedTags = [];
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.addClass("ai-plugin-modal");
    contentEl.createEl("h2", { text: "Suggest Tags" });
    this.suggestedTags.forEach((tag) => {
      new import_obsidian2.Setting(contentEl).setName(tag).addToggle((toggle) => toggle.onChange((value) => {
        if (value) {
          this.selectedTags.push(tag);
        } else {
          this.selectedTags = this.selectedTags.filter((t) => t !== tag);
        }
      }));
    });
    new import_obsidian2.Setting(contentEl).addButton((button) => button.setButtonText("Apply Tags").addClass("ai-plugin-button").onClick(() => {
      this.onApply(this.selectedTags);
      this.close();
    })).addButton((button) => button.setButtonText("Cancel").addClass("ai-plugin-button").onClick(() => this.close()));
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2JpbmQuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi91dGlscy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvYnVpbGRVUkwuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL0ludGVyY2VwdG9yTWFuYWdlci5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvbm9ybWFsaXplSGVhZGVyTmFtZS5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvZW5oYW5jZUVycm9yLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9jcmVhdGVFcnJvci5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvc2V0dGxlLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9jb29raWVzLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9pc0Fic29sdXRlVVJMLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9jb21iaW5lVVJMcy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvYnVpbGRGdWxsUGF0aC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvcGFyc2VIZWFkZXJzLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9pc1VSTFNhbWVPcmlnaW4uanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvYWRhcHRlcnMveGhyLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvZGVmYXVsdHMuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL3RyYW5zZm9ybURhdGEuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvaXNDYW5jZWwuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL2Rpc3BhdGNoUmVxdWVzdC5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvbWVyZ2VDb25maWcuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9lbnYvZGF0YS5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvdmFsaWRhdG9yLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9BeGlvcy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9DYW5jZWxUb2tlbi5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvc3ByZWFkLmpzIiwgIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9pc0F4aW9zRXJyb3IuanMiLCAibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9heGlvcy5qcyIsICJub2RlX21vZHVsZXMvYXhpb3MvaW5kZXguanMiLCAibWFpbi50cyIsICJzcmMvZW1iZWRkaW5ncy50cyIsICJub2RlX21vZHVsZXMvaWRiL2J1aWxkL2luZGV4LmpzIiwgInNyYy9kYi50cyIsICJzcmMvYXRvbWl6ZXIudHMiLCAic3JjL3RpdGxlU3VnZ2VzdGVyLnRzIiwgInNyYy92YXVsdFF1ZXJpZXIudHMiLCAic3JjL25scE1hbmFnZXIudHMiLCAic3JjL21vZGVsTWFuYWdlci50cyIsICJzcmMvdGV4dENsZWFuZXIudHMiLCAic3JjL3RhZ1N1Z2dlc3Rlci50cyIsICJzcmMvbm90ZVBhdGhNYW5hZ2VyLnRzIiwgInNyYy9haUNoYXQudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBiaW5kKGZuLCB0aGlzQXJnKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwKCkge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICB9O1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciBiaW5kID0gcmVxdWlyZSgnLi9oZWxwZXJzL2JpbmQnKTtcblxuLy8gdXRpbHMgaXMgYSBsaWJyYXJ5IG9mIGdlbmVyaWMgaGVscGVyIGZ1bmN0aW9ucyBub24tc3BlY2lmaWMgdG8gYXhpb3NcblxudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheSh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyB1bmRlZmluZWRcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgdW5kZWZpbmVkLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNCdWZmZXIodmFsKSB7XG4gIHJldHVybiB2YWwgIT09IG51bGwgJiYgIWlzVW5kZWZpbmVkKHZhbCkgJiYgdmFsLmNvbnN0cnVjdG9yICE9PSBudWxsICYmICFpc1VuZGVmaW5lZCh2YWwuY29uc3RydWN0b3IpXG4gICAgJiYgdHlwZW9mIHZhbC5jb25zdHJ1Y3Rvci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJiB2YWwuY29uc3RydWN0b3IuaXNCdWZmZXIodmFsKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUJ1ZmZlcih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZvcm1EYXRhXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gRm9ybURhdGEsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Zvcm1EYXRhKHZhbCkge1xuICByZXR1cm4gKHR5cGVvZiBGb3JtRGF0YSAhPT0gJ3VuZGVmaW5lZCcpICYmICh2YWwgaW5zdGFuY2VvZiBGb3JtRGF0YSk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUJ1ZmZlclZpZXcodmFsKSB7XG4gIHZhciByZXN1bHQ7XG4gIGlmICgodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJykgJiYgKEFycmF5QnVmZmVyLmlzVmlldykpIHtcbiAgICByZXN1bHQgPSBBcnJheUJ1ZmZlci5pc1ZpZXcodmFsKTtcbiAgfSBlbHNlIHtcbiAgICByZXN1bHQgPSAodmFsKSAmJiAodmFsLmJ1ZmZlcikgJiYgKHZhbC5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcik7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmluZ1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgU3RyaW5nLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTdHJpbmcodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIE51bWJlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgTnVtYmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNOdW1iZXIodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAnbnVtYmVyJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBPYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBPYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWwpIHtcbiAgcmV0dXJuIHZhbCAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIHBsYWluIE9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBwbGFpbiBPYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbCkge1xuICBpZiAodG9TdHJpbmcuY2FsbCh2YWwpICE9PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBwcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsKTtcbiAgcmV0dXJuIHByb3RvdHlwZSA9PT0gbnVsbCB8fCBwcm90b3R5cGUgPT09IE9iamVjdC5wcm90b3R5cGU7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBEYXRlXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBEYXRlLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNEYXRlKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBEYXRlXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGaWxlXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGaWxlLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGaWxlKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBGaWxlXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBCbG9iXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBCbG9iLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNCbG9iKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBCbG9iXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGdW5jdGlvblxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRnVuY3Rpb24sIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyZWFtXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJlYW0sIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N0cmVhbSh2YWwpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KHZhbCkgJiYgaXNGdW5jdGlvbih2YWwucGlwZSk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBVUkxTZWFyY2hQYXJhbXMgb2JqZWN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBVUkxTZWFyY2hQYXJhbXMgb2JqZWN0LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNVUkxTZWFyY2hQYXJhbXModmFsKSB7XG4gIHJldHVybiB0eXBlb2YgVVJMU2VhcmNoUGFyYW1zICE9PSAndW5kZWZpbmVkJyAmJiB2YWwgaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXM7XG59XG5cbi8qKlxuICogVHJpbSBleGNlc3Mgd2hpdGVzcGFjZSBvZmYgdGhlIGJlZ2lubmluZyBhbmQgZW5kIG9mIGEgc3RyaW5nXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgU3RyaW5nIHRvIHRyaW1cbiAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBTdHJpbmcgZnJlZWQgb2YgZXhjZXNzIHdoaXRlc3BhY2VcbiAqL1xuZnVuY3Rpb24gdHJpbShzdHIpIHtcbiAgcmV0dXJuIHN0ci50cmltID8gc3RyLnRyaW0oKSA6IHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50XG4gKlxuICogVGhpcyBhbGxvd3MgYXhpb3MgdG8gcnVuIGluIGEgd2ViIHdvcmtlciwgYW5kIHJlYWN0LW5hdGl2ZS5cbiAqIEJvdGggZW52aXJvbm1lbnRzIHN1cHBvcnQgWE1MSHR0cFJlcXVlc3QsIGJ1dCBub3QgZnVsbHkgc3RhbmRhcmQgZ2xvYmFscy5cbiAqXG4gKiB3ZWIgd29ya2VyczpcbiAqICB0eXBlb2Ygd2luZG93IC0+IHVuZGVmaW5lZFxuICogIHR5cGVvZiBkb2N1bWVudCAtPiB1bmRlZmluZWRcbiAqXG4gKiByZWFjdC1uYXRpdmU6XG4gKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ1JlYWN0TmF0aXZlJ1xuICogbmF0aXZlc2NyaXB0XG4gKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ05hdGl2ZVNjcmlwdCcgb3IgJ05TJ1xuICovXG5mdW5jdGlvbiBpc1N0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIChuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ1JlYWN0TmF0aXZlJyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnTmF0aXZlU2NyaXB0JyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnTlMnKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gKFxuICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJ1xuICApO1xufVxuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBhbiBBcnJheSBvciBhbiBPYmplY3QgaW52b2tpbmcgYSBmdW5jdGlvbiBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmIGBvYmpgIGlzIGFuIEFycmF5IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3NpbmdcbiAqIHRoZSB2YWx1ZSwgaW5kZXgsIGFuZCBjb21wbGV0ZSBhcnJheSBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmICdvYmonIGlzIGFuIE9iamVjdCBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nXG4gKiB0aGUgdmFsdWUsIGtleSwgYW5kIGNvbXBsZXRlIG9iamVjdCBmb3IgZWFjaCBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gb2JqIFRoZSBvYmplY3QgdG8gaXRlcmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGNhbGxiYWNrIHRvIGludm9rZSBmb3IgZWFjaCBpdGVtXG4gKi9cbmZ1bmN0aW9uIGZvckVhY2gob2JqLCBmbikge1xuICAvLyBEb24ndCBib3RoZXIgaWYgbm8gdmFsdWUgcHJvdmlkZWRcbiAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEZvcmNlIGFuIGFycmF5IGlmIG5vdCBhbHJlYWR5IHNvbWV0aGluZyBpdGVyYWJsZVxuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICBvYmogPSBbb2JqXTtcbiAgfVxuXG4gIGlmIChpc0FycmF5KG9iaikpIHtcbiAgICAvLyBJdGVyYXRlIG92ZXIgYXJyYXkgdmFsdWVzXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvYmoubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmbi5jYWxsKG51bGwsIG9ialtpXSwgaSwgb2JqKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gSXRlcmF0ZSBvdmVyIG9iamVjdCBrZXlzXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgZm4uY2FsbChudWxsLCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEFjY2VwdHMgdmFyYXJncyBleHBlY3RpbmcgZWFjaCBhcmd1bWVudCB0byBiZSBhbiBvYmplY3QsIHRoZW5cbiAqIGltbXV0YWJseSBtZXJnZXMgdGhlIHByb3BlcnRpZXMgb2YgZWFjaCBvYmplY3QgYW5kIHJldHVybnMgcmVzdWx0LlxuICpcbiAqIFdoZW4gbXVsdGlwbGUgb2JqZWN0cyBjb250YWluIHRoZSBzYW1lIGtleSB0aGUgbGF0ZXIgb2JqZWN0IGluXG4gKiB0aGUgYXJndW1lbnRzIGxpc3Qgd2lsbCB0YWtlIHByZWNlZGVuY2UuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBqc1xuICogdmFyIHJlc3VsdCA9IG1lcmdlKHtmb286IDEyM30sIHtmb286IDQ1Nn0pO1xuICogY29uc29sZS5sb2cocmVzdWx0LmZvbyk7IC8vIG91dHB1dHMgNDU2XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqMSBPYmplY3QgdG8gbWVyZ2VcbiAqIEByZXR1cm5zIHtPYmplY3R9IFJlc3VsdCBvZiBhbGwgbWVyZ2UgcHJvcGVydGllc1xuICovXG5mdW5jdGlvbiBtZXJnZSgvKiBvYmoxLCBvYmoyLCBvYmozLCAuLi4gKi8pIHtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkge1xuICAgIGlmIChpc1BsYWluT2JqZWN0KHJlc3VsdFtrZXldKSAmJiBpc1BsYWluT2JqZWN0KHZhbCkpIHtcbiAgICAgIHJlc3VsdFtrZXldID0gbWVyZ2UocmVzdWx0W2tleV0sIHZhbCk7XG4gICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbCkpIHtcbiAgICAgIHJlc3VsdFtrZXldID0gbWVyZ2Uoe30sIHZhbCk7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KHZhbCkpIHtcbiAgICAgIHJlc3VsdFtrZXldID0gdmFsLnNsaWNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdFtrZXldID0gdmFsO1xuICAgIH1cbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwLCBsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGZvckVhY2goYXJndW1lbnRzW2ldLCBhc3NpZ25WYWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBFeHRlbmRzIG9iamVjdCBhIGJ5IG11dGFibHkgYWRkaW5nIHRvIGl0IHRoZSBwcm9wZXJ0aWVzIG9mIG9iamVjdCBiLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhIFRoZSBvYmplY3QgdG8gYmUgZXh0ZW5kZWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBiIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIGZyb21cbiAqIEBwYXJhbSB7T2JqZWN0fSB0aGlzQXJnIFRoZSBvYmplY3QgdG8gYmluZCBmdW5jdGlvbiB0b1xuICogQHJldHVybiB7T2JqZWN0fSBUaGUgcmVzdWx0aW5nIHZhbHVlIG9mIG9iamVjdCBhXG4gKi9cbmZ1bmN0aW9uIGV4dGVuZChhLCBiLCB0aGlzQXJnKSB7XG4gIGZvckVhY2goYiwgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHtcbiAgICBpZiAodGhpc0FyZyAmJiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBhW2tleV0gPSBiaW5kKHZhbCwgdGhpc0FyZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFba2V5XSA9IHZhbDtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gYTtcbn1cblxuLyoqXG4gKiBSZW1vdmUgYnl0ZSBvcmRlciBtYXJrZXIuIFRoaXMgY2F0Y2hlcyBFRiBCQiBCRiAodGhlIFVURi04IEJPTSlcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29udGVudCB3aXRoIEJPTVxuICogQHJldHVybiB7c3RyaW5nfSBjb250ZW50IHZhbHVlIHdpdGhvdXQgQk9NXG4gKi9cbmZ1bmN0aW9uIHN0cmlwQk9NKGNvbnRlbnQpIHtcbiAgaWYgKGNvbnRlbnQuY2hhckNvZGVBdCgwKSA9PT0gMHhGRUZGKSB7XG4gICAgY29udGVudCA9IGNvbnRlbnQuc2xpY2UoMSk7XG4gIH1cbiAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpc0FycmF5OiBpc0FycmF5LFxuICBpc0FycmF5QnVmZmVyOiBpc0FycmF5QnVmZmVyLFxuICBpc0J1ZmZlcjogaXNCdWZmZXIsXG4gIGlzRm9ybURhdGE6IGlzRm9ybURhdGEsXG4gIGlzQXJyYXlCdWZmZXJWaWV3OiBpc0FycmF5QnVmZmVyVmlldyxcbiAgaXNTdHJpbmc6IGlzU3RyaW5nLFxuICBpc051bWJlcjogaXNOdW1iZXIsXG4gIGlzT2JqZWN0OiBpc09iamVjdCxcbiAgaXNQbGFpbk9iamVjdDogaXNQbGFpbk9iamVjdCxcbiAgaXNVbmRlZmluZWQ6IGlzVW5kZWZpbmVkLFxuICBpc0RhdGU6IGlzRGF0ZSxcbiAgaXNGaWxlOiBpc0ZpbGUsXG4gIGlzQmxvYjogaXNCbG9iLFxuICBpc0Z1bmN0aW9uOiBpc0Z1bmN0aW9uLFxuICBpc1N0cmVhbTogaXNTdHJlYW0sXG4gIGlzVVJMU2VhcmNoUGFyYW1zOiBpc1VSTFNlYXJjaFBhcmFtcyxcbiAgaXNTdGFuZGFyZEJyb3dzZXJFbnY6IGlzU3RhbmRhcmRCcm93c2VyRW52LFxuICBmb3JFYWNoOiBmb3JFYWNoLFxuICBtZXJnZTogbWVyZ2UsXG4gIGV4dGVuZDogZXh0ZW5kLFxuICB0cmltOiB0cmltLFxuICBzdHJpcEJPTTogc3RyaXBCT01cbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbmZ1bmN0aW9uIGVuY29kZSh2YWwpIHtcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWwpLlxuICAgIHJlcGxhY2UoLyUzQS9naSwgJzonKS5cbiAgICByZXBsYWNlKC8lMjQvZywgJyQnKS5cbiAgICByZXBsYWNlKC8lMkMvZ2ksICcsJykuXG4gICAgcmVwbGFjZSgvJTIwL2csICcrJykuXG4gICAgcmVwbGFjZSgvJTVCL2dpLCAnWycpLlxuICAgIHJlcGxhY2UoLyU1RC9naSwgJ10nKTtcbn1cblxuLyoqXG4gKiBCdWlsZCBhIFVSTCBieSBhcHBlbmRpbmcgcGFyYW1zIHRvIHRoZSBlbmRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBiYXNlIG9mIHRoZSB1cmwgKGUuZy4sIGh0dHA6Ly93d3cuZ29vZ2xlLmNvbSlcbiAqIEBwYXJhbSB7b2JqZWN0fSBbcGFyYW1zXSBUaGUgcGFyYW1zIHRvIGJlIGFwcGVuZGVkXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIHVybFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJ1aWxkVVJMKHVybCwgcGFyYW1zLCBwYXJhbXNTZXJpYWxpemVyKSB7XG4gIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICBpZiAoIXBhcmFtcykge1xuICAgIHJldHVybiB1cmw7XG4gIH1cblxuICB2YXIgc2VyaWFsaXplZFBhcmFtcztcbiAgaWYgKHBhcmFtc1NlcmlhbGl6ZXIpIHtcbiAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFyYW1zU2VyaWFsaXplcihwYXJhbXMpO1xuICB9IGVsc2UgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKHBhcmFtcykpIHtcbiAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFyYW1zLnRvU3RyaW5nKCk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHBhcnRzID0gW107XG5cbiAgICB1dGlscy5mb3JFYWNoKHBhcmFtcywgZnVuY3Rpb24gc2VyaWFsaXplKHZhbCwga2V5KSB7XG4gICAgICBpZiAodmFsID09PSBudWxsIHx8IHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHV0aWxzLmlzQXJyYXkodmFsKSkge1xuICAgICAgICBrZXkgPSBrZXkgKyAnW10nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsID0gW3ZhbF07XG4gICAgICB9XG5cbiAgICAgIHV0aWxzLmZvckVhY2godmFsLCBmdW5jdGlvbiBwYXJzZVZhbHVlKHYpIHtcbiAgICAgICAgaWYgKHV0aWxzLmlzRGF0ZSh2KSkge1xuICAgICAgICAgIHYgPSB2LnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodXRpbHMuaXNPYmplY3QodikpIHtcbiAgICAgICAgICB2ID0gSlNPTi5zdHJpbmdpZnkodik7XG4gICAgICAgIH1cbiAgICAgICAgcGFydHMucHVzaChlbmNvZGUoa2V5KSArICc9JyArIGVuY29kZSh2KSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJ0cy5qb2luKCcmJyk7XG4gIH1cblxuICBpZiAoc2VyaWFsaXplZFBhcmFtcykge1xuICAgIHZhciBoYXNobWFya0luZGV4ID0gdXJsLmluZGV4T2YoJyMnKTtcbiAgICBpZiAoaGFzaG1hcmtJbmRleCAhPT0gLTEpIHtcbiAgICAgIHVybCA9IHVybC5zbGljZSgwLCBoYXNobWFya0luZGV4KTtcbiAgICB9XG5cbiAgICB1cmwgKz0gKHVybC5pbmRleE9mKCc/JykgPT09IC0xID8gJz8nIDogJyYnKSArIHNlcmlhbGl6ZWRQYXJhbXM7XG4gIH1cblxuICByZXR1cm4gdXJsO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuZnVuY3Rpb24gSW50ZXJjZXB0b3JNYW5hZ2VyKCkge1xuICB0aGlzLmhhbmRsZXJzID0gW107XG59XG5cbi8qKlxuICogQWRkIGEgbmV3IGludGVyY2VwdG9yIHRvIHRoZSBzdGFja1xuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bGZpbGxlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGB0aGVuYCBmb3IgYSBgUHJvbWlzZWBcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHJlamVjdGAgZm9yIGEgYFByb21pc2VgXG4gKlxuICogQHJldHVybiB7TnVtYmVyfSBBbiBJRCB1c2VkIHRvIHJlbW92ZSBpbnRlcmNlcHRvciBsYXRlclxuICovXG5JbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIHVzZShmdWxmaWxsZWQsIHJlamVjdGVkLCBvcHRpb25zKSB7XG4gIHRoaXMuaGFuZGxlcnMucHVzaCh7XG4gICAgZnVsZmlsbGVkOiBmdWxmaWxsZWQsXG4gICAgcmVqZWN0ZWQ6IHJlamVjdGVkLFxuICAgIHN5bmNocm9ub3VzOiBvcHRpb25zID8gb3B0aW9ucy5zeW5jaHJvbm91cyA6IGZhbHNlLFxuICAgIHJ1bldoZW46IG9wdGlvbnMgPyBvcHRpb25zLnJ1bldoZW4gOiBudWxsXG4gIH0pO1xuICByZXR1cm4gdGhpcy5oYW5kbGVycy5sZW5ndGggLSAxO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYW4gaW50ZXJjZXB0b3IgZnJvbSB0aGUgc3RhY2tcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaWQgVGhlIElEIHRoYXQgd2FzIHJldHVybmVkIGJ5IGB1c2VgXG4gKi9cbkludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZWplY3QgPSBmdW5jdGlvbiBlamVjdChpZCkge1xuICBpZiAodGhpcy5oYW5kbGVyc1tpZF0pIHtcbiAgICB0aGlzLmhhbmRsZXJzW2lkXSA9IG51bGw7XG4gIH1cbn07XG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGFsbCB0aGUgcmVnaXN0ZXJlZCBpbnRlcmNlcHRvcnNcbiAqXG4gKiBUaGlzIG1ldGhvZCBpcyBwYXJ0aWN1bGFybHkgdXNlZnVsIGZvciBza2lwcGluZyBvdmVyIGFueVxuICogaW50ZXJjZXB0b3JzIHRoYXQgbWF5IGhhdmUgYmVjb21lIGBudWxsYCBjYWxsaW5nIGBlamVjdGAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggaW50ZXJjZXB0b3JcbiAqL1xuSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gZm9yRWFjaChmbikge1xuICB1dGlscy5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uIGZvckVhY2hIYW5kbGVyKGgpIHtcbiAgICBpZiAoaCAhPT0gbnVsbCkge1xuICAgICAgZm4oaCk7XG4gICAgfVxuICB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gSW50ZXJjZXB0b3JNYW5hZ2VyO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsIG5vcm1hbGl6ZWROYW1lKSB7XG4gIHV0aWxzLmZvckVhY2goaGVhZGVycywgZnVuY3Rpb24gcHJvY2Vzc0hlYWRlcih2YWx1ZSwgbmFtZSkge1xuICAgIGlmIChuYW1lICE9PSBub3JtYWxpemVkTmFtZSAmJiBuYW1lLnRvVXBwZXJDYXNlKCkgPT09IG5vcm1hbGl6ZWROYW1lLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgIGhlYWRlcnNbbm9ybWFsaXplZE5hbWVdID0gdmFsdWU7XG4gICAgICBkZWxldGUgaGVhZGVyc1tuYW1lXTtcbiAgICB9XG4gIH0pO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogVXBkYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBjb25maWcsIGVycm9yIGNvZGUsIGFuZCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnJvciBUaGUgZXJyb3IgdG8gdXBkYXRlLlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG4gKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBlcnJvci5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlbmhhbmNlRXJyb3IoZXJyb3IsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgZXJyb3IuY29uZmlnID0gY29uZmlnO1xuICBpZiAoY29kZSkge1xuICAgIGVycm9yLmNvZGUgPSBjb2RlO1xuICB9XG5cbiAgZXJyb3IucmVxdWVzdCA9IHJlcXVlc3Q7XG4gIGVycm9yLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gIGVycm9yLmlzQXhpb3NFcnJvciA9IHRydWU7XG5cbiAgZXJyb3IudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICAvLyBTdGFuZGFyZFxuICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLFxuICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgLy8gTWljcm9zb2Z0XG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbixcbiAgICAgIG51bWJlcjogdGhpcy5udW1iZXIsXG4gICAgICAvLyBNb3ppbGxhXG4gICAgICBmaWxlTmFtZTogdGhpcy5maWxlTmFtZSxcbiAgICAgIGxpbmVOdW1iZXI6IHRoaXMubGluZU51bWJlcixcbiAgICAgIGNvbHVtbk51bWJlcjogdGhpcy5jb2x1bW5OdW1iZXIsXG4gICAgICBzdGFjazogdGhpcy5zdGFjayxcbiAgICAgIC8vIEF4aW9zXG4gICAgICBjb25maWc6IHRoaXMuY29uZmlnLFxuICAgICAgY29kZTogdGhpcy5jb2RlLFxuICAgICAgc3RhdHVzOiB0aGlzLnJlc3BvbnNlICYmIHRoaXMucmVzcG9uc2Uuc3RhdHVzID8gdGhpcy5yZXNwb25zZS5zdGF0dXMgOiBudWxsXG4gICAgfTtcbiAgfTtcbiAgcmV0dXJuIGVycm9yO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciBlbmhhbmNlRXJyb3IgPSByZXF1aXJlKCcuL2VuaGFuY2VFcnJvcicpO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgbWVzc2FnZSwgY29uZmlnLCBlcnJvciBjb2RlLCByZXF1ZXN0IGFuZCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBUaGUgZXJyb3IgbWVzc2FnZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV0gVGhlIGVycm9yIGNvZGUgKGZvciBleGFtcGxlLCAnRUNPTk5BQk9SVEVEJykuXG4gKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLlxuICogQHJldHVybnMge0Vycm9yfSBUaGUgY3JlYXRlZCBlcnJvci5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGVFcnJvcihtZXNzYWdlLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gIHZhciBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgcmV0dXJuIGVuaGFuY2VFcnJvcihlcnJvciwgY29uZmlnLCBjb2RlLCByZXF1ZXN0LCByZXNwb25zZSk7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIGNyZWF0ZUVycm9yID0gcmVxdWlyZSgnLi9jcmVhdGVFcnJvcicpO1xuXG4vKipcbiAqIFJlc29sdmUgb3IgcmVqZWN0IGEgUHJvbWlzZSBiYXNlZCBvbiByZXNwb25zZSBzdGF0dXMuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzb2x2ZSBBIGZ1bmN0aW9uIHRoYXQgcmVzb2x2ZXMgdGhlIHByb21pc2UuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3QgQSBmdW5jdGlvbiB0aGF0IHJlamVjdHMgdGhlIHByb21pc2UuXG4gKiBAcGFyYW0ge29iamVjdH0gcmVzcG9uc2UgVGhlIHJlc3BvbnNlLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHJlc3BvbnNlKSB7XG4gIHZhciB2YWxpZGF0ZVN0YXR1cyA9IHJlc3BvbnNlLmNvbmZpZy52YWxpZGF0ZVN0YXR1cztcbiAgaWYgKCFyZXNwb25zZS5zdGF0dXMgfHwgIXZhbGlkYXRlU3RhdHVzIHx8IHZhbGlkYXRlU3RhdHVzKHJlc3BvbnNlLnN0YXR1cykpIHtcbiAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgfSBlbHNlIHtcbiAgICByZWplY3QoY3JlYXRlRXJyb3IoXG4gICAgICAnUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSAnICsgcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgcmVzcG9uc2UuY29uZmlnLFxuICAgICAgbnVsbCxcbiAgICAgIHJlc3BvbnNlLnJlcXVlc3QsXG4gICAgICByZXNwb25zZVxuICAgICkpO1xuICB9XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChcbiAgdXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSA/XG5cbiAgLy8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIHN1cHBvcnQgZG9jdW1lbnQuY29va2llXG4gICAgKGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZShuYW1lLCB2YWx1ZSwgZXhwaXJlcywgcGF0aCwgZG9tYWluLCBzZWN1cmUpIHtcbiAgICAgICAgICB2YXIgY29va2llID0gW107XG4gICAgICAgICAgY29va2llLnB1c2gobmFtZSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xuXG4gICAgICAgICAgaWYgKHV0aWxzLmlzTnVtYmVyKGV4cGlyZXMpKSB7XG4gICAgICAgICAgICBjb29raWUucHVzaCgnZXhwaXJlcz0nICsgbmV3IERhdGUoZXhwaXJlcykudG9HTVRTdHJpbmcoKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHV0aWxzLmlzU3RyaW5nKHBhdGgpKSB7XG4gICAgICAgICAgICBjb29raWUucHVzaCgncGF0aD0nICsgcGF0aCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHV0aWxzLmlzU3RyaW5nKGRvbWFpbikpIHtcbiAgICAgICAgICAgIGNvb2tpZS5wdXNoKCdkb21haW49JyArIGRvbWFpbik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlY3VyZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY29va2llLnB1c2goJ3NlY3VyZScpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZS5qb2luKCc7ICcpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQobmFtZSkge1xuICAgICAgICAgIHZhciBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaChuZXcgUmVnRXhwKCcoXnw7XFxcXHMqKSgnICsgbmFtZSArICcpPShbXjtdKiknKSk7XG4gICAgICAgICAgcmV0dXJuIChtYXRjaCA/IGRlY29kZVVSSUNvbXBvbmVudChtYXRjaFszXSkgOiBudWxsKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShuYW1lKSB7XG4gICAgICAgICAgdGhpcy53cml0ZShuYW1lLCAnJywgRGF0ZS5ub3coKSAtIDg2NDAwMDAwKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KSgpIDpcblxuICAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnYgKHdlYiB3b3JrZXJzLCByZWFjdC1uYXRpdmUpIGxhY2sgbmVlZGVkIHN1cHBvcnQuXG4gICAgKGZ1bmN0aW9uIG5vblN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZSgpIHt9LFxuICAgICAgICByZWFkOiBmdW5jdGlvbiByZWFkKCkgeyByZXR1cm4gbnVsbDsgfSxcbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7fVxuICAgICAgfTtcbiAgICB9KSgpXG4pO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGVcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBVUkwgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQWJzb2x1dGVVUkwodXJsKSB7XG4gIC8vIEEgVVJMIGlzIGNvbnNpZGVyZWQgYWJzb2x1dGUgaWYgaXQgYmVnaW5zIHdpdGggXCI8c2NoZW1lPjovL1wiIG9yIFwiLy9cIiAocHJvdG9jb2wtcmVsYXRpdmUgVVJMKS5cbiAgLy8gUkZDIDM5ODYgZGVmaW5lcyBzY2hlbWUgbmFtZSBhcyBhIHNlcXVlbmNlIG9mIGNoYXJhY3RlcnMgYmVnaW5uaW5nIHdpdGggYSBsZXR0ZXIgYW5kIGZvbGxvd2VkXG4gIC8vIGJ5IGFueSBjb21iaW5hdGlvbiBvZiBsZXR0ZXJzLCBkaWdpdHMsIHBsdXMsIHBlcmlvZCwgb3IgaHlwaGVuLlxuICByZXR1cm4gL14oW2Etel1bYS16XFxkXFwrXFwtXFwuXSo6KT9cXC9cXC8vaS50ZXN0KHVybCk7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFVSTCBieSBjb21iaW5pbmcgdGhlIHNwZWNpZmllZCBVUkxzXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2VVUkwgVGhlIGJhc2UgVVJMXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVsYXRpdmVVUkwgVGhlIHJlbGF0aXZlIFVSTFxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGNvbWJpbmVkIFVSTFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNvbWJpbmVVUkxzKGJhc2VVUkwsIHJlbGF0aXZlVVJMKSB7XG4gIHJldHVybiByZWxhdGl2ZVVSTFxuICAgID8gYmFzZVVSTC5yZXBsYWNlKC9cXC8rJC8sICcnKSArICcvJyArIHJlbGF0aXZlVVJMLnJlcGxhY2UoL15cXC8rLywgJycpXG4gICAgOiBiYXNlVVJMO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciBpc0Fic29sdXRlVVJMID0gcmVxdWlyZSgnLi4vaGVscGVycy9pc0Fic29sdXRlVVJMJyk7XG52YXIgY29tYmluZVVSTHMgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2NvbWJpbmVVUkxzJyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBVUkwgYnkgY29tYmluaW5nIHRoZSBiYXNlVVJMIHdpdGggdGhlIHJlcXVlc3RlZFVSTCxcbiAqIG9ubHkgd2hlbiB0aGUgcmVxdWVzdGVkVVJMIGlzIG5vdCBhbHJlYWR5IGFuIGFic29sdXRlIFVSTC5cbiAqIElmIHRoZSByZXF1ZXN0VVJMIGlzIGFic29sdXRlLCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIHJlcXVlc3RlZFVSTCB1bnRvdWNoZWQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2VVUkwgVGhlIGJhc2UgVVJMXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdGVkVVJMIEFic29sdXRlIG9yIHJlbGF0aXZlIFVSTCB0byBjb21iaW5lXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgZnVsbCBwYXRoXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYnVpbGRGdWxsUGF0aChiYXNlVVJMLCByZXF1ZXN0ZWRVUkwpIHtcbiAgaWYgKGJhc2VVUkwgJiYgIWlzQWJzb2x1dGVVUkwocmVxdWVzdGVkVVJMKSkge1xuICAgIHJldHVybiBjb21iaW5lVVJMcyhiYXNlVVJMLCByZXF1ZXN0ZWRVUkwpO1xuICB9XG4gIHJldHVybiByZXF1ZXN0ZWRVUkw7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG4vLyBIZWFkZXJzIHdob3NlIGR1cGxpY2F0ZXMgYXJlIGlnbm9yZWQgYnkgbm9kZVxuLy8gYy5mLiBodHRwczovL25vZGVqcy5vcmcvYXBpL2h0dHAuaHRtbCNodHRwX21lc3NhZ2VfaGVhZGVyc1xudmFyIGlnbm9yZUR1cGxpY2F0ZU9mID0gW1xuICAnYWdlJywgJ2F1dGhvcml6YXRpb24nLCAnY29udGVudC1sZW5ndGgnLCAnY29udGVudC10eXBlJywgJ2V0YWcnLFxuICAnZXhwaXJlcycsICdmcm9tJywgJ2hvc3QnLCAnaWYtbW9kaWZpZWQtc2luY2UnLCAnaWYtdW5tb2RpZmllZC1zaW5jZScsXG4gICdsYXN0LW1vZGlmaWVkJywgJ2xvY2F0aW9uJywgJ21heC1mb3J3YXJkcycsICdwcm94eS1hdXRob3JpemF0aW9uJyxcbiAgJ3JlZmVyZXInLCAncmV0cnktYWZ0ZXInLCAndXNlci1hZ2VudCdcbl07XG5cbi8qKlxuICogUGFyc2UgaGVhZGVycyBpbnRvIGFuIG9iamVjdFxuICpcbiAqIGBgYFxuICogRGF0ZTogV2VkLCAyNyBBdWcgMjAxNCAwODo1ODo0OSBHTVRcbiAqIENvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvblxuICogQ29ubmVjdGlvbjoga2VlcC1hbGl2ZVxuICogVHJhbnNmZXItRW5jb2Rpbmc6IGNodW5rZWRcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBoZWFkZXJzIEhlYWRlcnMgbmVlZGluZyB0byBiZSBwYXJzZWRcbiAqIEByZXR1cm5zIHtPYmplY3R9IEhlYWRlcnMgcGFyc2VkIGludG8gYW4gb2JqZWN0XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcGFyc2VIZWFkZXJzKGhlYWRlcnMpIHtcbiAgdmFyIHBhcnNlZCA9IHt9O1xuICB2YXIga2V5O1xuICB2YXIgdmFsO1xuICB2YXIgaTtcblxuICBpZiAoIWhlYWRlcnMpIHsgcmV0dXJuIHBhcnNlZDsgfVxuXG4gIHV0aWxzLmZvckVhY2goaGVhZGVycy5zcGxpdCgnXFxuJyksIGZ1bmN0aW9uIHBhcnNlcihsaW5lKSB7XG4gICAgaSA9IGxpbmUuaW5kZXhPZignOicpO1xuICAgIGtleSA9IHV0aWxzLnRyaW0obGluZS5zdWJzdHIoMCwgaSkpLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFsID0gdXRpbHMudHJpbShsaW5lLnN1YnN0cihpICsgMSkpO1xuXG4gICAgaWYgKGtleSkge1xuICAgICAgaWYgKHBhcnNlZFtrZXldICYmIGlnbm9yZUR1cGxpY2F0ZU9mLmluZGV4T2Yoa2V5KSA+PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXkgPT09ICdzZXQtY29va2llJykge1xuICAgICAgICBwYXJzZWRba2V5XSA9IChwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldIDogW10pLmNvbmNhdChbdmFsXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJzZWRba2V5XSA9IHBhcnNlZFtrZXldID8gcGFyc2VkW2tleV0gKyAnLCAnICsgdmFsIDogdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHBhcnNlZDtcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKFxuICB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID9cblxuICAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgaGF2ZSBmdWxsIHN1cHBvcnQgb2YgdGhlIEFQSXMgbmVlZGVkIHRvIHRlc3RcbiAgLy8gd2hldGhlciB0aGUgcmVxdWVzdCBVUkwgaXMgb2YgdGhlIHNhbWUgb3JpZ2luIGFzIGN1cnJlbnQgbG9jYXRpb24uXG4gICAgKGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICAgIHZhciBtc2llID0gLyhtc2llfHRyaWRlbnQpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgIHZhciB1cmxQYXJzaW5nTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgIHZhciBvcmlnaW5VUkw7XG5cbiAgICAgIC8qKlxuICAgICogUGFyc2UgYSBVUkwgdG8gZGlzY292ZXIgaXQncyBjb21wb25lbnRzXG4gICAgKlxuICAgICogQHBhcmFtIHtTdHJpbmd9IHVybCBUaGUgVVJMIHRvIGJlIHBhcnNlZFxuICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAqL1xuICAgICAgZnVuY3Rpb24gcmVzb2x2ZVVSTCh1cmwpIHtcbiAgICAgICAgdmFyIGhyZWYgPSB1cmw7XG5cbiAgICAgICAgaWYgKG1zaWUpIHtcbiAgICAgICAgLy8gSUUgbmVlZHMgYXR0cmlidXRlIHNldCB0d2ljZSB0byBub3JtYWxpemUgcHJvcGVydGllc1xuICAgICAgICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuICAgICAgICAgIGhyZWYgPSB1cmxQYXJzaW5nTm9kZS5ocmVmO1xuICAgICAgICB9XG5cbiAgICAgICAgdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7XG5cbiAgICAgICAgLy8gdXJsUGFyc2luZ05vZGUgcHJvdmlkZXMgdGhlIFVybFV0aWxzIGludGVyZmFjZSAtIGh0dHA6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmx1dGlsc1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGhyZWY6IHVybFBhcnNpbmdOb2RlLmhyZWYsXG4gICAgICAgICAgcHJvdG9jb2w6IHVybFBhcnNpbmdOb2RlLnByb3RvY29sID8gdXJsUGFyc2luZ05vZGUucHJvdG9jb2wucmVwbGFjZSgvOiQvLCAnJykgOiAnJyxcbiAgICAgICAgICBob3N0OiB1cmxQYXJzaW5nTm9kZS5ob3N0LFxuICAgICAgICAgIHNlYXJjaDogdXJsUGFyc2luZ05vZGUuc2VhcmNoID8gdXJsUGFyc2luZ05vZGUuc2VhcmNoLnJlcGxhY2UoL15cXD8vLCAnJykgOiAnJyxcbiAgICAgICAgICBoYXNoOiB1cmxQYXJzaW5nTm9kZS5oYXNoID8gdXJsUGFyc2luZ05vZGUuaGFzaC5yZXBsYWNlKC9eIy8sICcnKSA6ICcnLFxuICAgICAgICAgIGhvc3RuYW1lOiB1cmxQYXJzaW5nTm9kZS5ob3N0bmFtZSxcbiAgICAgICAgICBwb3J0OiB1cmxQYXJzaW5nTm9kZS5wb3J0LFxuICAgICAgICAgIHBhdGhuYW1lOiAodXJsUGFyc2luZ05vZGUucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycpID9cbiAgICAgICAgICAgIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lIDpcbiAgICAgICAgICAgICcvJyArIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIG9yaWdpblVSTCA9IHJlc29sdmVVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuXG4gICAgICAvKipcbiAgICAqIERldGVybWluZSBpZiBhIFVSTCBzaGFyZXMgdGhlIHNhbWUgb3JpZ2luIGFzIHRoZSBjdXJyZW50IGxvY2F0aW9uXG4gICAgKlxuICAgICogQHBhcmFtIHtTdHJpbmd9IHJlcXVlc3RVUkwgVGhlIFVSTCB0byB0ZXN0XG4gICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiwgb3RoZXJ3aXNlIGZhbHNlXG4gICAgKi9cbiAgICAgIHJldHVybiBmdW5jdGlvbiBpc1VSTFNhbWVPcmlnaW4ocmVxdWVzdFVSTCkge1xuICAgICAgICB2YXIgcGFyc2VkID0gKHV0aWxzLmlzU3RyaW5nKHJlcXVlc3RVUkwpKSA/IHJlc29sdmVVUkwocmVxdWVzdFVSTCkgOiByZXF1ZXN0VVJMO1xuICAgICAgICByZXR1cm4gKHBhcnNlZC5wcm90b2NvbCA9PT0gb3JpZ2luVVJMLnByb3RvY29sICYmXG4gICAgICAgICAgICBwYXJzZWQuaG9zdCA9PT0gb3JpZ2luVVJMLmhvc3QpO1xuICAgICAgfTtcbiAgICB9KSgpIDpcblxuICAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnZzICh3ZWIgd29ya2VycywgcmVhY3QtbmF0aXZlKSBsYWNrIG5lZWRlZCBzdXBwb3J0LlxuICAgIChmdW5jdGlvbiBub25TdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gaXNVUkxTYW1lT3JpZ2luKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH07XG4gICAgfSkoKVxuKTtcbiIsICIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQSBgQ2FuY2VsYCBpcyBhbiBvYmplY3QgdGhhdCBpcyB0aHJvd24gd2hlbiBhbiBvcGVyYXRpb24gaXMgY2FuY2VsZWQuXG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge3N0cmluZz19IG1lc3NhZ2UgVGhlIG1lc3NhZ2UuXG4gKi9cbmZ1bmN0aW9uIENhbmNlbChtZXNzYWdlKSB7XG4gIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG59XG5cbkNhbmNlbC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgcmV0dXJuICdDYW5jZWwnICsgKHRoaXMubWVzc2FnZSA/ICc6ICcgKyB0aGlzLm1lc3NhZ2UgOiAnJyk7XG59O1xuXG5DYW5jZWwucHJvdG90eXBlLl9fQ0FOQ0VMX18gPSB0cnVlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbmNlbDtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciBzZXR0bGUgPSByZXF1aXJlKCcuLy4uL2NvcmUvc2V0dGxlJyk7XG52YXIgY29va2llcyA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9jb29raWVzJyk7XG52YXIgYnVpbGRVUkwgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvYnVpbGRVUkwnKTtcbnZhciBidWlsZEZ1bGxQYXRoID0gcmVxdWlyZSgnLi4vY29yZS9idWlsZEZ1bGxQYXRoJyk7XG52YXIgcGFyc2VIZWFkZXJzID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL3BhcnNlSGVhZGVycycpO1xudmFyIGlzVVJMU2FtZU9yaWdpbiA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9pc1VSTFNhbWVPcmlnaW4nKTtcbnZhciBjcmVhdGVFcnJvciA9IHJlcXVpcmUoJy4uL2NvcmUvY3JlYXRlRXJyb3InKTtcbnZhciBkZWZhdWx0cyA9IHJlcXVpcmUoJy4uL2RlZmF1bHRzJyk7XG52YXIgQ2FuY2VsID0gcmVxdWlyZSgnLi4vY2FuY2VsL0NhbmNlbCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHhockFkYXB0ZXIoY29uZmlnKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBkaXNwYXRjaFhoclJlcXVlc3QocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIHJlcXVlc3REYXRhID0gY29uZmlnLmRhdGE7XG4gICAgdmFyIHJlcXVlc3RIZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XG4gICAgdmFyIHJlc3BvbnNlVHlwZSA9IGNvbmZpZy5yZXNwb25zZVR5cGU7XG4gICAgdmFyIG9uQ2FuY2VsZWQ7XG4gICAgZnVuY3Rpb24gZG9uZSgpIHtcbiAgICAgIGlmIChjb25maWcuY2FuY2VsVG9rZW4pIHtcbiAgICAgICAgY29uZmlnLmNhbmNlbFRva2VuLnVuc3Vic2NyaWJlKG9uQ2FuY2VsZWQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29uZmlnLnNpZ25hbCkge1xuICAgICAgICBjb25maWcuc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywgb25DYW5jZWxlZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHV0aWxzLmlzRm9ybURhdGEocmVxdWVzdERhdGEpKSB7XG4gICAgICBkZWxldGUgcmVxdWVzdEhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddOyAvLyBMZXQgdGhlIGJyb3dzZXIgc2V0IGl0XG4gICAgfVxuXG4gICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIC8vIEhUVFAgYmFzaWMgYXV0aGVudGljYXRpb25cbiAgICBpZiAoY29uZmlnLmF1dGgpIHtcbiAgICAgIHZhciB1c2VybmFtZSA9IGNvbmZpZy5hdXRoLnVzZXJuYW1lIHx8ICcnO1xuICAgICAgdmFyIHBhc3N3b3JkID0gY29uZmlnLmF1dGgucGFzc3dvcmQgPyB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoY29uZmlnLmF1dGgucGFzc3dvcmQpKSA6ICcnO1xuICAgICAgcmVxdWVzdEhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCYXNpYyAnICsgYnRvYSh1c2VybmFtZSArICc6JyArIHBhc3N3b3JkKTtcbiAgICB9XG5cbiAgICB2YXIgZnVsbFBhdGggPSBidWlsZEZ1bGxQYXRoKGNvbmZpZy5iYXNlVVJMLCBjb25maWcudXJsKTtcbiAgICByZXF1ZXN0Lm9wZW4oY29uZmlnLm1ldGhvZC50b1VwcGVyQ2FzZSgpLCBidWlsZFVSTChmdWxsUGF0aCwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpLCB0cnVlKTtcblxuICAgIC8vIFNldCB0aGUgcmVxdWVzdCB0aW1lb3V0IGluIE1TXG4gICAgcmVxdWVzdC50aW1lb3V0ID0gY29uZmlnLnRpbWVvdXQ7XG5cbiAgICBmdW5jdGlvbiBvbmxvYWRlbmQoKSB7XG4gICAgICBpZiAoIXJlcXVlc3QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gUHJlcGFyZSB0aGUgcmVzcG9uc2VcbiAgICAgIHZhciByZXNwb25zZUhlYWRlcnMgPSAnZ2V0QWxsUmVzcG9uc2VIZWFkZXJzJyBpbiByZXF1ZXN0ID8gcGFyc2VIZWFkZXJzKHJlcXVlc3QuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpIDogbnVsbDtcbiAgICAgIHZhciByZXNwb25zZURhdGEgPSAhcmVzcG9uc2VUeXBlIHx8IHJlc3BvbnNlVHlwZSA9PT0gJ3RleHQnIHx8ICByZXNwb25zZVR5cGUgPT09ICdqc29uJyA/XG4gICAgICAgIHJlcXVlc3QucmVzcG9uc2VUZXh0IDogcmVxdWVzdC5yZXNwb25zZTtcbiAgICAgIHZhciByZXNwb25zZSA9IHtcbiAgICAgICAgZGF0YTogcmVzcG9uc2VEYXRhLFxuICAgICAgICBzdGF0dXM6IHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiByZXF1ZXN0LnN0YXR1c1RleHQsXG4gICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgY29uZmlnOiBjb25maWcsXG4gICAgICAgIHJlcXVlc3Q6IHJlcXVlc3RcbiAgICAgIH07XG5cbiAgICAgIHNldHRsZShmdW5jdGlvbiBfcmVzb2x2ZSh2YWx1ZSkge1xuICAgICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfSwgZnVuY3Rpb24gX3JlamVjdChlcnIpIHtcbiAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0sIHJlc3BvbnNlKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKCdvbmxvYWRlbmQnIGluIHJlcXVlc3QpIHtcbiAgICAgIC8vIFVzZSBvbmxvYWRlbmQgaWYgYXZhaWxhYmxlXG4gICAgICByZXF1ZXN0Lm9ubG9hZGVuZCA9IG9ubG9hZGVuZDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTGlzdGVuIGZvciByZWFkeSBzdGF0ZSB0byBlbXVsYXRlIG9ubG9hZGVuZFxuICAgICAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVMb2FkKCkge1xuICAgICAgICBpZiAoIXJlcXVlc3QgfHwgcmVxdWVzdC5yZWFkeVN0YXRlICE9PSA0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGhlIHJlcXVlc3QgZXJyb3JlZCBvdXQgYW5kIHdlIGRpZG4ndCBnZXQgYSByZXNwb25zZSwgdGhpcyB3aWxsIGJlXG4gICAgICAgIC8vIGhhbmRsZWQgYnkgb25lcnJvciBpbnN0ZWFkXG4gICAgICAgIC8vIFdpdGggb25lIGV4Y2VwdGlvbjogcmVxdWVzdCB0aGF0IHVzaW5nIGZpbGU6IHByb3RvY29sLCBtb3N0IGJyb3dzZXJzXG4gICAgICAgIC8vIHdpbGwgcmV0dXJuIHN0YXR1cyBhcyAwIGV2ZW4gdGhvdWdoIGl0J3MgYSBzdWNjZXNzZnVsIHJlcXVlc3RcbiAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSAwICYmICEocmVxdWVzdC5yZXNwb25zZVVSTCAmJiByZXF1ZXN0LnJlc3BvbnNlVVJMLmluZGV4T2YoJ2ZpbGU6JykgPT09IDApKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlYWR5c3RhdGUgaGFuZGxlciBpcyBjYWxsaW5nIGJlZm9yZSBvbmVycm9yIG9yIG9udGltZW91dCBoYW5kbGVycyxcbiAgICAgICAgLy8gc28gd2Ugc2hvdWxkIGNhbGwgb25sb2FkZW5kIG9uIHRoZSBuZXh0ICd0aWNrJ1xuICAgICAgICBzZXRUaW1lb3V0KG9ubG9hZGVuZCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBicm93c2VyIHJlcXVlc3QgY2FuY2VsbGF0aW9uIChhcyBvcHBvc2VkIHRvIGEgbWFudWFsIGNhbmNlbGxhdGlvbilcbiAgICByZXF1ZXN0Lm9uYWJvcnQgPSBmdW5jdGlvbiBoYW5kbGVBYm9ydCgpIHtcbiAgICAgIGlmICghcmVxdWVzdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHJlamVjdChjcmVhdGVFcnJvcignUmVxdWVzdCBhYm9ydGVkJywgY29uZmlnLCAnRUNPTk5BQk9SVEVEJywgcmVxdWVzdCkpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gSGFuZGxlIGxvdyBsZXZlbCBuZXR3b3JrIGVycm9yc1xuICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIGhhbmRsZUVycm9yKCkge1xuICAgICAgLy8gUmVhbCBlcnJvcnMgYXJlIGhpZGRlbiBmcm9tIHVzIGJ5IHRoZSBicm93c2VyXG4gICAgICAvLyBvbmVycm9yIHNob3VsZCBvbmx5IGZpcmUgaWYgaXQncyBhIG5ldHdvcmsgZXJyb3JcbiAgICAgIHJlamVjdChjcmVhdGVFcnJvcignTmV0d29yayBFcnJvcicsIGNvbmZpZywgbnVsbCwgcmVxdWVzdCkpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gSGFuZGxlIHRpbWVvdXRcbiAgICByZXF1ZXN0Lm9udGltZW91dCA9IGZ1bmN0aW9uIGhhbmRsZVRpbWVvdXQoKSB7XG4gICAgICB2YXIgdGltZW91dEVycm9yTWVzc2FnZSA9IGNvbmZpZy50aW1lb3V0ID8gJ3RpbWVvdXQgb2YgJyArIGNvbmZpZy50aW1lb3V0ICsgJ21zIGV4Y2VlZGVkJyA6ICd0aW1lb3V0IGV4Y2VlZGVkJztcbiAgICAgIHZhciB0cmFuc2l0aW9uYWwgPSBjb25maWcudHJhbnNpdGlvbmFsIHx8IGRlZmF1bHRzLnRyYW5zaXRpb25hbDtcbiAgICAgIGlmIChjb25maWcudGltZW91dEVycm9yTWVzc2FnZSkge1xuICAgICAgICB0aW1lb3V0RXJyb3JNZXNzYWdlID0gY29uZmlnLnRpbWVvdXRFcnJvck1lc3NhZ2U7XG4gICAgICB9XG4gICAgICByZWplY3QoY3JlYXRlRXJyb3IoXG4gICAgICAgIHRpbWVvdXRFcnJvck1lc3NhZ2UsXG4gICAgICAgIGNvbmZpZyxcbiAgICAgICAgdHJhbnNpdGlvbmFsLmNsYXJpZnlUaW1lb3V0RXJyb3IgPyAnRVRJTUVET1VUJyA6ICdFQ09OTkFCT1JURUQnLFxuICAgICAgICByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBBZGQgeHNyZiBoZWFkZXJcbiAgICAvLyBUaGlzIGlzIG9ubHkgZG9uZSBpZiBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciBlbnZpcm9ubWVudC5cbiAgICAvLyBTcGVjaWZpY2FsbHkgbm90IGlmIHdlJ3JlIGluIGEgd2ViIHdvcmtlciwgb3IgcmVhY3QtbmF0aXZlLlxuICAgIGlmICh1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpKSB7XG4gICAgICAvLyBBZGQgeHNyZiBoZWFkZXJcbiAgICAgIHZhciB4c3JmVmFsdWUgPSAoY29uZmlnLndpdGhDcmVkZW50aWFscyB8fCBpc1VSTFNhbWVPcmlnaW4oZnVsbFBhdGgpKSAmJiBjb25maWcueHNyZkNvb2tpZU5hbWUgP1xuICAgICAgICBjb29raWVzLnJlYWQoY29uZmlnLnhzcmZDb29raWVOYW1lKSA6XG4gICAgICAgIHVuZGVmaW5lZDtcblxuICAgICAgaWYgKHhzcmZWYWx1ZSkge1xuICAgICAgICByZXF1ZXN0SGVhZGVyc1tjb25maWcueHNyZkhlYWRlck5hbWVdID0geHNyZlZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFkZCBoZWFkZXJzIHRvIHRoZSByZXF1ZXN0XG4gICAgaWYgKCdzZXRSZXF1ZXN0SGVhZGVyJyBpbiByZXF1ZXN0KSB7XG4gICAgICB1dGlscy5mb3JFYWNoKHJlcXVlc3RIZWFkZXJzLCBmdW5jdGlvbiBzZXRSZXF1ZXN0SGVhZGVyKHZhbCwga2V5KSB7XG4gICAgICAgIGlmICh0eXBlb2YgcmVxdWVzdERhdGEgPT09ICd1bmRlZmluZWQnICYmIGtleS50b0xvd2VyQ2FzZSgpID09PSAnY29udGVudC10eXBlJykge1xuICAgICAgICAgIC8vIFJlbW92ZSBDb250ZW50LVR5cGUgaWYgZGF0YSBpcyB1bmRlZmluZWRcbiAgICAgICAgICBkZWxldGUgcmVxdWVzdEhlYWRlcnNba2V5XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBPdGhlcndpc2UgYWRkIGhlYWRlciB0byB0aGUgcmVxdWVzdFxuICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcihrZXksIHZhbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEFkZCB3aXRoQ3JlZGVudGlhbHMgdG8gcmVxdWVzdCBpZiBuZWVkZWRcbiAgICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMpKSB7XG4gICAgICByZXF1ZXN0LndpdGhDcmVkZW50aWFscyA9ICEhY29uZmlnLndpdGhDcmVkZW50aWFscztcbiAgICB9XG5cbiAgICAvLyBBZGQgcmVzcG9uc2VUeXBlIHRvIHJlcXVlc3QgaWYgbmVlZGVkXG4gICAgaWYgKHJlc3BvbnNlVHlwZSAmJiByZXNwb25zZVR5cGUgIT09ICdqc29uJykge1xuICAgICAgcmVxdWVzdC5yZXNwb25zZVR5cGUgPSBjb25maWcucmVzcG9uc2VUeXBlO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBwcm9ncmVzcyBpZiBuZWVkZWRcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5vbkRvd25sb2FkUHJvZ3Jlc3MgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBjb25maWcub25Eb3dubG9hZFByb2dyZXNzKTtcbiAgICB9XG5cbiAgICAvLyBOb3QgYWxsIGJyb3dzZXJzIHN1cHBvcnQgdXBsb2FkIGV2ZW50c1xuICAgIGlmICh0eXBlb2YgY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MgPT09ICdmdW5jdGlvbicgJiYgcmVxdWVzdC51cGxvYWQpIHtcbiAgICAgIHJlcXVlc3QudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MpO1xuICAgIH1cblxuICAgIGlmIChjb25maWcuY2FuY2VsVG9rZW4gfHwgY29uZmlnLnNpZ25hbCkge1xuICAgICAgLy8gSGFuZGxlIGNhbmNlbGxhdGlvblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgICAgIG9uQ2FuY2VsZWQgPSBmdW5jdGlvbihjYW5jZWwpIHtcbiAgICAgICAgaWYgKCFyZXF1ZXN0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlamVjdCghY2FuY2VsIHx8IChjYW5jZWwgJiYgY2FuY2VsLnR5cGUpID8gbmV3IENhbmNlbCgnY2FuY2VsZWQnKSA6IGNhbmNlbCk7XG4gICAgICAgIHJlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgICB9O1xuXG4gICAgICBjb25maWcuY2FuY2VsVG9rZW4gJiYgY29uZmlnLmNhbmNlbFRva2VuLnN1YnNjcmliZShvbkNhbmNlbGVkKTtcbiAgICAgIGlmIChjb25maWcuc2lnbmFsKSB7XG4gICAgICAgIGNvbmZpZy5zaWduYWwuYWJvcnRlZCA/IG9uQ2FuY2VsZWQoKSA6IGNvbmZpZy5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBvbkNhbmNlbGVkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXJlcXVlc3REYXRhKSB7XG4gICAgICByZXF1ZXN0RGF0YSA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gU2VuZCB0aGUgcmVxdWVzdFxuICAgIHJlcXVlc3Quc2VuZChyZXF1ZXN0RGF0YSk7XG4gIH0pO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBub3JtYWxpemVIZWFkZXJOYW1lID0gcmVxdWlyZSgnLi9oZWxwZXJzL25vcm1hbGl6ZUhlYWRlck5hbWUnKTtcbnZhciBlbmhhbmNlRXJyb3IgPSByZXF1aXJlKCcuL2NvcmUvZW5oYW5jZUVycm9yJyk7XG5cbnZhciBERUZBVUxUX0NPTlRFTlRfVFlQRSA9IHtcbiAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXG59O1xuXG5mdW5jdGlvbiBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgdmFsdWUpIHtcbiAgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChoZWFkZXJzKSAmJiB1dGlscy5pc1VuZGVmaW5lZChoZWFkZXJzWydDb250ZW50LVR5cGUnXSkpIHtcbiAgICBoZWFkZXJzWydDb250ZW50LVR5cGUnXSA9IHZhbHVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldERlZmF1bHRBZGFwdGVyKCkge1xuICB2YXIgYWRhcHRlcjtcbiAgaWYgKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBGb3IgYnJvd3NlcnMgdXNlIFhIUiBhZGFwdGVyXG4gICAgYWRhcHRlciA9IHJlcXVpcmUoJy4vYWRhcHRlcnMveGhyJyk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nKSB7XG4gICAgLy8gRm9yIG5vZGUgdXNlIEhUVFAgYWRhcHRlclxuICAgIGFkYXB0ZXIgPSByZXF1aXJlKCcuL2FkYXB0ZXJzL2h0dHAnKTtcbiAgfVxuICByZXR1cm4gYWRhcHRlcjtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5U2FmZWx5KHJhd1ZhbHVlLCBwYXJzZXIsIGVuY29kZXIpIHtcbiAgaWYgKHV0aWxzLmlzU3RyaW5nKHJhd1ZhbHVlKSkge1xuICAgIHRyeSB7XG4gICAgICAocGFyc2VyIHx8IEpTT04ucGFyc2UpKHJhd1ZhbHVlKTtcbiAgICAgIHJldHVybiB1dGlscy50cmltKHJhd1ZhbHVlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoZS5uYW1lICE9PSAnU3ludGF4RXJyb3InKSB7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChlbmNvZGVyIHx8IEpTT04uc3RyaW5naWZ5KShyYXdWYWx1ZSk7XG59XG5cbnZhciBkZWZhdWx0cyA9IHtcblxuICB0cmFuc2l0aW9uYWw6IHtcbiAgICBzaWxlbnRKU09OUGFyc2luZzogdHJ1ZSxcbiAgICBmb3JjZWRKU09OUGFyc2luZzogdHJ1ZSxcbiAgICBjbGFyaWZ5VGltZW91dEVycm9yOiBmYWxzZVxuICB9LFxuXG4gIGFkYXB0ZXI6IGdldERlZmF1bHRBZGFwdGVyKCksXG5cbiAgdHJhbnNmb3JtUmVxdWVzdDogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlcXVlc3QoZGF0YSwgaGVhZGVycykge1xuICAgIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgJ0FjY2VwdCcpO1xuICAgIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgJ0NvbnRlbnQtVHlwZScpO1xuXG4gICAgaWYgKHV0aWxzLmlzRm9ybURhdGEoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQXJyYXlCdWZmZXIoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQnVmZmVyKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc1N0cmVhbShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNGaWxlKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0Jsb2IoZGF0YSlcbiAgICApIHtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNBcnJheUJ1ZmZlclZpZXcoZGF0YSkpIHtcbiAgICAgIHJldHVybiBkYXRhLmJ1ZmZlcjtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKGRhdGEpKSB7XG4gICAgICBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04Jyk7XG4gICAgICByZXR1cm4gZGF0YS50b1N0cmluZygpO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNPYmplY3QoZGF0YSkgfHwgKGhlYWRlcnMgJiYgaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPT09ICdhcHBsaWNhdGlvbi9qc29uJykpIHtcbiAgICAgIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgcmV0dXJuIHN0cmluZ2lmeVNhZmVseShkYXRhKTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1dLFxuXG4gIHRyYW5zZm9ybVJlc3BvbnNlOiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVzcG9uc2UoZGF0YSkge1xuICAgIHZhciB0cmFuc2l0aW9uYWwgPSB0aGlzLnRyYW5zaXRpb25hbCB8fCBkZWZhdWx0cy50cmFuc2l0aW9uYWw7XG4gICAgdmFyIHNpbGVudEpTT05QYXJzaW5nID0gdHJhbnNpdGlvbmFsICYmIHRyYW5zaXRpb25hbC5zaWxlbnRKU09OUGFyc2luZztcbiAgICB2YXIgZm9yY2VkSlNPTlBhcnNpbmcgPSB0cmFuc2l0aW9uYWwgJiYgdHJhbnNpdGlvbmFsLmZvcmNlZEpTT05QYXJzaW5nO1xuICAgIHZhciBzdHJpY3RKU09OUGFyc2luZyA9ICFzaWxlbnRKU09OUGFyc2luZyAmJiB0aGlzLnJlc3BvbnNlVHlwZSA9PT0gJ2pzb24nO1xuXG4gICAgaWYgKHN0cmljdEpTT05QYXJzaW5nIHx8IChmb3JjZWRKU09OUGFyc2luZyAmJiB1dGlscy5pc1N0cmluZyhkYXRhKSAmJiBkYXRhLmxlbmd0aCkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoc3RyaWN0SlNPTlBhcnNpbmcpIHtcbiAgICAgICAgICBpZiAoZS5uYW1lID09PSAnU3ludGF4RXJyb3InKSB7XG4gICAgICAgICAgICB0aHJvdyBlbmhhbmNlRXJyb3IoZSwgdGhpcywgJ0VfSlNPTl9QQVJTRScpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH1dLFxuXG4gIC8qKlxuICAgKiBBIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzIHRvIGFib3J0IGEgcmVxdWVzdC4gSWYgc2V0IHRvIDAgKGRlZmF1bHQpIGFcbiAgICogdGltZW91dCBpcyBub3QgY3JlYXRlZC5cbiAgICovXG4gIHRpbWVvdXQ6IDAsXG5cbiAgeHNyZkNvb2tpZU5hbWU6ICdYU1JGLVRPS0VOJyxcbiAgeHNyZkhlYWRlck5hbWU6ICdYLVhTUkYtVE9LRU4nLFxuXG4gIG1heENvbnRlbnRMZW5ndGg6IC0xLFxuICBtYXhCb2R5TGVuZ3RoOiAtMSxcblxuICB2YWxpZGF0ZVN0YXR1czogZnVuY3Rpb24gdmFsaWRhdGVTdGF0dXMoc3RhdHVzKSB7XG4gICAgcmV0dXJuIHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwO1xuICB9LFxuXG4gIGhlYWRlcnM6IHtcbiAgICBjb21tb246IHtcbiAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qJ1xuICAgIH1cbiAgfVxufTtcblxudXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kTm9EYXRhKG1ldGhvZCkge1xuICBkZWZhdWx0cy5oZWFkZXJzW21ldGhvZF0gPSB7fTtcbn0pO1xuXG51dGlscy5mb3JFYWNoKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkge1xuICBkZWZhdWx0cy5oZWFkZXJzW21ldGhvZF0gPSB1dGlscy5tZXJnZShERUZBVUxUX0NPTlRFTlRfVFlQRSk7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBkZWZhdWx0cztcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciBkZWZhdWx0cyA9IHJlcXVpcmUoJy4vLi4vZGVmYXVsdHMnKTtcblxuLyoqXG4gKiBUcmFuc2Zvcm0gdGhlIGRhdGEgZm9yIGEgcmVxdWVzdCBvciBhIHJlc3BvbnNlXG4gKlxuICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBkYXRhIFRoZSBkYXRhIHRvIGJlIHRyYW5zZm9ybWVkXG4gKiBAcGFyYW0ge0FycmF5fSBoZWFkZXJzIFRoZSBoZWFkZXJzIGZvciB0aGUgcmVxdWVzdCBvciByZXNwb25zZVxuICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbn0gZm5zIEEgc2luZ2xlIGZ1bmN0aW9uIG9yIEFycmF5IG9mIGZ1bmN0aW9uc1xuICogQHJldHVybnMgeyp9IFRoZSByZXN1bHRpbmcgdHJhbnNmb3JtZWQgZGF0YVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRyYW5zZm9ybURhdGEoZGF0YSwgaGVhZGVycywgZm5zKSB7XG4gIHZhciBjb250ZXh0ID0gdGhpcyB8fCBkZWZhdWx0cztcbiAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gIHV0aWxzLmZvckVhY2goZm5zLCBmdW5jdGlvbiB0cmFuc2Zvcm0oZm4pIHtcbiAgICBkYXRhID0gZm4uY2FsbChjb250ZXh0LCBkYXRhLCBoZWFkZXJzKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGRhdGE7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0NhbmNlbCh2YWx1ZSkge1xuICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWUuX19DQU5DRUxfXyk7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xudmFyIHRyYW5zZm9ybURhdGEgPSByZXF1aXJlKCcuL3RyYW5zZm9ybURhdGEnKTtcbnZhciBpc0NhbmNlbCA9IHJlcXVpcmUoJy4uL2NhbmNlbC9pc0NhbmNlbCcpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi4vZGVmYXVsdHMnKTtcbnZhciBDYW5jZWwgPSByZXF1aXJlKCcuLi9jYW5jZWwvQ2FuY2VsJyk7XG5cbi8qKlxuICogVGhyb3dzIGEgYENhbmNlbGAgaWYgY2FuY2VsbGF0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZC5cbiAqL1xuZnVuY3Rpb24gdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpIHtcbiAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikge1xuICAgIGNvbmZpZy5jYW5jZWxUb2tlbi50aHJvd0lmUmVxdWVzdGVkKCk7XG4gIH1cblxuICBpZiAoY29uZmlnLnNpZ25hbCAmJiBjb25maWcuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICB0aHJvdyBuZXcgQ2FuY2VsKCdjYW5jZWxlZCcpO1xuICB9XG59XG5cbi8qKlxuICogRGlzcGF0Y2ggYSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgdXNpbmcgdGhlIGNvbmZpZ3VyZWQgYWRhcHRlci5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIFRoZSBjb25maWcgdGhhdCBpcyB0byBiZSB1c2VkIGZvciB0aGUgcmVxdWVzdFxuICogQHJldHVybnMge1Byb21pc2V9IFRoZSBQcm9taXNlIHRvIGJlIGZ1bGZpbGxlZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRpc3BhdGNoUmVxdWVzdChjb25maWcpIHtcbiAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gIC8vIEVuc3VyZSBoZWFkZXJzIGV4aXN0XG4gIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XG5cbiAgLy8gVHJhbnNmb3JtIHJlcXVlc3QgZGF0YVxuICBjb25maWcuZGF0YSA9IHRyYW5zZm9ybURhdGEuY2FsbChcbiAgICBjb25maWcsXG4gICAgY29uZmlnLmRhdGEsXG4gICAgY29uZmlnLmhlYWRlcnMsXG4gICAgY29uZmlnLnRyYW5zZm9ybVJlcXVlc3RcbiAgKTtcblxuICAvLyBGbGF0dGVuIGhlYWRlcnNcbiAgY29uZmlnLmhlYWRlcnMgPSB1dGlscy5tZXJnZShcbiAgICBjb25maWcuaGVhZGVycy5jb21tb24gfHwge30sXG4gICAgY29uZmlnLmhlYWRlcnNbY29uZmlnLm1ldGhvZF0gfHwge30sXG4gICAgY29uZmlnLmhlYWRlcnNcbiAgKTtcblxuICB1dGlscy5mb3JFYWNoKFxuICAgIFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJywgJ2NvbW1vbiddLFxuICAgIGZ1bmN0aW9uIGNsZWFuSGVhZGVyQ29uZmlnKG1ldGhvZCkge1xuICAgICAgZGVsZXRlIGNvbmZpZy5oZWFkZXJzW21ldGhvZF07XG4gICAgfVxuICApO1xuXG4gIHZhciBhZGFwdGVyID0gY29uZmlnLmFkYXB0ZXIgfHwgZGVmYXVsdHMuYWRhcHRlcjtcblxuICByZXR1cm4gYWRhcHRlcihjb25maWcpLnRoZW4oZnVuY3Rpb24gb25BZGFwdGVyUmVzb2x1dGlvbihyZXNwb25zZSkge1xuICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAgIC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhXG4gICAgcmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEuY2FsbChcbiAgICAgIGNvbmZpZyxcbiAgICAgIHJlc3BvbnNlLmRhdGEsXG4gICAgICByZXNwb25zZS5oZWFkZXJzLFxuICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlXG4gICAgKTtcblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfSwgZnVuY3Rpb24gb25BZGFwdGVyUmVqZWN0aW9uKHJlYXNvbikge1xuICAgIGlmICghaXNDYW5jZWwocmVhc29uKSkge1xuICAgICAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gICAgICAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgZGF0YVxuICAgICAgaWYgKHJlYXNvbiAmJiByZWFzb24ucmVzcG9uc2UpIHtcbiAgICAgICAgcmVhc29uLnJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhLmNhbGwoXG4gICAgICAgICAgY29uZmlnLFxuICAgICAgICAgIHJlYXNvbi5yZXNwb25zZS5kYXRhLFxuICAgICAgICAgIHJlYXNvbi5yZXNwb25zZS5oZWFkZXJzLFxuICAgICAgICAgIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZWFzb24pO1xuICB9KTtcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xuXG4vKipcbiAqIENvbmZpZy1zcGVjaWZpYyBtZXJnZS1mdW5jdGlvbiB3aGljaCBjcmVhdGVzIGEgbmV3IGNvbmZpZy1vYmplY3RcbiAqIGJ5IG1lcmdpbmcgdHdvIGNvbmZpZ3VyYXRpb24gb2JqZWN0cyB0b2dldGhlci5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnMVxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZzJcbiAqIEByZXR1cm5zIHtPYmplY3R9IE5ldyBvYmplY3QgcmVzdWx0aW5nIGZyb20gbWVyZ2luZyBjb25maWcyIHRvIGNvbmZpZzFcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBtZXJnZUNvbmZpZyhjb25maWcxLCBjb25maWcyKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICBjb25maWcyID0gY29uZmlnMiB8fCB7fTtcbiAgdmFyIGNvbmZpZyA9IHt9O1xuXG4gIGZ1bmN0aW9uIGdldE1lcmdlZFZhbHVlKHRhcmdldCwgc291cmNlKSB7XG4gICAgaWYgKHV0aWxzLmlzUGxhaW5PYmplY3QodGFyZ2V0KSAmJiB1dGlscy5pc1BsYWluT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgIHJldHVybiB1dGlscy5tZXJnZSh0YXJnZXQsIHNvdXJjZSk7XG4gICAgfSBlbHNlIGlmICh1dGlscy5pc1BsYWluT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgIHJldHVybiB1dGlscy5tZXJnZSh7fSwgc291cmNlKTtcbiAgICB9IGVsc2UgaWYgKHV0aWxzLmlzQXJyYXkoc291cmNlKSkge1xuICAgICAgcmV0dXJuIHNvdXJjZS5zbGljZSgpO1xuICAgIH1cbiAgICByZXR1cm4gc291cmNlO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIGZ1bmN0aW9uIG1lcmdlRGVlcFByb3BlcnRpZXMocHJvcCkge1xuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoY29uZmlnMltwcm9wXSkpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZShjb25maWcxW3Byb3BdLCBjb25maWcyW3Byb3BdKTtcbiAgICB9IGVsc2UgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChjb25maWcxW3Byb3BdKSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgY29uZmlnMVtwcm9wXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIGZ1bmN0aW9uIHZhbHVlRnJvbUNvbmZpZzIocHJvcCkge1xuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoY29uZmlnMltwcm9wXSkpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZSh1bmRlZmluZWQsIGNvbmZpZzJbcHJvcF0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICBmdW5jdGlvbiBkZWZhdWx0VG9Db25maWcyKHByb3ApIHtcbiAgICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGNvbmZpZzJbcHJvcF0pKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBjb25maWcyW3Byb3BdKTtcbiAgICB9IGVsc2UgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChjb25maWcxW3Byb3BdKSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgY29uZmlnMVtwcm9wXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIGZ1bmN0aW9uIG1lcmdlRGlyZWN0S2V5cyhwcm9wKSB7XG4gICAgaWYgKHByb3AgaW4gY29uZmlnMikge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKGNvbmZpZzFbcHJvcF0sIGNvbmZpZzJbcHJvcF0pO1xuICAgIH0gZWxzZSBpZiAocHJvcCBpbiBjb25maWcxKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBjb25maWcxW3Byb3BdKTtcbiAgICB9XG4gIH1cblxuICB2YXIgbWVyZ2VNYXAgPSB7XG4gICAgJ3VybCc6IHZhbHVlRnJvbUNvbmZpZzIsXG4gICAgJ21ldGhvZCc6IHZhbHVlRnJvbUNvbmZpZzIsXG4gICAgJ2RhdGEnOiB2YWx1ZUZyb21Db25maWcyLFxuICAgICdiYXNlVVJMJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAndHJhbnNmb3JtUmVxdWVzdCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3RyYW5zZm9ybVJlc3BvbnNlJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAncGFyYW1zU2VyaWFsaXplcic6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3RpbWVvdXQnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICd0aW1lb3V0TWVzc2FnZSc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3dpdGhDcmVkZW50aWFscyc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2FkYXB0ZXInOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdyZXNwb25zZVR5cGUnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICd4c3JmQ29va2llTmFtZSc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3hzcmZIZWFkZXJOYW1lJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnb25VcGxvYWRQcm9ncmVzcyc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ29uRG93bmxvYWRQcm9ncmVzcyc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2RlY29tcHJlc3MnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdtYXhDb250ZW50TGVuZ3RoJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnbWF4Qm9keUxlbmd0aCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3RyYW5zcG9ydCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2h0dHBBZ2VudCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2h0dHBzQWdlbnQnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdjYW5jZWxUb2tlbic6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3NvY2tldFBhdGgnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdyZXNwb25zZUVuY29kaW5nJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAndmFsaWRhdGVTdGF0dXMnOiBtZXJnZURpcmVjdEtleXNcbiAgfTtcblxuICB1dGlscy5mb3JFYWNoKE9iamVjdC5rZXlzKGNvbmZpZzEpLmNvbmNhdChPYmplY3Qua2V5cyhjb25maWcyKSksIGZ1bmN0aW9uIGNvbXB1dGVDb25maWdWYWx1ZShwcm9wKSB7XG4gICAgdmFyIG1lcmdlID0gbWVyZ2VNYXBbcHJvcF0gfHwgbWVyZ2VEZWVwUHJvcGVydGllcztcbiAgICB2YXIgY29uZmlnVmFsdWUgPSBtZXJnZShwcm9wKTtcbiAgICAodXRpbHMuaXNVbmRlZmluZWQoY29uZmlnVmFsdWUpICYmIG1lcmdlICE9PSBtZXJnZURpcmVjdEtleXMpIHx8IChjb25maWdbcHJvcF0gPSBjb25maWdWYWx1ZSk7XG4gIH0pO1xuXG4gIHJldHVybiBjb25maWc7XG59O1xuIiwgIm1vZHVsZS5leHBvcnRzID0ge1xuICBcInZlcnNpb25cIjogXCIwLjI0LjBcIlxufTsiLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgVkVSU0lPTiA9IHJlcXVpcmUoJy4uL2Vudi9kYXRhJykudmVyc2lvbjtcblxudmFyIHZhbGlkYXRvcnMgPSB7fTtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcblsnb2JqZWN0JywgJ2Jvb2xlYW4nLCAnbnVtYmVyJywgJ2Z1bmN0aW9uJywgJ3N0cmluZycsICdzeW1ib2wnXS5mb3JFYWNoKGZ1bmN0aW9uKHR5cGUsIGkpIHtcbiAgdmFsaWRhdG9yc1t0eXBlXSA9IGZ1bmN0aW9uIHZhbGlkYXRvcih0aGluZykge1xuICAgIHJldHVybiB0eXBlb2YgdGhpbmcgPT09IHR5cGUgfHwgJ2EnICsgKGkgPCAxID8gJ24gJyA6ICcgJykgKyB0eXBlO1xuICB9O1xufSk7XG5cbnZhciBkZXByZWNhdGVkV2FybmluZ3MgPSB7fTtcblxuLyoqXG4gKiBUcmFuc2l0aW9uYWwgb3B0aW9uIHZhbGlkYXRvclxuICogQHBhcmFtIHtmdW5jdGlvbnxib29sZWFuP30gdmFsaWRhdG9yIC0gc2V0IHRvIGZhbHNlIGlmIHRoZSB0cmFuc2l0aW9uYWwgb3B0aW9uIGhhcyBiZWVuIHJlbW92ZWRcbiAqIEBwYXJhbSB7c3RyaW5nP30gdmVyc2lvbiAtIGRlcHJlY2F0ZWQgdmVyc2lvbiAvIHJlbW92ZWQgc2luY2UgdmVyc2lvblxuICogQHBhcmFtIHtzdHJpbmc/fSBtZXNzYWdlIC0gc29tZSBtZXNzYWdlIHdpdGggYWRkaXRpb25hbCBpbmZvXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb259XG4gKi9cbnZhbGlkYXRvcnMudHJhbnNpdGlvbmFsID0gZnVuY3Rpb24gdHJhbnNpdGlvbmFsKHZhbGlkYXRvciwgdmVyc2lvbiwgbWVzc2FnZSkge1xuICBmdW5jdGlvbiBmb3JtYXRNZXNzYWdlKG9wdCwgZGVzYykge1xuICAgIHJldHVybiAnW0F4aW9zIHYnICsgVkVSU0lPTiArICddIFRyYW5zaXRpb25hbCBvcHRpb24gXFwnJyArIG9wdCArICdcXCcnICsgZGVzYyArIChtZXNzYWdlID8gJy4gJyArIG1lc3NhZ2UgOiAnJyk7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICByZXR1cm4gZnVuY3Rpb24odmFsdWUsIG9wdCwgb3B0cykge1xuICAgIGlmICh2YWxpZGF0b3IgPT09IGZhbHNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZm9ybWF0TWVzc2FnZShvcHQsICcgaGFzIGJlZW4gcmVtb3ZlZCcgKyAodmVyc2lvbiA/ICcgaW4gJyArIHZlcnNpb24gOiAnJykpKTtcbiAgICB9XG5cbiAgICBpZiAodmVyc2lvbiAmJiAhZGVwcmVjYXRlZFdhcm5pbmdzW29wdF0pIHtcbiAgICAgIGRlcHJlY2F0ZWRXYXJuaW5nc1tvcHRdID0gdHJ1ZTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGZvcm1hdE1lc3NhZ2UoXG4gICAgICAgICAgb3B0LFxuICAgICAgICAgICcgaGFzIGJlZW4gZGVwcmVjYXRlZCBzaW5jZSB2JyArIHZlcnNpb24gKyAnIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5lYXIgZnV0dXJlJ1xuICAgICAgICApXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB2YWxpZGF0b3IgPyB2YWxpZGF0b3IodmFsdWUsIG9wdCwgb3B0cykgOiB0cnVlO1xuICB9O1xufTtcblxuLyoqXG4gKiBBc3NlcnQgb2JqZWN0J3MgcHJvcGVydGllcyB0eXBlXG4gKiBAcGFyYW0ge29iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtvYmplY3R9IHNjaGVtYVxuICogQHBhcmFtIHtib29sZWFuP30gYWxsb3dVbmtub3duXG4gKi9cblxuZnVuY3Rpb24gYXNzZXJ0T3B0aW9ucyhvcHRpb25zLCBzY2hlbWEsIGFsbG93VW5rbm93bikge1xuICBpZiAodHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9ucyBtdXN0IGJlIGFuIG9iamVjdCcpO1xuICB9XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XG4gIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gIHdoaWxlIChpLS0gPiAwKSB7XG4gICAgdmFyIG9wdCA9IGtleXNbaV07XG4gICAgdmFyIHZhbGlkYXRvciA9IHNjaGVtYVtvcHRdO1xuICAgIGlmICh2YWxpZGF0b3IpIHtcbiAgICAgIHZhciB2YWx1ZSA9IG9wdGlvbnNbb3B0XTtcbiAgICAgIHZhciByZXN1bHQgPSB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbGlkYXRvcih2YWx1ZSwgb3B0LCBvcHRpb25zKTtcbiAgICAgIGlmIChyZXN1bHQgIT09IHRydWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9uICcgKyBvcHQgKyAnIG11c3QgYmUgJyArIHJlc3VsdCk7XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGFsbG93VW5rbm93biAhPT0gdHJ1ZSkge1xuICAgICAgdGhyb3cgRXJyb3IoJ1Vua25vd24gb3B0aW9uICcgKyBvcHQpO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYXNzZXJ0T3B0aW9uczogYXNzZXJ0T3B0aW9ucyxcbiAgdmFsaWRhdG9yczogdmFsaWRhdG9yc1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciBidWlsZFVSTCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvYnVpbGRVUkwnKTtcbnZhciBJbnRlcmNlcHRvck1hbmFnZXIgPSByZXF1aXJlKCcuL0ludGVyY2VwdG9yTWFuYWdlcicpO1xudmFyIGRpc3BhdGNoUmVxdWVzdCA9IHJlcXVpcmUoJy4vZGlzcGF0Y2hSZXF1ZXN0Jyk7XG52YXIgbWVyZ2VDb25maWcgPSByZXF1aXJlKCcuL21lcmdlQ29uZmlnJyk7XG52YXIgdmFsaWRhdG9yID0gcmVxdWlyZSgnLi4vaGVscGVycy92YWxpZGF0b3InKTtcblxudmFyIHZhbGlkYXRvcnMgPSB2YWxpZGF0b3IudmFsaWRhdG9ycztcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIEF4aW9zXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGluc3RhbmNlQ29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIEF4aW9zKGluc3RhbmNlQ29uZmlnKSB7XG4gIHRoaXMuZGVmYXVsdHMgPSBpbnN0YW5jZUNvbmZpZztcbiAgdGhpcy5pbnRlcmNlcHRvcnMgPSB7XG4gICAgcmVxdWVzdDogbmV3IEludGVyY2VwdG9yTWFuYWdlcigpLFxuICAgIHJlc3BvbnNlOiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKClcbiAgfTtcbn1cblxuLyoqXG4gKiBEaXNwYXRjaCBhIHJlcXVlc3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcgc3BlY2lmaWMgZm9yIHRoaXMgcmVxdWVzdCAobWVyZ2VkIHdpdGggdGhpcy5kZWZhdWx0cylcbiAqL1xuQXhpb3MucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiByZXF1ZXN0KGNvbmZpZykge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgLy8gQWxsb3cgZm9yIGF4aW9zKCdleGFtcGxlL3VybCdbLCBjb25maWddKSBhIGxhIGZldGNoIEFQSVxuICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25maWcgPSBhcmd1bWVudHNbMV0gfHwge307XG4gICAgY29uZmlnLnVybCA9IGFyZ3VtZW50c1swXTtcbiAgfSBlbHNlIHtcbiAgICBjb25maWcgPSBjb25maWcgfHwge307XG4gIH1cblxuICBjb25maWcgPSBtZXJnZUNvbmZpZyh0aGlzLmRlZmF1bHRzLCBjb25maWcpO1xuXG4gIC8vIFNldCBjb25maWcubWV0aG9kXG4gIGlmIChjb25maWcubWV0aG9kKSB7XG4gICAgY29uZmlnLm1ldGhvZCA9IGNvbmZpZy5tZXRob2QudG9Mb3dlckNhc2UoKTtcbiAgfSBlbHNlIGlmICh0aGlzLmRlZmF1bHRzLm1ldGhvZCkge1xuICAgIGNvbmZpZy5tZXRob2QgPSB0aGlzLmRlZmF1bHRzLm1ldGhvZC50b0xvd2VyQ2FzZSgpO1xuICB9IGVsc2Uge1xuICAgIGNvbmZpZy5tZXRob2QgPSAnZ2V0JztcbiAgfVxuXG4gIHZhciB0cmFuc2l0aW9uYWwgPSBjb25maWcudHJhbnNpdGlvbmFsO1xuXG4gIGlmICh0cmFuc2l0aW9uYWwgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhbGlkYXRvci5hc3NlcnRPcHRpb25zKHRyYW5zaXRpb25hbCwge1xuICAgICAgc2lsZW50SlNPTlBhcnNpbmc6IHZhbGlkYXRvcnMudHJhbnNpdGlvbmFsKHZhbGlkYXRvcnMuYm9vbGVhbiksXG4gICAgICBmb3JjZWRKU09OUGFyc2luZzogdmFsaWRhdG9ycy50cmFuc2l0aW9uYWwodmFsaWRhdG9ycy5ib29sZWFuKSxcbiAgICAgIGNsYXJpZnlUaW1lb3V0RXJyb3I6IHZhbGlkYXRvcnMudHJhbnNpdGlvbmFsKHZhbGlkYXRvcnMuYm9vbGVhbilcbiAgICB9LCBmYWxzZSk7XG4gIH1cblxuICAvLyBmaWx0ZXIgb3V0IHNraXBwZWQgaW50ZXJjZXB0b3JzXG4gIHZhciByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbiA9IFtdO1xuICB2YXIgc3luY2hyb25vdXNSZXF1ZXN0SW50ZXJjZXB0b3JzID0gdHJ1ZTtcbiAgdGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKGZ1bmN0aW9uIHVuc2hpZnRSZXF1ZXN0SW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgaWYgKHR5cGVvZiBpbnRlcmNlcHRvci5ydW5XaGVuID09PSAnZnVuY3Rpb24nICYmIGludGVyY2VwdG9yLnJ1bldoZW4oY29uZmlnKSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzeW5jaHJvbm91c1JlcXVlc3RJbnRlcmNlcHRvcnMgPSBzeW5jaHJvbm91c1JlcXVlc3RJbnRlcmNlcHRvcnMgJiYgaW50ZXJjZXB0b3Iuc3luY2hyb25vdXM7XG5cbiAgICByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbi51bnNoaWZ0KGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpO1xuICB9KTtcblxuICB2YXIgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluID0gW107XG4gIHRoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24gcHVzaFJlc3BvbnNlSW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluLnB1c2goaW50ZXJjZXB0b3IuZnVsZmlsbGVkLCBpbnRlcmNlcHRvci5yZWplY3RlZCk7XG4gIH0pO1xuXG4gIHZhciBwcm9taXNlO1xuXG4gIGlmICghc3luY2hyb25vdXNSZXF1ZXN0SW50ZXJjZXB0b3JzKSB7XG4gICAgdmFyIGNoYWluID0gW2Rpc3BhdGNoUmVxdWVzdCwgdW5kZWZpbmVkXTtcblxuICAgIEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KGNoYWluLCByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbik7XG4gICAgY2hhaW4gPSBjaGFpbi5jb25jYXQocmVzcG9uc2VJbnRlcmNlcHRvckNoYWluKTtcblxuICAgIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoY29uZmlnKTtcbiAgICB3aGlsZSAoY2hhaW4ubGVuZ3RoKSB7XG4gICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKGNoYWluLnNoaWZ0KCksIGNoYWluLnNoaWZ0KCkpO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cblxuICB2YXIgbmV3Q29uZmlnID0gY29uZmlnO1xuICB3aGlsZSAocmVxdWVzdEludGVyY2VwdG9yQ2hhaW4ubGVuZ3RoKSB7XG4gICAgdmFyIG9uRnVsZmlsbGVkID0gcmVxdWVzdEludGVyY2VwdG9yQ2hhaW4uc2hpZnQoKTtcbiAgICB2YXIgb25SZWplY3RlZCA9IHJlcXVlc3RJbnRlcmNlcHRvckNoYWluLnNoaWZ0KCk7XG4gICAgdHJ5IHtcbiAgICAgIG5ld0NvbmZpZyA9IG9uRnVsZmlsbGVkKG5ld0NvbmZpZyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG9uUmVqZWN0ZWQoZXJyb3IpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgdHJ5IHtcbiAgICBwcm9taXNlID0gZGlzcGF0Y2hSZXF1ZXN0KG5ld0NvbmZpZyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgfVxuXG4gIHdoaWxlIChyZXNwb25zZUludGVyY2VwdG9yQ2hhaW4ubGVuZ3RoKSB7XG4gICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihyZXNwb25zZUludGVyY2VwdG9yQ2hhaW4uc2hpZnQoKSwgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluLnNoaWZ0KCkpO1xuICB9XG5cbiAgcmV0dXJuIHByb21pc2U7XG59O1xuXG5BeGlvcy5wcm90b3R5cGUuZ2V0VXJpID0gZnVuY3Rpb24gZ2V0VXJpKGNvbmZpZykge1xuICBjb25maWcgPSBtZXJnZUNvbmZpZyh0aGlzLmRlZmF1bHRzLCBjb25maWcpO1xuICByZXR1cm4gYnVpbGRVUkwoY29uZmlnLnVybCwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpLnJlcGxhY2UoL15cXD8vLCAnJyk7XG59O1xuXG4vLyBQcm92aWRlIGFsaWFzZXMgZm9yIHN1cHBvcnRlZCByZXF1ZXN0IG1ldGhvZHNcbnV0aWxzLmZvckVhY2goWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnLCAnb3B0aW9ucyddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kTm9EYXRhKG1ldGhvZCkge1xuICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHVybCwgY29uZmlnKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChtZXJnZUNvbmZpZyhjb25maWcgfHwge30sIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgdXJsOiB1cmwsXG4gICAgICBkYXRhOiAoY29uZmlnIHx8IHt9KS5kYXRhXG4gICAgfSkpO1xuICB9O1xufSk7XG5cbnV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7XG4gIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovXG4gIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odXJsLCBkYXRhLCBjb25maWcpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KG1lcmdlQ29uZmlnKGNvbmZpZyB8fCB7fSwge1xuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICB1cmw6IHVybCxcbiAgICAgIGRhdGE6IGRhdGFcbiAgICB9KSk7XG4gIH07XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBBeGlvcztcbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciBDYW5jZWwgPSByZXF1aXJlKCcuL0NhbmNlbCcpO1xuXG4vKipcbiAqIEEgYENhbmNlbFRva2VuYCBpcyBhbiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byByZXF1ZXN0IGNhbmNlbGxhdGlvbiBvZiBhbiBvcGVyYXRpb24uXG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBleGVjdXRvciBUaGUgZXhlY3V0b3IgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIENhbmNlbFRva2VuKGV4ZWN1dG9yKSB7XG4gIGlmICh0eXBlb2YgZXhlY3V0b3IgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdleGVjdXRvciBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG4gIH1cblxuICB2YXIgcmVzb2x2ZVByb21pc2U7XG5cbiAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gcHJvbWlzZUV4ZWN1dG9yKHJlc29sdmUpIHtcbiAgICByZXNvbHZlUHJvbWlzZSA9IHJlc29sdmU7XG4gIH0pO1xuXG4gIHZhciB0b2tlbiA9IHRoaXM7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgdGhpcy5wcm9taXNlLnRoZW4oZnVuY3Rpb24oY2FuY2VsKSB7XG4gICAgaWYgKCF0b2tlbi5fbGlzdGVuZXJzKSByZXR1cm47XG5cbiAgICB2YXIgaTtcbiAgICB2YXIgbCA9IHRva2VuLl9saXN0ZW5lcnMubGVuZ3RoO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgdG9rZW4uX2xpc3RlbmVyc1tpXShjYW5jZWwpO1xuICAgIH1cbiAgICB0b2tlbi5fbGlzdGVuZXJzID0gbnVsbDtcbiAgfSk7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgdGhpcy5wcm9taXNlLnRoZW4gPSBmdW5jdGlvbihvbmZ1bGZpbGxlZCkge1xuICAgIHZhciBfcmVzb2x2ZTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICAgICAgdG9rZW4uc3Vic2NyaWJlKHJlc29sdmUpO1xuICAgICAgX3Jlc29sdmUgPSByZXNvbHZlO1xuICAgIH0pLnRoZW4ob25mdWxmaWxsZWQpO1xuXG4gICAgcHJvbWlzZS5jYW5jZWwgPSBmdW5jdGlvbiByZWplY3QoKSB7XG4gICAgICB0b2tlbi51bnN1YnNjcmliZShfcmVzb2x2ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9O1xuXG4gIGV4ZWN1dG9yKGZ1bmN0aW9uIGNhbmNlbChtZXNzYWdlKSB7XG4gICAgaWYgKHRva2VuLnJlYXNvbikge1xuICAgICAgLy8gQ2FuY2VsbGF0aW9uIGhhcyBhbHJlYWR5IGJlZW4gcmVxdWVzdGVkXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdG9rZW4ucmVhc29uID0gbmV3IENhbmNlbChtZXNzYWdlKTtcbiAgICByZXNvbHZlUHJvbWlzZSh0b2tlbi5yZWFzb24pO1xuICB9KTtcbn1cblxuLyoqXG4gKiBUaHJvd3MgYSBgQ2FuY2VsYCBpZiBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLlxuICovXG5DYW5jZWxUb2tlbi5wcm90b3R5cGUudGhyb3dJZlJlcXVlc3RlZCA9IGZ1bmN0aW9uIHRocm93SWZSZXF1ZXN0ZWQoKSB7XG4gIGlmICh0aGlzLnJlYXNvbikge1xuICAgIHRocm93IHRoaXMucmVhc29uO1xuICB9XG59O1xuXG4vKipcbiAqIFN1YnNjcmliZSB0byB0aGUgY2FuY2VsIHNpZ25hbFxuICovXG5cbkNhbmNlbFRva2VuLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiBzdWJzY3JpYmUobGlzdGVuZXIpIHtcbiAgaWYgKHRoaXMucmVhc29uKSB7XG4gICAgbGlzdGVuZXIodGhpcy5yZWFzb24pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICh0aGlzLl9saXN0ZW5lcnMpIHtcbiAgICB0aGlzLl9saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5fbGlzdGVuZXJzID0gW2xpc3RlbmVyXTtcbiAgfVxufTtcblxuLyoqXG4gKiBVbnN1YnNjcmliZSBmcm9tIHRoZSBjYW5jZWwgc2lnbmFsXG4gKi9cblxuQ2FuY2VsVG9rZW4ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gdW5zdWJzY3JpYmUobGlzdGVuZXIpIHtcbiAgaWYgKCF0aGlzLl9saXN0ZW5lcnMpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGluZGV4ID0gdGhpcy5fbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgdGhpcy5fbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gIH1cbn07XG5cbi8qKlxuICogUmV0dXJucyBhbiBvYmplY3QgdGhhdCBjb250YWlucyBhIG5ldyBgQ2FuY2VsVG9rZW5gIGFuZCBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gY2FsbGVkLFxuICogY2FuY2VscyB0aGUgYENhbmNlbFRva2VuYC5cbiAqL1xuQ2FuY2VsVG9rZW4uc291cmNlID0gZnVuY3Rpb24gc291cmNlKCkge1xuICB2YXIgY2FuY2VsO1xuICB2YXIgdG9rZW4gPSBuZXcgQ2FuY2VsVG9rZW4oZnVuY3Rpb24gZXhlY3V0b3IoYykge1xuICAgIGNhbmNlbCA9IGM7XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIHRva2VuOiB0b2tlbixcbiAgICBjYW5jZWw6IGNhbmNlbFxuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYW5jZWxUb2tlbjtcbiIsICIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogU3ludGFjdGljIHN1Z2FyIGZvciBpbnZva2luZyBhIGZ1bmN0aW9uIGFuZCBleHBhbmRpbmcgYW4gYXJyYXkgZm9yIGFyZ3VtZW50cy5cbiAqXG4gKiBDb21tb24gdXNlIGNhc2Ugd291bGQgYmUgdG8gdXNlIGBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHlgLlxuICpcbiAqICBgYGBqc1xuICogIGZ1bmN0aW9uIGYoeCwgeSwgeikge31cbiAqICB2YXIgYXJncyA9IFsxLCAyLCAzXTtcbiAqICBmLmFwcGx5KG51bGwsIGFyZ3MpO1xuICogIGBgYFxuICpcbiAqIFdpdGggYHNwcmVhZGAgdGhpcyBleGFtcGxlIGNhbiBiZSByZS13cml0dGVuLlxuICpcbiAqICBgYGBqc1xuICogIHNwcmVhZChmdW5jdGlvbih4LCB5LCB6KSB7fSkoWzEsIDIsIDNdKTtcbiAqICBgYGBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNwcmVhZChjYWxsYmFjaykge1xuICByZXR1cm4gZnVuY3Rpb24gd3JhcChhcnIpIHtcbiAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkobnVsbCwgYXJyKTtcbiAgfTtcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciB0aGUgcGF5bG9hZCBpcyBhbiBlcnJvciB0aHJvd24gYnkgQXhpb3NcbiAqXG4gKiBAcGFyYW0geyp9IHBheWxvYWQgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBwYXlsb2FkIGlzIGFuIGVycm9yIHRocm93biBieSBBeGlvcywgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNBeGlvc0Vycm9yKHBheWxvYWQpIHtcbiAgcmV0dXJuICh0eXBlb2YgcGF5bG9hZCA9PT0gJ29iamVjdCcpICYmIChwYXlsb2FkLmlzQXhpb3NFcnJvciA9PT0gdHJ1ZSk7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xudmFyIGJpbmQgPSByZXF1aXJlKCcuL2hlbHBlcnMvYmluZCcpO1xudmFyIEF4aW9zID0gcmVxdWlyZSgnLi9jb3JlL0F4aW9zJyk7XG52YXIgbWVyZ2VDb25maWcgPSByZXF1aXJlKCcuL2NvcmUvbWVyZ2VDb25maWcnKTtcbnZhciBkZWZhdWx0cyA9IHJlcXVpcmUoJy4vZGVmYXVsdHMnKTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgQXhpb3NcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZGVmYXVsdENvbmZpZyBUaGUgZGVmYXVsdCBjb25maWcgZm9yIHRoZSBpbnN0YW5jZVxuICogQHJldHVybiB7QXhpb3N9IEEgbmV3IGluc3RhbmNlIG9mIEF4aW9zXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlKGRlZmF1bHRDb25maWcpIHtcbiAgdmFyIGNvbnRleHQgPSBuZXcgQXhpb3MoZGVmYXVsdENvbmZpZyk7XG4gIHZhciBpbnN0YW5jZSA9IGJpbmQoQXhpb3MucHJvdG90eXBlLnJlcXVlc3QsIGNvbnRleHQpO1xuXG4gIC8vIENvcHkgYXhpb3MucHJvdG90eXBlIHRvIGluc3RhbmNlXG4gIHV0aWxzLmV4dGVuZChpbnN0YW5jZSwgQXhpb3MucHJvdG90eXBlLCBjb250ZXh0KTtcblxuICAvLyBDb3B5IGNvbnRleHQgdG8gaW5zdGFuY2VcbiAgdXRpbHMuZXh0ZW5kKGluc3RhbmNlLCBjb250ZXh0KTtcblxuICAvLyBGYWN0b3J5IGZvciBjcmVhdGluZyBuZXcgaW5zdGFuY2VzXG4gIGluc3RhbmNlLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShpbnN0YW5jZUNvbmZpZykge1xuICAgIHJldHVybiBjcmVhdGVJbnN0YW5jZShtZXJnZUNvbmZpZyhkZWZhdWx0Q29uZmlnLCBpbnN0YW5jZUNvbmZpZykpO1xuICB9O1xuXG4gIHJldHVybiBpbnN0YW5jZTtcbn1cblxuLy8gQ3JlYXRlIHRoZSBkZWZhdWx0IGluc3RhbmNlIHRvIGJlIGV4cG9ydGVkXG52YXIgYXhpb3MgPSBjcmVhdGVJbnN0YW5jZShkZWZhdWx0cyk7XG5cbi8vIEV4cG9zZSBBeGlvcyBjbGFzcyB0byBhbGxvdyBjbGFzcyBpbmhlcml0YW5jZVxuYXhpb3MuQXhpb3MgPSBBeGlvcztcblxuLy8gRXhwb3NlIENhbmNlbCAmIENhbmNlbFRva2VuXG5heGlvcy5DYW5jZWwgPSByZXF1aXJlKCcuL2NhbmNlbC9DYW5jZWwnKTtcbmF4aW9zLkNhbmNlbFRva2VuID0gcmVxdWlyZSgnLi9jYW5jZWwvQ2FuY2VsVG9rZW4nKTtcbmF4aW9zLmlzQ2FuY2VsID0gcmVxdWlyZSgnLi9jYW5jZWwvaXNDYW5jZWwnKTtcbmF4aW9zLlZFUlNJT04gPSByZXF1aXJlKCcuL2Vudi9kYXRhJykudmVyc2lvbjtcblxuLy8gRXhwb3NlIGFsbC9zcHJlYWRcbmF4aW9zLmFsbCA9IGZ1bmN0aW9uIGFsbChwcm9taXNlcykge1xuICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xufTtcbmF4aW9zLnNwcmVhZCA9IHJlcXVpcmUoJy4vaGVscGVycy9zcHJlYWQnKTtcblxuLy8gRXhwb3NlIGlzQXhpb3NFcnJvclxuYXhpb3MuaXNBeGlvc0Vycm9yID0gcmVxdWlyZSgnLi9oZWxwZXJzL2lzQXhpb3NFcnJvcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGF4aW9zO1xuXG4vLyBBbGxvdyB1c2Ugb2YgZGVmYXVsdCBpbXBvcnQgc3ludGF4IGluIFR5cGVTY3JpcHRcbm1vZHVsZS5leHBvcnRzLmRlZmF1bHQgPSBheGlvcztcbiIsICJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL2F4aW9zJyk7IiwgImltcG9ydCB7IFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgQXBwLCBTZXR0aW5nLCBURmlsZSwgTm90aWNlLCBNb2RhbCwgVGV4dENvbXBvbmVudCwgRHJvcGRvd25Db21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBFbWJlZGRpbmdNYW5hZ2VyIH0gZnJvbSAnLi9zcmMvZW1iZWRkaW5ncyc7XG5pbXBvcnQgeyBEYXRhYmFzZU1hbmFnZXIgfSBmcm9tICcuL3NyYy9kYic7XG5pbXBvcnQgeyBBdG9taXplciB9IGZyb20gJy4vc3JjL2F0b21pemVyJztcbmltcG9ydCB7IFRpdGxlU3VnZ2VzdGVyIH0gZnJvbSAnLi9zcmMvdGl0bGVTdWdnZXN0ZXInO1xuaW1wb3J0IHsgVmF1bHRRdWVyaWVyIH0gZnJvbSAnLi9zcmMvdmF1bHRRdWVyaWVyJztcbmltcG9ydCB7IE5MUE1hbmFnZXIgfSBmcm9tICcuL3NyYy9ubHBNYW5hZ2VyJztcbmltcG9ydCB7IE1vZGVsTWFuYWdlciwgTW9kZWxQcm92aWRlciB9IGZyb20gJy4vc3JjL21vZGVsTWFuYWdlcic7XG5pbXBvcnQgeyBUZXh0Q2xlYW5lciB9IGZyb20gJy4vc3JjL3RleHRDbGVhbmVyJztcbmltcG9ydCB7IFRhZ1N1Z2dlc3RlciB9IGZyb20gJy4vc3JjL3RhZ1N1Z2dlc3Rlcic7XG5pbXBvcnQgeyBOb3RlUGF0aE1hbmFnZXIgfSBmcm9tICcuL3NyYy9ub3RlUGF0aE1hbmFnZXInO1xuaW1wb3J0IHsgQUlDaGF0IH0gZnJvbSAnLi9zcmMvYWlDaGF0JztcbmltcG9ydCAnLi9zdHlsZXMuY3NzJztcblxuaW50ZXJmYWNlIEFJUGx1Z2luU2V0dGluZ3Mge1xuICBvbGxhbWFFbmRwb2ludDogc3RyaW5nO1xuICBjYWNoZUV4cGlyYXRpb246IG51bWJlcjtcbiAgc2VsZWN0ZWRNb2RlbDogc3RyaW5nO1xuICBzZWxlY3RlZFByb3ZpZGVyOiBNb2RlbFByb3ZpZGVyO1xuICBub3RlUGF0aFJ1bGVzOiBOb3RlUGF0aFJ1bGVbXTtcbn1cblxuaW50ZXJmYWNlIE5vdGVQYXRoUnVsZSB7XG4gIGNyaXRlcmlhOiBzdHJpbmc7XG4gIHRhcmdldFBhdGg6IHN0cmluZztcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogQUlQbHVnaW5TZXR0aW5ncyA9IHtcbiAgb2xsYW1hRW5kcG9pbnQ6ICdodHRwOi8vbG9jYWxob3N0OjExNDM0JyxcbiAgY2FjaGVFeHBpcmF0aW9uOiAyNCAqIDYwICogNjAgKiAxMDAwLFxuICBzZWxlY3RlZE1vZGVsOiAnbGxhbWEyJyxcbiAgc2VsZWN0ZWRQcm92aWRlcjogTW9kZWxQcm92aWRlci5PbGxhbWEsXG4gIG5vdGVQYXRoUnVsZXM6IFtdLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQUlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5nczogQUlQbHVnaW5TZXR0aW5ncztcbiAgZW1iZWRkaW5nTWFuYWdlcjogRW1iZWRkaW5nTWFuYWdlcjtcbiAgZGF0YWJhc2VNYW5hZ2VyOiBEYXRhYmFzZU1hbmFnZXI7XG4gIGF0b21pemVyOiBBdG9taXplcjtcbiAgdGl0bGVTdWdnZXN0ZXI6IFRpdGxlU3VnZ2VzdGVyO1xuICB2YXVsdFF1ZXJpZXI6IFZhdWx0UXVlcmllcjtcbiAgbmxwTWFuYWdlcjogTkxQTWFuYWdlcjtcbiAgbW9kZWxNYW5hZ2VyOiBNb2RlbE1hbmFnZXI7XG4gIHRleHRDbGVhbmVyOiBUZXh0Q2xlYW5lcjtcbiAgdGFnU3VnZ2VzdGVyOiBUYWdTdWdnZXN0ZXI7XG4gIG5vdGVQYXRoTWFuYWdlcjogTm90ZVBhdGhNYW5hZ2VyO1xuICBhaUNoYXQ6IEFJQ2hhdDtcblxuICBhc3luYyBvbmxvYWQoKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgIC8vIEluaXRpYWxpemUgY29tcG9uZW50c1xuICAgIHRoaXMubW9kZWxNYW5hZ2VyID0gbmV3IE1vZGVsTWFuYWdlcih0aGlzLnNldHRpbmdzLnNlbGVjdGVkUHJvdmlkZXIsIHRoaXMuc2V0dGluZ3Muc2VsZWN0ZWRNb2RlbCwgdGhpcy5zZXR0aW5ncy5vbGxhbWFFbmRwb2ludCk7XG4gICAgdGhpcy5kYXRhYmFzZU1hbmFnZXIgPSBuZXcgRGF0YWJhc2VNYW5hZ2VyKCk7XG4gICAgYXdhaXQgdGhpcy5kYXRhYmFzZU1hbmFnZXIuaW5pdCgpO1xuICAgIHRoaXMuZW1iZWRkaW5nTWFuYWdlciA9IG5ldyBFbWJlZGRpbmdNYW5hZ2VyKHRoaXMuYXBwLnZhdWx0LCB0aGlzLm1vZGVsTWFuYWdlciwgdGhpcy5kYXRhYmFzZU1hbmFnZXIsIHRoaXMuc2V0dGluZ3MuY2FjaGVFeHBpcmF0aW9uKTtcbiAgICB0aGlzLmF0b21pemVyID0gbmV3IEF0b21pemVyKHRoaXMuYXBwLnZhdWx0LCB0aGlzLm1vZGVsTWFuYWdlcik7XG4gICAgdGhpcy52YXVsdFF1ZXJpZXIgPSBuZXcgVmF1bHRRdWVyaWVyKHRoaXMuYXBwLnZhdWx0LCB0aGlzLmVtYmVkZGluZ01hbmFnZXIsIHRoaXMuZGF0YWJhc2VNYW5hZ2VyKTtcbiAgICB0aGlzLnRpdGxlU3VnZ2VzdGVyID0gbmV3IFRpdGxlU3VnZ2VzdGVyKHRoaXMuYXBwLCB0aGlzLm1vZGVsTWFuYWdlciwgdGhpcy52YXVsdFF1ZXJpZXIpO1xuICAgIHRoaXMubmxwTWFuYWdlciA9IG5ldyBOTFBNYW5hZ2VyKHRoaXMubW9kZWxNYW5hZ2VyKTtcbiAgICB0aGlzLnRleHRDbGVhbmVyID0gbmV3IFRleHRDbGVhbmVyKHRoaXMubW9kZWxNYW5hZ2VyKTtcbiAgICB0aGlzLnRhZ1N1Z2dlc3RlciA9IG5ldyBUYWdTdWdnZXN0ZXIodGhpcy5tb2RlbE1hbmFnZXIpO1xuICAgIHRoaXMubm90ZVBhdGhNYW5hZ2VyID0gbmV3IE5vdGVQYXRoTWFuYWdlcih0aGlzLmFwcC52YXVsdCwgdGhpcy5zZXR0aW5ncy5ub3RlUGF0aFJ1bGVzKTtcbiAgICB0aGlzLmFpQ2hhdCA9IG5ldyBBSUNoYXQodGhpcy5hcHAsIHRoaXMubW9kZWxNYW5hZ2VyKTtcblxuICAgIC8vIEFkZCBzZXR0aW5ncyB0YWJcbiAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IEFJUGx1Z2luU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG4gICAgLy8gQWRkIHJpYmJvbiBpY29uIGZvciBBSSBDaGF0XG4gICAgdGhpcy5hZGRSaWJib25JY29uKCdtZXNzYWdlLXNxdWFyZScsICdBSSBDaGF0JywgKCkgPT4ge1xuICAgICAgdGhpcy5haUNoYXQub3BlbkNoYXRXaW5kb3coKTtcbiAgICB9KTtcblxuICAgIC8vIEFkZCBjb21tYW5kc1xuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3N1Z2dlc3QtYW5kLW1vdmUtbm90ZScsXG4gICAgICBuYW1lOiAnU3VnZ2VzdCBhbmQgTW92ZSBOb3RlJyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnN1Z2dlc3RBbmRNb3ZlTm90ZSgpLFxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnYXRvbWl6ZS1ub3RlJyxcbiAgICAgIG5hbWU6ICdBdG9taXplIEN1cnJlbnQgTm90ZScsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5hdG9taXplQ3VycmVudE5vdGUoKSxcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3N1Z2dlc3QtdGl0bGUnLFxuICAgICAgbmFtZTogJ1N1Z2dlc3QgVGl0bGUgZm9yIEN1cnJlbnQgTm90ZScsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5zdWdnZXN0VGl0bGVGb3JDdXJyZW50Tm90ZSgpLFxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnY2xlYW4tdGV4dCcsXG4gICAgICBuYW1lOiAnQ2xlYW4gVGV4dCBvZiBDdXJyZW50IE5vdGUnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuY2xlYW5UZXh0T2ZDdXJyZW50Tm90ZSgpLFxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnc3VnZ2VzdC10YWdzJyxcbiAgICAgIG5hbWU6ICdTdWdnZXN0IFRhZ3MgZm9yIEN1cnJlbnQgTm90ZScsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5zdWdnZXN0VGFnc0ZvckN1cnJlbnROb3RlKCksXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdvcGVuLWFpLWNoYXQnLFxuICAgICAgbmFtZTogJ09wZW4gQUkgQ2hhdCcsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5haUNoYXQub3BlbkNoYXRXaW5kb3coKSxcbiAgICB9KTtcblxuICAgIC8vIFJlZ2lzdGVyIGZvciBldmVudHNcbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICB0aGlzLmFwcC52YXVsdC5vbignbW9kaWZ5JywgKGZpbGU6IFRGaWxlKSA9PiB7XG4gICAgICAgIHRoaXMudXBkYXRlRW1iZWRkaW5nc0ZvckZpbGUoZmlsZSk7XG4gICAgICAgIHRoaXMubm90ZVBhdGhNYW5hZ2VyLmNoZWNrQW5kTW92ZU5vdGUoZmlsZSk7XG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBhc3luYyBzdWdnZXN0QW5kTW92ZU5vdGUoKSB7XG4gICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgaWYgKCFhY3RpdmVGaWxlKSB7XG4gICAgICBuZXcgTm90aWNlKCdObyBhY3RpdmUgZmlsZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHN1Z2dlc3RlZFBhdGggPSBhd2FpdCB0aGlzLm5vdGVQYXRoTWFuYWdlci5nZXRTdWdnZXN0ZWRQYXRoKGFjdGl2ZUZpbGUpO1xuICAgIGlmIChzdWdnZXN0ZWRQYXRoKSB7XG4gICAgICBjb25zdCBtb2RhbCA9IG5ldyBTdWdnZXN0TW92ZU5vdGVNb2RhbCh0aGlzLmFwcCwgYWN0aXZlRmlsZSwgc3VnZ2VzdGVkUGF0aCwgYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCB0aGlzLm5vdGVQYXRoTWFuYWdlci5tb3ZlTm90ZShhY3RpdmVGaWxlLCBzdWdnZXN0ZWRQYXRoKTtcbiAgICAgICAgbmV3IE5vdGljZShgTW92ZWQgbm90ZSB0byAke3N1Z2dlc3RlZFBhdGh9YCk7XG4gICAgICB9KTtcbiAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IE5vdGljZSgnTm8gc3VnZ2VzdGVkIHBhdGggZm9yIHRoaXMgbm90ZScpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGF0b21pemVDdXJyZW50Tm90ZSgpIHtcbiAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICBpZiAoIWFjdGl2ZUZpbGUpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBmaWxlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGF0b21pY05vdGVzID0gYXdhaXQgdGhpcy5hdG9taXplci5hdG9taXplTm90ZShhY3RpdmVGaWxlKTtcbiAgICAgIGZvciAoY29uc3Qgbm90ZSBvZiBhdG9taWNOb3Rlcykge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoYCR7bm90ZS50aXRsZX0ubWRgLCBub3RlLmNvbnRlbnQpO1xuICAgICAgfVxuICAgICAgbmV3IE5vdGljZShgQ3JlYXRlZCAke2F0b21pY05vdGVzLmxlbmd0aH0gYXRvbWljIG5vdGVzYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGF0b21pemluZyBub3RlOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ0ZhaWxlZCB0byBhdG9taXplIG5vdGUnKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzdWdnZXN0VGl0bGVGb3JDdXJyZW50Tm90ZSgpIHtcbiAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICBpZiAoIWFjdGl2ZUZpbGUpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBmaWxlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN1Z2dlc3RlZFRpdGxlID0gYXdhaXQgdGhpcy50aXRsZVN1Z2dlc3Rlci5zdWdnZXN0VGl0bGUoYWN0aXZlRmlsZSk7XG4gICAgICBjb25zdCBtb2RhbCA9IG5ldyBTdWdnZXN0VGl0bGVNb2RhbCh0aGlzLmFwcCwgYWN0aXZlRmlsZSwgc3VnZ2VzdGVkVGl0bGUsIGFzeW5jIChuZXdUaXRsZSkgPT4ge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGFjdGl2ZUZpbGUsIGAke25ld1RpdGxlfS5tZGApO1xuICAgICAgICBuZXcgTm90aWNlKGBSZW5hbWVkIG5vdGUgdG8gXCIke25ld1RpdGxlfVwiYCk7XG4gICAgICB9KTtcbiAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc3VnZ2VzdGluZyB0aXRsZTonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gc3VnZ2VzdCB0aXRsZScpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNsZWFuVGV4dE9mQ3VycmVudE5vdGUoKSB7XG4gICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgaWYgKCFhY3RpdmVGaWxlKSB7XG4gICAgICBuZXcgTm90aWNlKCdObyBhY3RpdmUgZmlsZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcbiAgICAgIGNvbnN0IGNsZWFuZWRUZXh0ID0gYXdhaXQgdGhpcy50ZXh0Q2xlYW5lci5jbGVhblRleHQoY29udGVudCk7XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoYWN0aXZlRmlsZSwgY2xlYW5lZFRleHQpO1xuICAgICAgbmV3IE5vdGljZSgnVGV4dCBjbGVhbmVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjbGVhbmluZyB0ZXh0OicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ0ZhaWxlZCB0byBjbGVhbiB0ZXh0Jyk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc3VnZ2VzdFRhZ3NGb3JDdXJyZW50Tm90ZSgpIHtcbiAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICBpZiAoIWFjdGl2ZUZpbGUpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBmaWxlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuICAgICAgY29uc3Qgc3VnZ2VzdGVkVGFncyA9IGF3YWl0IHRoaXMudGFnU3VnZ2VzdGVyLnN1Z2dlc3RUYWdzKGFjdGl2ZUZpbGUsIGNvbnRlbnQpO1xuICAgICAgY29uc3QgbW9kYWwgPSBuZXcgU3VnZ2VzdFRhZ3NNb2RhbCh0aGlzLmFwcCwgYWN0aXZlRmlsZSwgc3VnZ2VzdGVkVGFncywgYXN5bmMgKHNlbGVjdGVkVGFncykgPT4ge1xuICAgICAgICBhd2FpdCB0aGlzLmFkZFRhZ3NUb05vdGUoYWN0aXZlRmlsZSwgc2VsZWN0ZWRUYWdzKTtcbiAgICAgICAgbmV3IE5vdGljZShgQWRkZWQgJHtzZWxlY3RlZFRhZ3MubGVuZ3RofSB0YWdzIHRvIHRoZSBub3RlYCk7XG4gICAgICB9KTtcbiAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc3VnZ2VzdGluZyB0YWdzOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ0ZhaWxlZCB0byBzdWdnZXN0IHRhZ3MnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGFkZFRhZ3NUb05vdGUoZmlsZTogVEZpbGUsIHRhZ3M6IHN0cmluZ1tdKSB7XG4gICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgY29uc3QgZnJvbnRtYXR0ZXIgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgbGV0IG5ld0NvbnRlbnQgPSBjb250ZW50O1xuXG4gICAgaWYgKGZyb250bWF0dGVyKSB7XG4gICAgICBjb25zdCBleGlzdGluZ1RhZ3MgPSBmcm9udG1hdHRlci50YWdzIHx8IFtdO1xuICAgICAgY29uc3QgdXBkYXRlZFRhZ3MgPSBbLi4ubmV3IFNldChbLi4uZXhpc3RpbmdUYWdzLCAuLi50YWdzXSldO1xuICAgICAgY29uc3QgdXBkYXRlZEZyb250bWF0dGVyID0geyAuLi5mcm9udG1hdHRlciwgdGFnczogdXBkYXRlZFRhZ3MgfTtcbiAgICAgIG5ld0NvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoL14tLS1cXG5bXFxzXFxTXSo/XFxuLS0tXFxuLywgYC0tLVxcbiR7SlNPTi5zdHJpbmdpZnkodXBkYXRlZEZyb250bWF0dGVyLCBudWxsLCAyKX1cXG4tLS1cXG5gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbmV3RnJvbnRtYXR0ZXIgPSB7IHRhZ3MgfTtcbiAgICAgIG5ld0NvbnRlbnQgPSBgLS0tXFxuJHtKU09OLnN0cmluZ2lmeShuZXdGcm9udG1hdHRlciwgbnVsbCwgMil9XFxuLS0tXFxuJHtjb250ZW50fWA7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIG5ld0NvbnRlbnQpO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlRW1iZWRkaW5nc0ZvckZpbGUoZmlsZTogVEZpbGUpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5lbWJlZGRpbmdNYW5hZ2VyLmdlbmVyYXRlRW1iZWRkaW5nc0ZvckZpbGUoZmlsZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGVtYmVkZGluZ3M6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgfVxuXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICB9XG59XG5cbmNsYXNzIEFJUGx1Z2luU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICBwbHVnaW46IEFJUGx1Z2luO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEFJUGx1Z2luKSB7XG4gICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgY29udGFpbmVyRWwuYWRkQ2xhc3MoJ2FpLXBsdWdpbi1zZXR0aW5ncycpO1xuXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQUkgUGx1Z2luIFNldHRpbmdzJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ09sbGFtYSBFbmRwb2ludCcpXG4gICAgICAuc2V0RGVzYygnVGhlIFVSTCBvZiB5b3VyIE9sbGFtYSBzZXJ2ZXInKVxuICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgIC5zZXRQbGFjZWhvbGRlcignaHR0cDovL2xvY2FsaG9zdDoxMTQzNCcpXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vbGxhbWFFbmRwb2ludClcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9sbGFtYUVuZHBvaW50ID0gdmFsdWU7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0NhY2hlIEV4cGlyYXRpb24nKVxuICAgICAgLnNldERlc2MoJ1RpbWUgaW4gbWlsbGlzZWNvbmRzIGJlZm9yZSBlbWJlZGRpbmdzIGFyZSByZWdlbmVyYXRlZCcpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCc4NjQwMDAwMCcpXG4gICAgICAgIC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FjaGVFeHBpcmF0aW9uKSlcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IG51bVZhbHVlID0gTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgICBpZiAoIWlzTmFOKG51bVZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FjaGVFeHBpcmF0aW9uID0gbnVtVmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ01vZGVsIFByb3ZpZGVyJylcbiAgICAgIC5zZXREZXNjKCdTZWxlY3QgdGhlIEFJIG1vZGVsIHByb3ZpZGVyJylcbiAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAuYWRkT3B0aW9uKE1vZGVsUHJvdmlkZXIuT2xsYW1hLCAnT2xsYW1hJylcbiAgICAgICAgLmFkZE9wdGlvbihNb2RlbFByb3ZpZGVyLk9wZW5BSSwgJ09wZW5BSScpXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWxlY3RlZFByb3ZpZGVyKVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBNb2RlbFByb3ZpZGVyKSA9PiB7XG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VsZWN0ZWRQcm92aWRlciA9IHZhbHVlO1xuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIHRoaXMuZGlzcGxheSgpOyAvLyBSZWZyZXNoIHRvIHVwZGF0ZSBtb2RlbCBvcHRpb25zXG4gICAgICAgIH0pKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ1NlbGVjdGVkIE1vZGVsJylcbiAgICAgIC5zZXREZXNjKCdDaG9vc2UgdGhlIEFJIG1vZGVsIHRvIHVzZScpXG4gICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuICAgICAgICBjb25zdCBtb2RlbHMgPSB0aGlzLnBsdWdpbi5tb2RlbE1hbmFnZXIuZ2V0QXZhaWxhYmxlTW9kZWxzKCk7XG4gICAgICAgIG1vZGVscy5mb3JFYWNoKG1vZGVsID0+IGRyb3Bkb3duLmFkZE9wdGlvbihtb2RlbCwgbW9kZWwpKTtcbiAgICAgICAgZHJvcGRvd24uc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VsZWN0ZWRNb2RlbClcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWxlY3RlZE1vZGVsID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnTm90ZSBQYXRoIFJ1bGVzJylcbiAgICAgIC5zZXREZXNjKCdDb25maWd1cmUgcnVsZXMgZm9yIGF1dG9tYXRpY2FsbHkgbW92aW5nIG5vdGVzIGJhc2VkIG9uIGNyaXRlcmlhJylcbiAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAuc2V0QnV0dG9uVGV4dCgnQWRkIFJ1bGUnKVxuICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZVBhdGhSdWxlcy5wdXNoKHsgY3JpdGVyaWE6ICcnLCB0YXJnZXRQYXRoOiAnJyB9KTtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICAgICAgfSkpO1xuXG4gICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZVBhdGhSdWxlcy5mb3JFYWNoKChydWxlLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgcnVsZUNvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuICAgICAgbmV3IFNldHRpbmcocnVsZUNvbnRhaW5lcilcbiAgICAgICAgLnNldE5hbWUoYFJ1bGUgJHtpbmRleCArIDF9YClcbiAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdDcml0ZXJpYSAoZS5nLiwgI3Byb2plY3QpJylcbiAgICAgICAgICAuc2V0VmFsdWUocnVsZS5jcml0ZXJpYSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub3RlUGF0aFJ1bGVzW2luZGV4XS5jcml0ZXJpYSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSkpXG4gICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignVGFyZ2V0IFBhdGgnKVxuICAgICAgICAgIC5zZXRWYWx1ZShydWxlLnRhcmdldFBhdGgpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZVBhdGhSdWxlc1tpbmRleF0udGFyZ2V0UGF0aCA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSkpXG4gICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdSZW1vdmUnKVxuICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVQYXRoUnVsZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgICAgICAgfSkpO1xuICAgIH0pO1xuICB9XG59XG5cbmNsYXNzIFN1Z2dlc3RNb3ZlTm90ZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcHJpdmF0ZSBmaWxlOiBURmlsZSwgcHJpdmF0ZSBzdWdnZXN0ZWRQYXRoOiBzdHJpbmcsIHByaXZhdGUgb25Nb3ZlOiAoKSA9PiB2b2lkKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2FpLXBsdWdpbi1tb2RhbCcpO1xuICAgIGNvbnRlbnRFbC5zZXRUZXh0KGBNb3ZlIFwiJHt0aGlzLmZpbGUubmFtZX1cIiB0byBcIiR7dGhpcy5zdWdnZXN0ZWRQYXRofVwiP2ApO1xuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAuc2V0QnV0dG9uVGV4dCgnTW92ZScpXG4gICAgICAgIC5hZGRDbGFzcygnYWktcGx1Z2luLWJ1dHRvbicpXG4gICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICB0aGlzLm9uTW92ZSgpO1xuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSkpXG4gICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgLnNldEJ1dHRvblRleHQoJ0NhbmNlbCcpXG4gICAgICAgIC5hZGRDbGFzcygnYWktcGx1Z2luLWJ1dHRvbicpXG4gICAgICAgIC5vbkNsaWNrKCgpID0+IHRoaXMuY2xvc2UoKSkpO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuXG5jbGFzcyBTdWdnZXN0VGl0bGVNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHByaXZhdGUgZmlsZTogVEZpbGUsIHByaXZhdGUgc3VnZ2VzdGVkVGl0bGU6IHN0cmluZywgcHJpdmF0ZSBvblJlbmFtZTogKG5ld1RpdGxlOiBzdHJpbmcpID0+IHZvaWQpIHtcbiAgICBzdXBlcihhcHApO1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnYWktcGx1Z2luLW1vZGFsJyk7XG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1N1Z2dlc3QgVGl0bGUnIH0pO1xuICAgIGNvbnN0IHRpdGxlSW5wdXQgPSBuZXcgVGV4dENvbXBvbmVudChjb250ZW50RWwpXG4gICAgICAuc2V0VmFsdWUodGhpcy5zdWdnZXN0ZWRUaXRsZSlcbiAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgdGl0bGUnKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAuc2V0QnV0dG9uVGV4dCgnUmVuYW1lJylcbiAgICAgICAgLmFkZENsYXNzKCdhaS1wbHVnaW4tYnV0dG9uJylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgIHRoaXMub25SZW5hbWUodGl0bGVJbnB1dC5nZXRWYWx1ZSgpKTtcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pKVxuICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgIC5zZXRCdXR0b25UZXh0KCdDYW5jZWwnKVxuICAgICAgICAuYWRkQ2xhc3MoJ2FpLXBsdWdpbi1idXR0b24nKVxuICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLmNsb3NlKCkpKTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cblxuY2xhc3MgU3VnZ2VzdFRhZ3NNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBzZWxlY3RlZFRhZ3M6IHN0cmluZ1tdID0gW107XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHByaXZhdGUgZmlsZTogVEZpbGUsIHByaXZhdGUgc3VnZ2VzdGVkVGFnczogc3RyaW5nW10sIHByaXZhdGUgb25BcHBseTogKHNlbGVjdGVkVGFnczogc3RyaW5nW10pID0+IHZvaWQpIHtcbiAgICBzdXBlcihhcHApO1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnYWktcGx1Z2luLW1vZGFsJyk7XG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1N1Z2dlc3QgVGFncycgfSk7XG5cbiAgICB0aGlzLnN1Z2dlc3RlZFRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAuc2V0TmFtZSh0YWcpXG4gICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFRhZ3MucHVzaCh0YWcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFRhZ3MgPSB0aGlzLnNlbGVjdGVkVGFncy5maWx0ZXIodCA9PiB0ICE9PSB0YWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pKTtcbiAgICB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAuc2V0QnV0dG9uVGV4dCgnQXBwbHkgVGFncycpXG4gICAgICAgIC5hZGRDbGFzcygnYWktcGx1Z2luLWJ1dHRvbicpXG4gICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICB0aGlzLm9uQXBwbHkodGhpcy5zZWxlY3RlZFRhZ3MpO1xuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSkpXG4gICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgLnNldEJ1dHRvblRleHQoJ0NhbmNlbCcpXG4gICAgICAgIC5hZGRDbGFzcygnYWktcGx1Z2luLWJ1dHRvbicpXG4gICAgICAgIC5vbkNsaWNrKCgpID0+IHRoaXMuY2xvc2UoKSkpO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufSIsICJpbXBvcnQgeyBURmlsZSwgVmF1bHQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBEYXRhYmFzZU1hbmFnZXIgfSBmcm9tICcuL2RiJztcbmltcG9ydCB7IE1vZGVsTWFuYWdlciB9IGZyb20gJy4vbW9kZWxNYW5hZ2VyJztcblxuZXhwb3J0IGludGVyZmFjZSBFbWJlZGRpbmcge1xuICBpZDogc3RyaW5nO1xuICB2ZWN0b3I6IG51bWJlcltdO1xuICBmaWxlOiBzdHJpbmc7XG4gIGNodW5rOiBzdHJpbmc7XG4gIHRpbWVzdGFtcDogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgRW1iZWRkaW5nTWFuYWdlciB7XG4gIHByaXZhdGUgdmF1bHQ6IFZhdWx0O1xuICBwcml2YXRlIG1vZGVsTWFuYWdlcjogTW9kZWxNYW5hZ2VyO1xuICBwcml2YXRlIGRhdGFiYXNlTWFuYWdlcjogRGF0YWJhc2VNYW5hZ2VyO1xuICBwcml2YXRlIGNhY2hlRXhwaXJhdGlvbjogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHZhdWx0OiBWYXVsdCwgbW9kZWxNYW5hZ2VyOiBNb2RlbE1hbmFnZXIsIGRhdGFiYXNlTWFuYWdlcjogRGF0YWJhc2VNYW5hZ2VyLCBjYWNoZUV4cGlyYXRpb246IG51bWJlcikge1xuICAgIHRoaXMudmF1bHQgPSB2YXVsdDtcbiAgICB0aGlzLm1vZGVsTWFuYWdlciA9IG1vZGVsTWFuYWdlcjtcbiAgICB0aGlzLmRhdGFiYXNlTWFuYWdlciA9IGRhdGFiYXNlTWFuYWdlcjtcbiAgICB0aGlzLmNhY2hlRXhwaXJhdGlvbiA9IGNhY2hlRXhwaXJhdGlvbjtcbiAgfVxuXG4gIGFzeW5jIGdlbmVyYXRlRW1iZWRkaW5nKHRleHQ6IHN0cmluZyk6IFByb21pc2U8bnVtYmVyW10+IHtcbiAgICByZXR1cm4gdGhpcy5tb2RlbE1hbmFnZXIuZ2VuZXJhdGVFbWJlZGRpbmcodGV4dCk7XG4gIH1cblxuICBhc3luYyBnZW5lcmF0ZUVtYmVkZGluZ3NGb3JGaWxlKGZpbGU6IFRGaWxlKTogUHJvbWlzZTxFbWJlZGRpbmdbXT4ge1xuICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgY29uc3QgY2h1bmtzID0gdGhpcy5jaHVua0NvbnRlbnQoY29udGVudCk7XG4gICAgY29uc3QgZW1iZWRkaW5nczogRW1iZWRkaW5nW10gPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2h1bmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCB2ZWN0b3IgPSBhd2FpdCB0aGlzLmdlbmVyYXRlRW1iZWRkaW5nKGNodW5rc1tpXSk7XG4gICAgICBlbWJlZGRpbmdzLnB1c2goe1xuICAgICAgICBpZDogYCR7ZmlsZS5wYXRofS0ke2l9YCxcbiAgICAgICAgdmVjdG9yLFxuICAgICAgICBmaWxlOiBmaWxlLnBhdGgsXG4gICAgICAgIGNodW5rOiBjaHVua3NbaV0sXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VNYW5hZ2VyLnN0b3JlRW1iZWRkaW5ncyhlbWJlZGRpbmdzKTtcbiAgICByZXR1cm4gZW1iZWRkaW5ncztcbiAgfVxuXG4gIGFzeW5jIGdldEVtYmVkZGluZ3NGb3JGaWxlKGZpbGU6IFRGaWxlKTogUHJvbWlzZTxFbWJlZGRpbmdbXT4ge1xuICAgIGNvbnN0IHN0b3JlZEVtYmVkZGluZ3MgPSBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRFbWJlZGRpbmdzRm9yRmlsZShmaWxlLnBhdGgpO1xuICAgIGlmIChzdG9yZWRFbWJlZGRpbmdzLmxlbmd0aCA+IDAgJiYgdGhpcy5pc0VtYmVkZGluZ1ZhbGlkKHN0b3JlZEVtYmVkZGluZ3NbMF0pKSB7XG4gICAgICByZXR1cm4gc3RvcmVkRW1iZWRkaW5ncztcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVFbWJlZGRpbmdzRm9yRmlsZShmaWxlKTtcbiAgfVxuXG4gIHByaXZhdGUgY2h1bmtDb250ZW50KGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICAvLyBJbXBsZW1lbnQgY2h1bmtpbmcgbG9naWMgaGVyZVxuICAgIC8vIEZvciBzaW1wbGljaXR5LCB3ZSdsbCB1c2UgYSBiYXNpYyBwYXJhZ3JhcGgtYmFzZWQgY2h1bmtpbmdcbiAgICByZXR1cm4gY29udGVudC5zcGxpdCgnXFxuXFxuJykuZmlsdGVyKGNodW5rID0+IGNodW5rLnRyaW0oKSAhPT0gJycpO1xuICB9XG5cbiAgcHJpdmF0ZSBpc0VtYmVkZGluZ1ZhbGlkKGVtYmVkZGluZzogRW1iZWRkaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIERhdGUubm93KCkgLSBlbWJlZGRpbmcudGltZXN0YW1wIDwgdGhpcy5jYWNoZUV4cGlyYXRpb247XG4gIH1cbn0iLCAiY29uc3QgaW5zdGFuY2VPZkFueSA9IChvYmplY3QsIGNvbnN0cnVjdG9ycykgPT4gY29uc3RydWN0b3JzLnNvbWUoKGMpID0+IG9iamVjdCBpbnN0YW5jZW9mIGMpO1xuXG5sZXQgaWRiUHJveHlhYmxlVHlwZXM7XG5sZXQgY3Vyc29yQWR2YW5jZU1ldGhvZHM7XG4vLyBUaGlzIGlzIGEgZnVuY3Rpb24gdG8gcHJldmVudCBpdCB0aHJvd2luZyB1cCBpbiBub2RlIGVudmlyb25tZW50cy5cbmZ1bmN0aW9uIGdldElkYlByb3h5YWJsZVR5cGVzKCkge1xuICAgIHJldHVybiAoaWRiUHJveHlhYmxlVHlwZXMgfHxcbiAgICAgICAgKGlkYlByb3h5YWJsZVR5cGVzID0gW1xuICAgICAgICAgICAgSURCRGF0YWJhc2UsXG4gICAgICAgICAgICBJREJPYmplY3RTdG9yZSxcbiAgICAgICAgICAgIElEQkluZGV4LFxuICAgICAgICAgICAgSURCQ3Vyc29yLFxuICAgICAgICAgICAgSURCVHJhbnNhY3Rpb24sXG4gICAgICAgIF0pKTtcbn1cbi8vIFRoaXMgaXMgYSBmdW5jdGlvbiB0byBwcmV2ZW50IGl0IHRocm93aW5nIHVwIGluIG5vZGUgZW52aXJvbm1lbnRzLlxuZnVuY3Rpb24gZ2V0Q3Vyc29yQWR2YW5jZU1ldGhvZHMoKSB7XG4gICAgcmV0dXJuIChjdXJzb3JBZHZhbmNlTWV0aG9kcyB8fFxuICAgICAgICAoY3Vyc29yQWR2YW5jZU1ldGhvZHMgPSBbXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmFkdmFuY2UsXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmNvbnRpbnVlLFxuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5jb250aW51ZVByaW1hcnlLZXksXG4gICAgICAgIF0pKTtcbn1cbmNvbnN0IHRyYW5zYWN0aW9uRG9uZU1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2Zvcm1DYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gcHJvbWlzaWZ5UmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgdW5saXN0ZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICByZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBzdWNjZXNzKTtcbiAgICAgICAgICAgIHJlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKHdyYXAocmVxdWVzdC5yZXN1bHQpKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgc3VjY2Vzcyk7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgfSk7XG4gICAgLy8gVGhpcyBtYXBwaW5nIGV4aXN0cyBpbiByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgYnV0IGRvZXNuJ3QgZG9lc24ndCBleGlzdCBpbiB0cmFuc2Zvcm1DYWNoZS4gVGhpc1xuICAgIC8vIGlzIGJlY2F1c2Ugd2UgY3JlYXRlIG1hbnkgcHJvbWlzZXMgZnJvbSBhIHNpbmdsZSBJREJSZXF1ZXN0LlxuICAgIHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5zZXQocHJvbWlzZSwgcmVxdWVzdCk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5mdW5jdGlvbiBjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24odHgpIHtcbiAgICAvLyBFYXJseSBiYWlsIGlmIHdlJ3ZlIGFscmVhZHkgY3JlYXRlZCBhIGRvbmUgcHJvbWlzZSBmb3IgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICBpZiAodHJhbnNhY3Rpb25Eb25lTWFwLmhhcyh0eCkpXG4gICAgICAgIHJldHVybjtcbiAgICBjb25zdCBkb25lID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCB1bmxpc3RlbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgY29tcGxldGUpO1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIGVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlamVjdCh0eC5lcnJvciB8fCBuZXcgRE9NRXhjZXB0aW9uKCdBYm9ydEVycm9yJywgJ0Fib3J0RXJyb3InKSk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIGNvbXBsZXRlKTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZXJyb3IpO1xuICAgIH0pO1xuICAgIC8vIENhY2hlIGl0IGZvciBsYXRlciByZXRyaWV2YWwuXG4gICAgdHJhbnNhY3Rpb25Eb25lTWFwLnNldCh0eCwgZG9uZSk7XG59XG5sZXQgaWRiUHJveHlUcmFwcyA9IHtcbiAgICBnZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikge1xuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIHRyYW5zYWN0aW9uLmRvbmUuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ2RvbmUnKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbkRvbmVNYXAuZ2V0KHRhcmdldCk7XG4gICAgICAgICAgICAvLyBNYWtlIHR4LnN0b3JlIHJldHVybiB0aGUgb25seSBzdG9yZSBpbiB0aGUgdHJhbnNhY3Rpb24sIG9yIHVuZGVmaW5lZCBpZiB0aGVyZSBhcmUgbWFueS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnc3RvcmUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlY2VpdmVyLm9iamVjdFN0b3JlTmFtZXNbMV1cbiAgICAgICAgICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgOiByZWNlaXZlci5vYmplY3RTdG9yZShyZWNlaXZlci5vYmplY3RTdG9yZU5hbWVzWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBFbHNlIHRyYW5zZm9ybSB3aGF0ZXZlciB3ZSBnZXQgYmFjay5cbiAgICAgICAgcmV0dXJuIHdyYXAodGFyZ2V0W3Byb3BdKTtcbiAgICB9LFxuICAgIHNldCh0YXJnZXQsIHByb3AsIHZhbHVlKSB7XG4gICAgICAgIHRhcmdldFtwcm9wXSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGhhcyh0YXJnZXQsIHByb3ApIHtcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uICYmXG4gICAgICAgICAgICAocHJvcCA9PT0gJ2RvbmUnIHx8IHByb3AgPT09ICdzdG9yZScpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJvcCBpbiB0YXJnZXQ7XG4gICAgfSxcbn07XG5mdW5jdGlvbiByZXBsYWNlVHJhcHMoY2FsbGJhY2spIHtcbiAgICBpZGJQcm94eVRyYXBzID0gY2FsbGJhY2soaWRiUHJveHlUcmFwcyk7XG59XG5mdW5jdGlvbiB3cmFwRnVuY3Rpb24oZnVuYykge1xuICAgIC8vIER1ZSB0byBleHBlY3RlZCBvYmplY3QgZXF1YWxpdHkgKHdoaWNoIGlzIGVuZm9yY2VkIGJ5IHRoZSBjYWNoaW5nIGluIGB3cmFwYCksIHdlXG4gICAgLy8gb25seSBjcmVhdGUgb25lIG5ldyBmdW5jIHBlciBmdW5jLlxuICAgIC8vIEN1cnNvciBtZXRob2RzIGFyZSBzcGVjaWFsLCBhcyB0aGUgYmVoYXZpb3VyIGlzIGEgbGl0dGxlIG1vcmUgZGlmZmVyZW50IHRvIHN0YW5kYXJkIElEQi4gSW5cbiAgICAvLyBJREIsIHlvdSBhZHZhbmNlIHRoZSBjdXJzb3IgYW5kIHdhaXQgZm9yIGEgbmV3ICdzdWNjZXNzJyBvbiB0aGUgSURCUmVxdWVzdCB0aGF0IGdhdmUgeW91IHRoZVxuICAgIC8vIGN1cnNvci4gSXQncyBraW5kYSBsaWtlIGEgcHJvbWlzZSB0aGF0IGNhbiByZXNvbHZlIHdpdGggbWFueSB2YWx1ZXMuIFRoYXQgZG9lc24ndCBtYWtlIHNlbnNlXG4gICAgLy8gd2l0aCByZWFsIHByb21pc2VzLCBzbyBlYWNoIGFkdmFuY2UgbWV0aG9kcyByZXR1cm5zIGEgbmV3IHByb21pc2UgZm9yIHRoZSBjdXJzb3Igb2JqZWN0LCBvclxuICAgIC8vIHVuZGVmaW5lZCBpZiB0aGUgZW5kIG9mIHRoZSBjdXJzb3IgaGFzIGJlZW4gcmVhY2hlZC5cbiAgICBpZiAoZ2V0Q3Vyc29yQWR2YW5jZU1ldGhvZHMoKS5pbmNsdWRlcyhmdW5jKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIC8vIENhbGxpbmcgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIHdpdGggdGhlIHByb3h5IGFzICd0aGlzJyBjYXVzZXMgSUxMRUdBTCBJTlZPQ0FUSU9OLCBzbyB3ZSB1c2VcbiAgICAgICAgICAgIC8vIHRoZSBvcmlnaW5hbCBvYmplY3QuXG4gICAgICAgICAgICBmdW5jLmFwcGx5KHVud3JhcCh0aGlzKSwgYXJncyk7XG4gICAgICAgICAgICByZXR1cm4gd3JhcCh0aGlzLnJlcXVlc3QpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gQ2FsbGluZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJveHkgYXMgJ3RoaXMnIGNhdXNlcyBJTExFR0FMIElOVk9DQVRJT04sIHNvIHdlIHVzZVxuICAgICAgICAvLyB0aGUgb3JpZ2luYWwgb2JqZWN0LlxuICAgICAgICByZXR1cm4gd3JhcChmdW5jLmFwcGx5KHVud3JhcCh0aGlzKSwgYXJncykpO1xuICAgIH07XG59XG5mdW5jdGlvbiB0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgcmV0dXJuIHdyYXBGdW5jdGlvbih2YWx1ZSk7XG4gICAgLy8gVGhpcyBkb2Vzbid0IHJldHVybiwgaXQganVzdCBjcmVhdGVzIGEgJ2RvbmUnIHByb21pc2UgZm9yIHRoZSB0cmFuc2FjdGlvbixcbiAgICAvLyB3aGljaCBpcyBsYXRlciByZXR1cm5lZCBmb3IgdHJhbnNhY3Rpb24uZG9uZSAoc2VlIGlkYk9iamVjdEhhbmRsZXIpLlxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uKVxuICAgICAgICBjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24odmFsdWUpO1xuICAgIGlmIChpbnN0YW5jZU9mQW55KHZhbHVlLCBnZXRJZGJQcm94eWFibGVUeXBlcygpKSlcbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eSh2YWx1ZSwgaWRiUHJveHlUcmFwcyk7XG4gICAgLy8gUmV0dXJuIHRoZSBzYW1lIHZhbHVlIGJhY2sgaWYgd2UncmUgbm90IGdvaW5nIHRvIHRyYW5zZm9ybSBpdC5cbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiB3cmFwKHZhbHVlKSB7XG4gICAgLy8gV2Ugc29tZXRpbWVzIGdlbmVyYXRlIG11bHRpcGxlIHByb21pc2VzIGZyb20gYSBzaW5nbGUgSURCUmVxdWVzdCAoZWcgd2hlbiBjdXJzb3JpbmcpLCBiZWNhdXNlXG4gICAgLy8gSURCIGlzIHdlaXJkIGFuZCBhIHNpbmdsZSBJREJSZXF1ZXN0IGNhbiB5aWVsZCBtYW55IHJlc3BvbnNlcywgc28gdGhlc2UgY2FuJ3QgYmUgY2FjaGVkLlxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQlJlcXVlc3QpXG4gICAgICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0KHZhbHVlKTtcbiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IHRyYW5zZm9ybWVkIHRoaXMgdmFsdWUgYmVmb3JlLCByZXVzZSB0aGUgdHJhbnNmb3JtZWQgdmFsdWUuXG4gICAgLy8gVGhpcyBpcyBmYXN0ZXIsIGJ1dCBpdCBhbHNvIHByb3ZpZGVzIG9iamVjdCBlcXVhbGl0eS5cbiAgICBpZiAodHJhbnNmb3JtQ2FjaGUuaGFzKHZhbHVlKSlcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUNhY2hlLmdldCh2YWx1ZSk7XG4gICAgY29uc3QgbmV3VmFsdWUgPSB0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlKHZhbHVlKTtcbiAgICAvLyBOb3QgYWxsIHR5cGVzIGFyZSB0cmFuc2Zvcm1lZC5cbiAgICAvLyBUaGVzZSBtYXkgYmUgcHJpbWl0aXZlIHR5cGVzLCBzbyB0aGV5IGNhbid0IGJlIFdlYWtNYXAga2V5cy5cbiAgICBpZiAobmV3VmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgIHRyYW5zZm9ybUNhY2hlLnNldCh2YWx1ZSwgbmV3VmFsdWUpO1xuICAgICAgICByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuc2V0KG5ld1ZhbHVlLCB2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBuZXdWYWx1ZTtcbn1cbmNvbnN0IHVud3JhcCA9ICh2YWx1ZSkgPT4gcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLmdldCh2YWx1ZSk7XG5cbi8qKlxuICogT3BlbiBhIGRhdGFiYXNlLlxuICpcbiAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIGRhdGFiYXNlLlxuICogQHBhcmFtIHZlcnNpb24gU2NoZW1hIHZlcnNpb24uXG4gKiBAcGFyYW0gY2FsbGJhY2tzIEFkZGl0aW9uYWwgY2FsbGJhY2tzLlxuICovXG5mdW5jdGlvbiBvcGVuREIobmFtZSwgdmVyc2lvbiwgeyBibG9ja2VkLCB1cGdyYWRlLCBibG9ja2luZywgdGVybWluYXRlZCB9ID0ge30pIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4obmFtZSwgdmVyc2lvbik7XG4gICAgY29uc3Qgb3BlblByb21pc2UgPSB3cmFwKHJlcXVlc3QpO1xuICAgIGlmICh1cGdyYWRlKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigndXBncmFkZW5lZWRlZCcsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdXBncmFkZSh3cmFwKHJlcXVlc3QucmVzdWx0KSwgZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQubmV3VmVyc2lvbiwgd3JhcChyZXF1ZXN0LnRyYW5zYWN0aW9uKSwgZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGJsb2NrZWQpIHtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdibG9ja2VkJywgKGV2ZW50KSA9PiBibG9ja2VkKFxuICAgICAgICAvLyBDYXN0aW5nIGR1ZSB0byBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQtRE9NLWxpYi1nZW5lcmF0b3IvcHVsbC8xNDA1XG4gICAgICAgIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50Lm5ld1ZlcnNpb24sIGV2ZW50KSk7XG4gICAgfVxuICAgIG9wZW5Qcm9taXNlXG4gICAgICAgIC50aGVuKChkYikgPT4ge1xuICAgICAgICBpZiAodGVybWluYXRlZClcbiAgICAgICAgICAgIGRiLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgKCkgPT4gdGVybWluYXRlZCgpKTtcbiAgICAgICAgaWYgKGJsb2NraW5nKSB7XG4gICAgICAgICAgICBkYi5hZGRFdmVudExpc3RlbmVyKCd2ZXJzaW9uY2hhbmdlJywgKGV2ZW50KSA9PiBibG9ja2luZyhldmVudC5vbGRWZXJzaW9uLCBldmVudC5uZXdWZXJzaW9uLCBldmVudCkpO1xuICAgICAgICB9XG4gICAgfSlcbiAgICAgICAgLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgcmV0dXJuIG9wZW5Qcm9taXNlO1xufVxuLyoqXG4gKiBEZWxldGUgYSBkYXRhYmFzZS5cbiAqXG4gKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBkYXRhYmFzZS5cbiAqL1xuZnVuY3Rpb24gZGVsZXRlREIobmFtZSwgeyBibG9ja2VkIH0gPSB7fSkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIuZGVsZXRlRGF0YWJhc2UobmFtZSk7XG4gICAgaWYgKGJsb2NrZWQpIHtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdibG9ja2VkJywgKGV2ZW50KSA9PiBibG9ja2VkKFxuICAgICAgICAvLyBDYXN0aW5nIGR1ZSB0byBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQtRE9NLWxpYi1nZW5lcmF0b3IvcHVsbC8xNDA1XG4gICAgICAgIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50KSk7XG4gICAgfVxuICAgIHJldHVybiB3cmFwKHJlcXVlc3QpLnRoZW4oKCkgPT4gdW5kZWZpbmVkKTtcbn1cblxuY29uc3QgcmVhZE1ldGhvZHMgPSBbJ2dldCcsICdnZXRLZXknLCAnZ2V0QWxsJywgJ2dldEFsbEtleXMnLCAnY291bnQnXTtcbmNvbnN0IHdyaXRlTWV0aG9kcyA9IFsncHV0JywgJ2FkZCcsICdkZWxldGUnLCAnY2xlYXInXTtcbmNvbnN0IGNhY2hlZE1ldGhvZHMgPSBuZXcgTWFwKCk7XG5mdW5jdGlvbiBnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB7XG4gICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgSURCRGF0YWJhc2UgJiZcbiAgICAgICAgIShwcm9wIGluIHRhcmdldCkgJiZcbiAgICAgICAgdHlwZW9mIHByb3AgPT09ICdzdHJpbmcnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjYWNoZWRNZXRob2RzLmdldChwcm9wKSlcbiAgICAgICAgcmV0dXJuIGNhY2hlZE1ldGhvZHMuZ2V0KHByb3ApO1xuICAgIGNvbnN0IHRhcmdldEZ1bmNOYW1lID0gcHJvcC5yZXBsYWNlKC9Gcm9tSW5kZXgkLywgJycpO1xuICAgIGNvbnN0IHVzZUluZGV4ID0gcHJvcCAhPT0gdGFyZ2V0RnVuY05hbWU7XG4gICAgY29uc3QgaXNXcml0ZSA9IHdyaXRlTWV0aG9kcy5pbmNsdWRlcyh0YXJnZXRGdW5jTmFtZSk7XG4gICAgaWYgKFxuICAgIC8vIEJhaWwgaWYgdGhlIHRhcmdldCBkb2Vzbid0IGV4aXN0IG9uIHRoZSB0YXJnZXQuIEVnLCBnZXRBbGwgaXNuJ3QgaW4gRWRnZS5cbiAgICAhKHRhcmdldEZ1bmNOYW1lIGluICh1c2VJbmRleCA/IElEQkluZGV4IDogSURCT2JqZWN0U3RvcmUpLnByb3RvdHlwZSkgfHxcbiAgICAgICAgIShpc1dyaXRlIHx8IHJlYWRNZXRob2RzLmluY2x1ZGVzKHRhcmdldEZ1bmNOYW1lKSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtZXRob2QgPSBhc3luYyBmdW5jdGlvbiAoc3RvcmVOYW1lLCAuLi5hcmdzKSB7XG4gICAgICAgIC8vIGlzV3JpdGUgPyAncmVhZHdyaXRlJyA6IHVuZGVmaW5lZCBnemlwcHMgYmV0dGVyLCBidXQgZmFpbHMgaW4gRWRnZSA6KFxuICAgICAgICBjb25zdCB0eCA9IHRoaXMudHJhbnNhY3Rpb24oc3RvcmVOYW1lLCBpc1dyaXRlID8gJ3JlYWR3cml0ZScgOiAncmVhZG9ubHknKTtcbiAgICAgICAgbGV0IHRhcmdldCA9IHR4LnN0b3JlO1xuICAgICAgICBpZiAodXNlSW5kZXgpXG4gICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQuaW5kZXgoYXJncy5zaGlmdCgpKTtcbiAgICAgICAgLy8gTXVzdCByZWplY3QgaWYgb3AgcmVqZWN0cy5cbiAgICAgICAgLy8gSWYgaXQncyBhIHdyaXRlIG9wZXJhdGlvbiwgbXVzdCByZWplY3QgaWYgdHguZG9uZSByZWplY3RzLlxuICAgICAgICAvLyBNdXN0IHJlamVjdCB3aXRoIG9wIHJlamVjdGlvbiBmaXJzdC5cbiAgICAgICAgLy8gTXVzdCByZXNvbHZlIHdpdGggb3AgdmFsdWUuXG4gICAgICAgIC8vIE11c3QgaGFuZGxlIGJvdGggcHJvbWlzZXMgKG5vIHVuaGFuZGxlZCByZWplY3Rpb25zKVxuICAgICAgICByZXR1cm4gKGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgIHRhcmdldFt0YXJnZXRGdW5jTmFtZV0oLi4uYXJncyksXG4gICAgICAgICAgICBpc1dyaXRlICYmIHR4LmRvbmUsXG4gICAgICAgIF0pKVswXTtcbiAgICB9O1xuICAgIGNhY2hlZE1ldGhvZHMuc2V0KHByb3AsIG1ldGhvZCk7XG4gICAgcmV0dXJuIG1ldGhvZDtcbn1cbnJlcGxhY2VUcmFwcygob2xkVHJhcHMpID0+ICh7XG4gICAgLi4ub2xkVHJhcHMsXG4gICAgZ2V0OiAodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikgPT4gZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpLFxuICAgIGhhczogKHRhcmdldCwgcHJvcCkgPT4gISFnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB8fCBvbGRUcmFwcy5oYXModGFyZ2V0LCBwcm9wKSxcbn0pKTtcblxuY29uc3QgYWR2YW5jZU1ldGhvZFByb3BzID0gWydjb250aW51ZScsICdjb250aW51ZVByaW1hcnlLZXknLCAnYWR2YW5jZSddO1xuY29uc3QgbWV0aG9kTWFwID0ge307XG5jb25zdCBhZHZhbmNlUmVzdWx0cyA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCBpdHRyUHJveGllZEN1cnNvclRvT3JpZ2luYWxQcm94eSA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCBjdXJzb3JJdGVyYXRvclRyYXBzID0ge1xuICAgIGdldCh0YXJnZXQsIHByb3ApIHtcbiAgICAgICAgaWYgKCFhZHZhbmNlTWV0aG9kUHJvcHMuaW5jbHVkZXMocHJvcCkpXG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0W3Byb3BdO1xuICAgICAgICBsZXQgY2FjaGVkRnVuYyA9IG1ldGhvZE1hcFtwcm9wXTtcbiAgICAgICAgaWYgKCFjYWNoZWRGdW5jKSB7XG4gICAgICAgICAgICBjYWNoZWRGdW5jID0gbWV0aG9kTWFwW3Byb3BdID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICBhZHZhbmNlUmVzdWx0cy5zZXQodGhpcywgaXR0clByb3hpZWRDdXJzb3JUb09yaWdpbmFsUHJveHkuZ2V0KHRoaXMpW3Byb3BdKC4uLmFyZ3MpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhY2hlZEZ1bmM7XG4gICAgfSxcbn07XG5hc3luYyBmdW5jdGlvbiogaXRlcmF0ZSguLi5hcmdzKSB7XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXRoaXMtYXNzaWdubWVudFxuICAgIGxldCBjdXJzb3IgPSB0aGlzO1xuICAgIGlmICghKGN1cnNvciBpbnN0YW5jZW9mIElEQkN1cnNvcikpIHtcbiAgICAgICAgY3Vyc29yID0gYXdhaXQgY3Vyc29yLm9wZW5DdXJzb3IoLi4uYXJncyk7XG4gICAgfVxuICAgIGlmICghY3Vyc29yKVxuICAgICAgICByZXR1cm47XG4gICAgY3Vyc29yID0gY3Vyc29yO1xuICAgIGNvbnN0IHByb3hpZWRDdXJzb3IgPSBuZXcgUHJveHkoY3Vyc29yLCBjdXJzb3JJdGVyYXRvclRyYXBzKTtcbiAgICBpdHRyUHJveGllZEN1cnNvclRvT3JpZ2luYWxQcm94eS5zZXQocHJveGllZEN1cnNvciwgY3Vyc29yKTtcbiAgICAvLyBNYXAgdGhpcyBkb3VibGUtcHJveHkgYmFjayB0byB0aGUgb3JpZ2luYWwsIHNvIG90aGVyIGN1cnNvciBtZXRob2RzIHdvcmsuXG4gICAgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLnNldChwcm94aWVkQ3Vyc29yLCB1bndyYXAoY3Vyc29yKSk7XG4gICAgd2hpbGUgKGN1cnNvcikge1xuICAgICAgICB5aWVsZCBwcm94aWVkQ3Vyc29yO1xuICAgICAgICAvLyBJZiBvbmUgb2YgdGhlIGFkdmFuY2luZyBtZXRob2RzIHdhcyBub3QgY2FsbGVkLCBjYWxsIGNvbnRpbnVlKCkuXG4gICAgICAgIGN1cnNvciA9IGF3YWl0IChhZHZhbmNlUmVzdWx0cy5nZXQocHJveGllZEN1cnNvcikgfHwgY3Vyc29yLmNvbnRpbnVlKCkpO1xuICAgICAgICBhZHZhbmNlUmVzdWx0cy5kZWxldGUocHJveGllZEN1cnNvcik7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNJdGVyYXRvclByb3AodGFyZ2V0LCBwcm9wKSB7XG4gICAgcmV0dXJuICgocHJvcCA9PT0gU3ltYm9sLmFzeW5jSXRlcmF0b3IgJiZcbiAgICAgICAgaW5zdGFuY2VPZkFueSh0YXJnZXQsIFtJREJJbmRleCwgSURCT2JqZWN0U3RvcmUsIElEQkN1cnNvcl0pKSB8fFxuICAgICAgICAocHJvcCA9PT0gJ2l0ZXJhdGUnICYmIGluc3RhbmNlT2ZBbnkodGFyZ2V0LCBbSURCSW5kZXgsIElEQk9iamVjdFN0b3JlXSkpKTtcbn1cbnJlcGxhY2VUcmFwcygob2xkVHJhcHMpID0+ICh7XG4gICAgLi4ub2xkVHJhcHMsXG4gICAgZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgaWYgKGlzSXRlcmF0b3JQcm9wKHRhcmdldCwgcHJvcCkpXG4gICAgICAgICAgICByZXR1cm4gaXRlcmF0ZTtcbiAgICAgICAgcmV0dXJuIG9sZFRyYXBzLmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKTtcbiAgICB9LFxuICAgIGhhcyh0YXJnZXQsIHByb3ApIHtcbiAgICAgICAgcmV0dXJuIGlzSXRlcmF0b3JQcm9wKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuaGFzKHRhcmdldCwgcHJvcCk7XG4gICAgfSxcbn0pKTtcblxuZXhwb3J0IHsgZGVsZXRlREIsIG9wZW5EQiwgdW53cmFwLCB3cmFwIH07XG4iLCAiaW1wb3J0IHsgb3BlbkRCLCBEQlNjaGVtYSwgSURCUERhdGFiYXNlIH0gZnJvbSAnaWRiJztcbmltcG9ydCB7IEVtYmVkZGluZyB9IGZyb20gJy4vZW1iZWRkaW5ncyc7XG5cbmludGVyZmFjZSBBSVBsdWdpbkRCIGV4dGVuZHMgREJTY2hlbWEge1xuICBlbWJlZGRpbmdzOiB7XG4gICAga2V5OiBzdHJpbmc7XG4gICAgdmFsdWU6IEVtYmVkZGluZztcbiAgICBpbmRleGVzOiB7ICdieS1maWxlJzogc3RyaW5nOyAnYnktY2h1bmsnOiBbc3RyaW5nLCBzdHJpbmddIH07XG4gIH07XG59XG5cbmV4cG9ydCBjbGFzcyBEYXRhYmFzZU1hbmFnZXIge1xuICBwcml2YXRlIGRiOiBJREJQRGF0YWJhc2U8QUlQbHVnaW5EQj47XG5cbiAgYXN5bmMgaW5pdCgpIHtcbiAgICB0aGlzLmRiID0gYXdhaXQgb3BlbkRCPEFJUGx1Z2luREI+KCdhaS1wbHVnaW4tZGInLCAxLCB7XG4gICAgICB1cGdyYWRlKGRiKSB7XG4gICAgICAgIGNvbnN0IGVtYmVkZGluZ3NTdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKCdlbWJlZGRpbmdzJywgeyBrZXlQYXRoOiAnaWQnIH0pO1xuICAgICAgICBlbWJlZGRpbmdzU3RvcmUuY3JlYXRlSW5kZXgoJ2J5LWZpbGUnLCAnZmlsZScpO1xuICAgICAgICBlbWJlZGRpbmdzU3RvcmUuY3JlYXRlSW5kZXgoJ2J5LWNodW5rJywgWydmaWxlJywgJ2NodW5rJ10pO1xuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHN0b3JlRW1iZWRkaW5ncyhlbWJlZGRpbmdzOiBFbWJlZGRpbmdbXSkge1xuICAgIGNvbnN0IHR4ID0gdGhpcy5kYi50cmFuc2FjdGlvbignZW1iZWRkaW5ncycsICdyZWFkd3JpdGUnKTtcbiAgICBmb3IgKGNvbnN0IGVtYmVkZGluZyBvZiBlbWJlZGRpbmdzKSB7XG4gICAgICBhd2FpdCB0eC5zdG9yZS5wdXQoZW1iZWRkaW5nKTtcbiAgICB9XG4gICAgYXdhaXQgdHguZG9uZTtcbiAgfVxuXG4gIGFzeW5jIGdldEVtYmVkZGluZ3NGb3JGaWxlKGZpbGU6IHN0cmluZyk6IFByb21pc2U8RW1iZWRkaW5nW10+IHtcbiAgICByZXR1cm4gdGhpcy5kYi5nZXRBbGxGcm9tSW5kZXgoJ2VtYmVkZGluZ3MnLCAnYnktZmlsZScsIGZpbGUpO1xuICB9XG5cbiAgYXN5bmMgZ2V0RW1iZWRkaW5nRm9yQ2h1bmsoZmlsZTogc3RyaW5nLCBjaHVuazogc3RyaW5nKTogUHJvbWlzZTxFbWJlZGRpbmcgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdGhpcy5kYi5nZXRGcm9tSW5kZXgoJ2VtYmVkZGluZ3MnLCAnYnktY2h1bmsnLCBbZmlsZSwgY2h1bmtdKTtcbiAgfVxuXG4gIGFzeW5jIGdldEFsbEVtYmVkZGluZ3MoKTogUHJvbWlzZTxFbWJlZGRpbmdbXT4ge1xuICAgIHJldHVybiB0aGlzLmRiLmdldEFsbCgnZW1iZWRkaW5ncycpO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlRW1iZWRkaW5nc0ZvckZpbGUoZmlsZTogc3RyaW5nKSB7XG4gICAgY29uc3QgdHggPSB0aGlzLmRiLnRyYW5zYWN0aW9uKCdlbWJlZGRpbmdzJywgJ3JlYWR3cml0ZScpO1xuICAgIGNvbnN0IGluZGV4ID0gdHguc3RvcmUuaW5kZXgoJ2J5LWZpbGUnKTtcbiAgICBsZXQgY3Vyc29yID0gYXdhaXQgaW5kZXgub3BlbkN1cnNvcihmaWxlKTtcblxuICAgIHdoaWxlIChjdXJzb3IpIHtcbiAgICAgIGF3YWl0IGN1cnNvci5kZWxldGUoKTtcbiAgICAgIGN1cnNvciA9IGF3YWl0IGN1cnNvci5jb250aW51ZSgpO1xuICAgIH1cblxuICAgIGF3YWl0IHR4LmRvbmU7XG4gIH1cbn0iLCAiaW1wb3J0IHsgVEZpbGUsIFZhdWx0IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgTW9kZWxNYW5hZ2VyIH0gZnJvbSAnLi9tb2RlbE1hbmFnZXInO1xuXG5pbnRlcmZhY2UgQXRvbWljTm90ZSB7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGNvbnRlbnQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIEF0b21pemVyIHtcbiAgcHJpdmF0ZSB2YXVsdDogVmF1bHQ7XG4gIHByaXZhdGUgbW9kZWxNYW5hZ2VyOiBNb2RlbE1hbmFnZXI7XG5cbiAgY29uc3RydWN0b3IodmF1bHQ6IFZhdWx0LCBtb2RlbE1hbmFnZXI6IE1vZGVsTWFuYWdlcikge1xuICAgIHRoaXMudmF1bHQgPSB2YXVsdDtcbiAgICB0aGlzLm1vZGVsTWFuYWdlciA9IG1vZGVsTWFuYWdlcjtcbiAgfVxuXG4gIGFzeW5jIGF0b21pemVOb3RlKGZpbGU6IFRGaWxlKTogUHJvbWlzZTxBdG9taWNOb3RlW10+IHtcbiAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy52YXVsdC5yZWFkKGZpbGUpO1xuICAgIGNvbnN0IGNvbmNlcHRzID0gYXdhaXQgdGhpcy5pZGVudGlmeUtleUNvbmNlcHRzKGNvbnRlbnQpO1xuICAgIGNvbnN0IGF0b21pY05vdGVzOiBBdG9taWNOb3RlW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgY29uY2VwdCBvZiBjb25jZXB0cykge1xuICAgICAgY29uc3QgYXRvbWljTm90ZSA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVBdG9taWNOb3RlKGNvbmNlcHQsIGNvbnRlbnQpO1xuICAgICAgYXRvbWljTm90ZXMucHVzaChhdG9taWNOb3RlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXRvbWljTm90ZXM7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGlkZW50aWZ5S2V5Q29uY2VwdHMoY29udGVudDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIGNvbnN0IHByb21wdCA9IGBJZGVudGlmeSBrZXkgY29uY2VwdHMgaW4gdGhlIGZvbGxvd2luZyB0ZXh0LiBSZXR1cm4gdGhlIGNvbmNlcHRzIGFzIGEgSlNPTiBhcnJheSBvZiBzdHJpbmdzOlxcblxcbiR7Y29udGVudH1gO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tb2RlbE1hbmFnZXIuZ2VuZXJhdGVUZXh0KHByb21wdCk7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UocmVzcG9uc2UpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZUF0b21pY05vdGUoY29uY2VwdDogc3RyaW5nLCBzb3VyY2VDb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPEF0b21pY05vdGU+IHtcbiAgICBjb25zdCBwcm9tcHQgPSBgR2VuZXJhdGUgYW4gYXRvbWljIG5vdGUgYWJvdXQgXCIke2NvbmNlcHR9XCIgYmFzZWQgb24gdGhlIGZvbGxvd2luZyBzb3VyY2UgY29udGVudC4gUmV0dXJuIHRoZSByZXN1bHQgYXMgYSBKU09OIG9iamVjdCB3aXRoIFwidGl0bGVcIiBhbmQgXCJjb250ZW50XCIgZmllbGRzLiBUaGUgY29udGVudCBzaG91bGQgaW5jbHVkZSBhIHJlZmVyZW5jZSBiYWNrIHRvIHRoZSBvcmlnaW5hbCBub3RlOlxcblxcbiR7c291cmNlQ29udGVudH1gO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tb2RlbE1hbmFnZXIuZ2VuZXJhdGVUZXh0KHByb21wdCk7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UocmVzcG9uc2UpO1xuICB9XG59IiwgImltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBNb2RlbE1hbmFnZXIgfSBmcm9tICcuL21vZGVsTWFuYWdlcic7XG5pbXBvcnQgeyBWYXVsdFF1ZXJpZXIgfSBmcm9tICcuL3ZhdWx0UXVlcmllcic7XG5cbmV4cG9ydCBjbGFzcyBUaXRsZVN1Z2dlc3RlciB7XG4gIHByaXZhdGUgYXBwOiBBcHA7XG4gIHByaXZhdGUgbW9kZWxNYW5hZ2VyOiBNb2RlbE1hbmFnZXI7XG4gIHByaXZhdGUgdmF1bHRRdWVyaWVyOiBWYXVsdFF1ZXJpZXI7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG1vZGVsTWFuYWdlcjogTW9kZWxNYW5hZ2VyLCB2YXVsdFF1ZXJpZXI6IFZhdWx0UXVlcmllcikge1xuICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIHRoaXMubW9kZWxNYW5hZ2VyID0gbW9kZWxNYW5hZ2VyO1xuICAgIHRoaXMudmF1bHRRdWVyaWVyID0gdmF1bHRRdWVyaWVyO1xuICB9XG5cbiAgYXN5bmMgc3VnZ2VzdFRpdGxlKGZpbGU6IFRGaWxlKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICBjb25zdCBzaW1pbGFyTm90ZXMgPSBhd2FpdCB0aGlzLmZpbmRTaW1pbGFyTm90ZXMoZmlsZSk7XG4gICAgXG4gICAgY29uc3QgcHJvbXB0ID0gYFN1Z2dlc3QgYSB0aXRsZSBmb3IgdGhlIGZvbGxvd2luZyBub3RlIGNvbnRlbnQuIENvbnNpZGVyIHRoZXNlIHNpbWlsYXIgbm90ZSB0aXRsZXMgZm9yIGNvbnRleHQ6ICR7c2ltaWxhck5vdGVzLmpvaW4oJywgJyl9LiBSZXR1cm4gb25seSB0aGUgc3VnZ2VzdGVkIHRpdGxlIGFzIHBsYWluIHRleHQ6XFxuXFxuJHtjb250ZW50fWA7XG4gICAgcmV0dXJuIHRoaXMubW9kZWxNYW5hZ2VyLmdlbmVyYXRlVGV4dChwcm9tcHQpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBmaW5kU2ltaWxhck5vdGVzKGZpbGU6IFRGaWxlKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgIGNvbnN0IHNpbWlsYXJOb3RlcyA9IGF3YWl0IHRoaXMudmF1bHRRdWVyaWVyLnF1ZXJ5VmF1bHQoY29udGVudCwgNSk7XG4gICAgcmV0dXJuIHNpbWlsYXJOb3Rlcy5tYXAocmVzdWx0ID0+IHJlc3VsdC5maWxlLmJhc2VuYW1lKTtcbiAgfVxufSIsICJpbXBvcnQgeyBURmlsZSwgVmF1bHQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBFbWJlZGRpbmdNYW5hZ2VyLCBFbWJlZGRpbmcgfSBmcm9tICcuL2VtYmVkZGluZ3MnO1xuaW1wb3J0IHsgRGF0YWJhc2VNYW5hZ2VyIH0gZnJvbSAnLi9kYic7XG5cbmV4cG9ydCBjbGFzcyBWYXVsdFF1ZXJpZXIge1xuICBwcml2YXRlIHZhdWx0OiBWYXVsdDtcbiAgcHJpdmF0ZSBlbWJlZGRpbmdNYW5hZ2VyOiBFbWJlZGRpbmdNYW5hZ2VyO1xuICBwcml2YXRlIGRhdGFiYXNlTWFuYWdlcjogRGF0YWJhc2VNYW5hZ2VyO1xuXG4gIGNvbnN0cnVjdG9yKHZhdWx0OiBWYXVsdCwgZW1iZWRkaW5nTWFuYWdlcjogRW1iZWRkaW5nTWFuYWdlciwgZGF0YWJhc2VNYW5hZ2VyOiBEYXRhYmFzZU1hbmFnZXIpIHtcbiAgICB0aGlzLnZhdWx0ID0gdmF1bHQ7XG4gICAgdGhpcy5lbWJlZGRpbmdNYW5hZ2VyID0gZW1iZWRkaW5nTWFuYWdlcjtcbiAgICB0aGlzLmRhdGFiYXNlTWFuYWdlciA9IGRhdGFiYXNlTWFuYWdlcjtcbiAgfVxuXG4gIGFzeW5jIHF1ZXJ5VmF1bHQocXVlcnk6IHN0cmluZywgdG9wSzogbnVtYmVyID0gNSk6IFByb21pc2U8QXJyYXk8eyBmaWxlOiBURmlsZTsgc2ltaWxhcml0eTogbnVtYmVyIH0+PiB7XG4gICAgY29uc3QgcXVlcnlFbWJlZGRpbmcgPSBhd2FpdCB0aGlzLmVtYmVkZGluZ01hbmFnZXIuZ2VuZXJhdGVFbWJlZGRpbmcocXVlcnkpO1xuICAgIGNvbnN0IGFsbEVtYmVkZGluZ3MgPSBhd2FpdCB0aGlzLmRhdGFiYXNlTWFuYWdlci5nZXRBbGxFbWJlZGRpbmdzKCk7XG5cbiAgICBjb25zdCByZXN1bHRzID0gYWxsRW1iZWRkaW5ncy5tYXAoZW1iZWRkaW5nID0+ICh7XG4gICAgICBmaWxlOiB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChlbWJlZGRpbmcuZmlsZSkgYXMgVEZpbGUsXG4gICAgICBzaW1pbGFyaXR5OiB0aGlzLmNvc2luZVNpbWlsYXJpdHkocXVlcnlFbWJlZGRpbmcsIGVtYmVkZGluZy52ZWN0b3IpXG4gICAgfSkpO1xuXG4gICAgcmVzdWx0cy5zb3J0KChhLCBiKSA9PiBiLnNpbWlsYXJpdHkgLSBhLnNpbWlsYXJpdHkpO1xuICAgIHJldHVybiByZXN1bHRzLnNsaWNlKDAsIHRvcEspO1xuICB9XG5cbiAgcHJpdmF0ZSBjb3NpbmVTaW1pbGFyaXR5KHZlYzE6IG51bWJlcltdLCB2ZWMyOiBudW1iZXJbXSk6IG51bWJlciB7XG4gICAgY29uc3QgZG90UHJvZHVjdCA9IHZlYzEucmVkdWNlKChzdW0sIHZhbCwgaSkgPT4gc3VtICsgdmFsICogdmVjMltpXSwgMCk7XG4gICAgY29uc3QgbWFnMSA9IE1hdGguc3FydCh2ZWMxLnJlZHVjZSgoc3VtLCB2YWwpID0+IHN1bSArIHZhbCAqIHZhbCwgMCkpO1xuICAgIGNvbnN0IG1hZzIgPSBNYXRoLnNxcnQodmVjMi5yZWR1Y2UoKHN1bSwgdmFsKSA9PiBzdW0gKyB2YWwgKiB2YWwsIDApKTtcbiAgICByZXR1cm4gZG90UHJvZHVjdCAvIChtYWcxICogbWFnMik7XG4gIH1cbn0iLCAiaW1wb3J0IHsgTW9kZWxNYW5hZ2VyIH0gZnJvbSAnLi9tb2RlbE1hbmFnZXInO1xuXG5leHBvcnQgY2xhc3MgTkxQTWFuYWdlciB7XG4gIHByaXZhdGUgbW9kZWxNYW5hZ2VyOiBNb2RlbE1hbmFnZXI7XG5cbiAgY29uc3RydWN0b3IobW9kZWxNYW5hZ2VyOiBNb2RlbE1hbmFnZXIpIHtcbiAgICB0aGlzLm1vZGVsTWFuYWdlciA9IG1vZGVsTWFuYWdlcjtcbiAgfVxuXG4gIGFzeW5jIHBlcmZvcm1UYXNrKHRhc2s6IHN0cmluZywgdGV4dDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBwcm9tcHQgPSBgUGVyZm9ybSB0aGUgZm9sbG93aW5nIE5MUCB0YXNrOiAke3Rhc2t9XFxuXFxuVGV4dDogJHt0ZXh0fVxcblxcblJlc3VsdDpgO1xuICAgIHJldHVybiB0aGlzLm1vZGVsTWFuYWdlci5nZW5lcmF0ZVRleHQocHJvbXB0KTtcbiAgfVxufSIsICJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuXG5leHBvcnQgZW51bSBNb2RlbFByb3ZpZGVyIHtcbiAgT2xsYW1hID0gJ29sbGFtYScsXG4gIE9wZW5BSSA9ICdvcGVuYWknLFxufVxuXG5leHBvcnQgY2xhc3MgTW9kZWxNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBwcm92aWRlcjogTW9kZWxQcm92aWRlcjtcbiAgcHJpdmF0ZSBtb2RlbDogc3RyaW5nO1xuICBwcml2YXRlIGVuZHBvaW50OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IocHJvdmlkZXI6IE1vZGVsUHJvdmlkZXIsIG1vZGVsOiBzdHJpbmcsIGVuZHBvaW50OiBzdHJpbmcpIHtcbiAgICB0aGlzLnByb3ZpZGVyID0gcHJvdmlkZXI7XG4gICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xuICAgIHRoaXMuZW5kcG9pbnQgPSBlbmRwb2ludDtcbiAgfVxuXG4gIHNldFByb3ZpZGVyKHByb3ZpZGVyOiBNb2RlbFByb3ZpZGVyKSB7XG4gICAgdGhpcy5wcm92aWRlciA9IHByb3ZpZGVyO1xuICB9XG5cbiAgc2V0TW9kZWwobW9kZWw6IHN0cmluZykge1xuICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcbiAgfVxuXG4gIHNldEVuZHBvaW50KGVuZHBvaW50OiBzdHJpbmcpIHtcbiAgICB0aGlzLmVuZHBvaW50ID0gZW5kcG9pbnQ7XG4gIH1cblxuICBnZXRBdmFpbGFibGVNb2RlbHMoKTogc3RyaW5nW10ge1xuICAgIHN3aXRjaCAodGhpcy5wcm92aWRlcikge1xuICAgICAgY2FzZSBNb2RlbFByb3ZpZGVyLk9sbGFtYTpcbiAgICAgICAgcmV0dXJuIFsnbGxhbWEyJywgJ2dwdDRhbGwnLCAnYmxvb20nXTtcbiAgICAgIGNhc2UgTW9kZWxQcm92aWRlci5PcGVuQUk6XG4gICAgICAgIHJldHVybiBbJ2dwdC0zLjUtdHVyYm8nLCAnZ3B0LTQnXTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZW5lcmF0ZUVtYmVkZGluZyh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcltdPiB7XG4gICAgc3dpdGNoICh0aGlzLnByb3ZpZGVyKSB7XG4gICAgICBjYXNlIE1vZGVsUHJvdmlkZXIuT2xsYW1hOlxuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZU9sbGFtYUVtYmVkZGluZyh0ZXh0KTtcbiAgICAgIGNhc2UgTW9kZWxQcm92aWRlci5PcGVuQUk6XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlT3BlbkFJRW1iZWRkaW5nKHRleHQpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBtb2RlbCBwcm92aWRlcicpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdlbmVyYXRlVGV4dChwcm9tcHQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgc3dpdGNoICh0aGlzLnByb3ZpZGVyKSB7XG4gICAgICBjYXNlIE1vZGVsUHJvdmlkZXIuT2xsYW1hOlxuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZU9sbGFtYVRleHQocHJvbXB0KTtcbiAgICAgIGNhc2UgTW9kZWxQcm92aWRlci5PcGVuQUk6XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlT3BlbkFJVGV4dChwcm9tcHQpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBtb2RlbCBwcm92aWRlcicpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVPbGxhbWFFbWJlZGRpbmcodGV4dDogc3RyaW5nKTogUHJvbWlzZTxudW1iZXJbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoYCR7dGhpcy5lbmRwb2ludH0vYXBpL2VtYmVkZGluZ3NgLCB7XG4gICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxuICAgICAgICBwcm9tcHQ6IHRleHQsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLmVtYmVkZGluZztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdlbmVyYXRlIE9sbGFtYSBlbWJlZGRpbmc6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZU9wZW5BSUVtYmVkZGluZyh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcltdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdCgnaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9lbWJlZGRpbmdzJywge1xuICAgICAgICBtb2RlbDogJ3RleHQtZW1iZWRkaW5nLWFkYS0wMDInLFxuICAgICAgICBpbnB1dDogdGV4dCxcbiAgICAgIH0sIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuZW5kcG9pbnR9YCxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5kYXRhWzBdLmVtYmVkZGluZztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdlbmVyYXRlIE9wZW5BSSBlbWJlZGRpbmc6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZU9sbGFtYVRleHQocHJvbXB0OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoYCR7dGhpcy5lbmRwb2ludH0vYXBpL2dlbmVyYXRlYCwge1xuICAgICAgICBtb2RlbDogdGhpcy5tb2RlbCxcbiAgICAgICAgcHJvbXB0OiBwcm9tcHQsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnRyaW0oKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdlbmVyYXRlIE9sbGFtYSB0ZXh0OicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVPcGVuQUlUZXh0KHByb21wdDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KCdodHRwczovL2FwaS5vcGVuYWkuY29tL3YxL2NoYXQvY29tcGxldGlvbnMnLCB7XG4gICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxuICAgICAgICBtZXNzYWdlczogW3sgcm9sZTogJ3VzZXInLCBjb250ZW50OiBwcm9tcHQgfV0sXG4gICAgICB9LCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmVuZHBvaW50fWAsXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEuY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQudHJpbSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2VuZXJhdGUgT3BlbkFJIHRleHQ6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG59IiwgImltcG9ydCB7IE1vZGVsTWFuYWdlciB9IGZyb20gJy4vbW9kZWxNYW5hZ2VyJztcblxuZXhwb3J0IGNsYXNzIFRleHRDbGVhbmVyIHtcbiAgcHJpdmF0ZSBtb2RlbE1hbmFnZXI6IE1vZGVsTWFuYWdlcjtcblxuICBjb25zdHJ1Y3Rvcihtb2RlbE1hbmFnZXI6IE1vZGVsTWFuYWdlcikge1xuICAgIHRoaXMubW9kZWxNYW5hZ2VyID0gbW9kZWxNYW5hZ2VyO1xuICB9XG5cbiAgYXN5bmMgY2xlYW5UZXh0KHRleHQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgcHJvbXB0ID0gYFBsZWFzZSBjbGVhbiBhbmQgaW1wcm92ZSB0aGUgZm9sbG93aW5nIHRleHQuIEZpeCBhbnkgZ3JhbW1hdGljYWwgZXJyb3JzLCBpbXByb3ZlIGNsYXJpdHkgYW5kIGNvbmNpc2VuZXNzLCBhbmQgZW5zdXJlIHByb3BlciBmb3JtYXR0aW5nLiBSZXR1cm4gb25seSB0aGUgY2xlYW5lZCB0ZXh0IHdpdGhvdXQgYW55IGFkZGl0aW9uYWwgY29tbWVudHM6XG5cbiR7dGV4dH1gO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNsZWFuZWRUZXh0ID0gYXdhaXQgdGhpcy5tb2RlbE1hbmFnZXIuZ2VuZXJhdGVUZXh0KHByb21wdCk7XG4gICAgICByZXR1cm4gY2xlYW5lZFRleHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNsZWFuaW5nIHRleHQ6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY2xlYW4gdGV4dCcpO1xuICAgIH1cbiAgfVxufSIsICJpbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IE1vZGVsTWFuYWdlciB9IGZyb20gJy4vbW9kZWxNYW5hZ2VyJztcblxuZXhwb3J0IGNsYXNzIFRhZ1N1Z2dlc3RlciB7XG4gIHByaXZhdGUgbW9kZWxNYW5hZ2VyOiBNb2RlbE1hbmFnZXI7XG5cbiAgY29uc3RydWN0b3IobW9kZWxNYW5hZ2VyOiBNb2RlbE1hbmFnZXIpIHtcbiAgICB0aGlzLm1vZGVsTWFuYWdlciA9IG1vZGVsTWFuYWdlcjtcbiAgfVxuXG4gIGFzeW5jIHN1Z2dlc3RUYWdzKGZpbGU6IFRGaWxlLCBjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgY29uc3QgcHJvbXB0ID0gYFN1Z2dlc3QgcmVsZXZhbnQgdGFncyBmb3IgdGhlIGZvbGxvd2luZyBub3RlIGNvbnRlbnQuIFJldHVybiB0aGUgdGFncyBhcyBhIEpTT04gYXJyYXkgb2Ygc3RyaW5ncywgd2l0aG91dCBhbnkgc3ltYm9sczpcblxuJHtjb250ZW50fWA7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1vZGVsTWFuYWdlci5nZW5lcmF0ZVRleHQocHJvbXB0KTtcbiAgICAgIGNvbnN0IHN1Z2dlc3RlZFRhZ3MgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcbiAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHN1Z2dlc3RlZFRhZ3MpID8gc3VnZ2VzdGVkVGFncyA6IFtdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzdWdnZXN0aW5nIHRhZ3M6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gc3VnZ2VzdCB0YWdzJyk7XG4gICAgfVxuICB9XG5cbiAgLy8gVGhpcyBtZXRob2QgaXMgbm8gbG9uZ2VyIG5lZWRlZCBhcyB3ZSdyZSBhZGRpbmcgdGFncyBkaXJlY3RseSB0byB0aGUgZnJvbnRtYXR0ZXJcbiAgLy8gZm9ybWF0VGFnc0FzTGlzdCh0YWdzOiBzdHJpbmdbXSk6IHN0cmluZyB7XG4gIC8vICAgcmV0dXJuIHRhZ3Muam9pbignLCAnKTtcbiAgLy8gfVxufSIsICJpbXBvcnQgeyBURmlsZSwgVmF1bHQgfSBmcm9tICdvYnNpZGlhbic7XG5cbmludGVyZmFjZSBOb3RlUGF0aFJ1bGUge1xuICBjcml0ZXJpYTogc3RyaW5nO1xuICB0YXJnZXRQYXRoOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBOb3RlUGF0aE1hbmFnZXIge1xuICBwcml2YXRlIHZhdWx0OiBWYXVsdDtcbiAgcHJpdmF0ZSBydWxlczogTm90ZVBhdGhSdWxlW107XG5cbiAgY29uc3RydWN0b3IodmF1bHQ6IFZhdWx0LCBydWxlczogTm90ZVBhdGhSdWxlW10pIHtcbiAgICB0aGlzLnZhdWx0ID0gdmF1bHQ7XG4gICAgdGhpcy5ydWxlcyA9IHJ1bGVzO1xuICB9XG5cbiAgYXN5bmMgZ2V0U3VnZ2VzdGVkUGF0aChmaWxlOiBURmlsZSk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgXG4gICAgZm9yIChjb25zdCBydWxlIG9mIHRoaXMucnVsZXMpIHtcbiAgICAgIGlmICh0aGlzLm1hdGNoZXNDcml0ZXJpYShjb250ZW50LCBydWxlLmNyaXRlcmlhKSkge1xuICAgICAgICByZXR1cm4gcnVsZS50YXJnZXRQYXRoO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgYXN5bmMgY2hlY2tBbmRNb3ZlTm90ZShmaWxlOiBURmlsZSkge1xuICAgIGNvbnN0IHN1Z2dlc3RlZFBhdGggPSBhd2FpdCB0aGlzLmdldFN1Z2dlc3RlZFBhdGgoZmlsZSk7XG4gICAgaWYgKHN1Z2dlc3RlZFBhdGggJiYgZmlsZS5wYXRoICE9PSBzdWdnZXN0ZWRQYXRoKSB7XG4gICAgICBhd2FpdCB0aGlzLm1vdmVOb3RlKGZpbGUsIHN1Z2dlc3RlZFBhdGgpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG1vdmVOb3RlKGZpbGU6IFRGaWxlLCBuZXdQYXRoOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy52YXVsdC5yZW5hbWUoZmlsZSwgbmV3UGF0aCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBtb3ZlIG5vdGU6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gbW92ZSBub3RlJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBtYXRjaGVzQ3JpdGVyaWEoY29udGVudDogc3RyaW5nLCBjcml0ZXJpYTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgLy8gRm9yIG5vdywgd2UnbGwganVzdCBjaGVjayBpZiB0aGUgY29udGVudCBjb250YWlucyB0aGUgY3JpdGVyaWEgKGUuZy4sIGEgdGFnKVxuICAgIC8vIFRoaXMgY2FuIGJlIGV4cGFuZGVkIHRvIHN1cHBvcnQgbW9yZSBjb21wbGV4IGNyaXRlcmlhIGluIHRoZSBmdXR1cmVcbiAgICByZXR1cm4gY29udGVudC5pbmNsdWRlcyhjcml0ZXJpYSk7XG4gIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IE1vZGVsTWFuYWdlciB9IGZyb20gJy4vbW9kZWxNYW5hZ2VyJztcblxuZXhwb3J0IGNsYXNzIEFJQ2hhdCB7XG4gIHByaXZhdGUgYXBwOiBBcHA7XG4gIHByaXZhdGUgbW9kZWxNYW5hZ2VyOiBNb2RlbE1hbmFnZXI7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG1vZGVsTWFuYWdlcjogTW9kZWxNYW5hZ2VyKSB7XG4gICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgdGhpcy5tb2RlbE1hbmFnZXIgPSBtb2RlbE1hbmFnZXI7XG4gIH1cblxuICBvcGVuQ2hhdFdpbmRvdygpIHtcbiAgICBjb25zdCBtb2RhbCA9IG5ldyBBSUNoYXRNb2RhbCh0aGlzLmFwcCwgdGhpcy5tb2RlbE1hbmFnZXIpO1xuICAgIG1vZGFsLm9wZW4oKTtcbiAgfVxufVxuXG5jbGFzcyBBSUNoYXRNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBtb2RlbE1hbmFnZXI6IE1vZGVsTWFuYWdlcjtcbiAgcHJpdmF0ZSBtZXNzYWdlczogeyByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JywgY29udGVudDogc3RyaW5nIH1bXSA9IFtdO1xuICBwcml2YXRlIGlucHV0RWw6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gIHByaXZhdGUgY2hhdEVsOiBIVE1MRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgbW9kZWxNYW5hZ2VyOiBNb2RlbE1hbmFnZXIpIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMubW9kZWxNYW5hZ2VyID0gbW9kZWxNYW5hZ2VyO1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnYWktcGx1Z2luLW1vZGFsJyk7XG5cbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQUkgQ2hhdCcgfSk7XG5cbiAgICB0aGlzLmNoYXRFbCA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ2FpLXBsdWdpbi1jaGF0Jyk7XG5cbiAgICB0aGlzLmlucHV0RWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ3RleHRhcmVhJywgeyBjbHM6ICdhaS1wbHVnaW4taW5wdXQnIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgIC5zZXRCdXR0b25UZXh0KCdTZW5kJylcbiAgICAgICAgLmFkZENsYXNzKCdhaS1wbHVnaW4tYnV0dG9uJylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5zZW5kTWVzc2FnZSgpKSk7XG4gIH1cblxuICBhc3luYyBzZW5kTWVzc2FnZSgpIHtcbiAgICBjb25zdCB1c2VyTWVzc2FnZSA9IHRoaXMuaW5wdXRFbC52YWx1ZS50cmltKCk7XG4gICAgaWYgKCF1c2VyTWVzc2FnZSkgcmV0dXJuO1xuXG4gICAgdGhpcy5hZGRNZXNzYWdlVG9DaGF0KCd1c2VyJywgdXNlck1lc3NhZ2UpO1xuICAgIHRoaXMuaW5wdXRFbC52YWx1ZSA9ICcnO1xuXG4gICAgdGhpcy5tZXNzYWdlcy5wdXNoKHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiB1c2VyTWVzc2FnZSB9KTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubW9kZWxNYW5hZ2VyLmdlbmVyYXRlVGV4dCh0aGlzLmZvcm1hdFByb21wdCgpKTtcbiAgICAgIHRoaXMuYWRkTWVzc2FnZVRvQ2hhdCgnYXNzaXN0YW50JywgcmVzcG9uc2UpO1xuICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6IHJlc3BvbnNlIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZW5lcmF0aW5nIHJlc3BvbnNlOicsIGVycm9yKTtcbiAgICAgIHRoaXMuYWRkTWVzc2FnZVRvQ2hhdCgnYXNzaXN0YW50JywgJ1NvcnJ5LCBJIGVuY291bnRlcmVkIGFuIGVycm9yIHdoaWxlIHByb2Nlc3NpbmcgeW91ciByZXF1ZXN0LicpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkTWVzc2FnZVRvQ2hhdChyb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JywgY29udGVudDogc3RyaW5nKSB7XG4gICAgY29uc3QgbWVzc2FnZUVsID0gdGhpcy5jaGF0RWwuY3JlYXRlRGl2KCdhaS1wbHVnaW4tY2hhdC1tZXNzYWdlJyk7XG4gICAgbWVzc2FnZUVsLmFkZENsYXNzKHJvbGUpO1xuXG4gICAgY29uc3Qgcm9sZUVsID0gbWVzc2FnZUVsLmNyZWF0ZURpdignY2hhdC1yb2xlJyk7XG4gICAgcm9sZUVsLnRleHRDb250ZW50ID0gcm9sZSA9PT0gJ3VzZXInID8gJ1lvdTonIDogJ0FJOic7XG5cbiAgICBjb25zdCBjb250ZW50RWwgPSBtZXNzYWdlRWwuY3JlYXRlRGl2KCdjaGF0LWNvbnRlbnQnKTtcbiAgICBjb250ZW50RWwudGV4dENvbnRlbnQgPSBjb250ZW50O1xuXG4gICAgdGhpcy5jaGF0RWwuc2Nyb2xsVG9wID0gdGhpcy5jaGF0RWwuc2Nyb2xsSGVpZ2h0O1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRQcm9tcHQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlcy5tYXAobXNnID0+IGAke21zZy5yb2xlfTogJHttc2cuY29udGVudH1gKS5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250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
